function AstroMath(){}function Projection(t,e){this.PROJECTION=Projection.PROJ_TAN,this.ROT=this.tr_oR(t,e)}function Coo(t,e,n){this.lon=t,this.lat=e,this.prec=n,this.frame=null,this.computeDirCos()}function Tokenizer(t,e){this.string=Strings.trim(t,e),this.sep=e,this.pos=0}function Strings(){}function Numbers(){}function relMouseCoords(t){var e=0,n=0,r=0,i=0,o=this;if(t.offsetX)return{x:t.offsetX,y:t.offsetY};if(!Utils.cssScale){var a=window.getComputedStyle(document.body,null),s=a.getPropertyValue("-webkit-transform")||a.getPropertyValue("-moz-transform")||a.getPropertyValue("-ms-transform")||a.getPropertyValue("-o-transform")||a.getPropertyValue("transform"),l=/matrix\((-?\d*\.?\d+),\s*0,\s*0,\s*(-?\d*\.?\d+),\s*0,\s*0\)/,u=s.match(l);u?Utils.cssScale=parseFloat(u[1]):Utils.cssScale=1}var c=t,h=c.target,f=c.target||c.srcElement,d=f.currentStyle||window.getComputedStyle(f,null),p=parseInt(d.borderLeftWidth,10),g=parseInt(d.borderTopWidth,10),m=f.getBoundingClientRect(),v=c.clientX-p-m.left,y=c.clientY-g-m.top;return{x:parseInt(v/Utils.cssScale),y:parseInt(y/Utils.cssScale)};do e+=o.offsetLeft-o.scrollLeft,n+=o.offsetTop-o.scrollTop;while(o=o.offsetParent);return t.pageX?(r=t.pageX-e-(document.body.scrollLeft||document.documentElement.scrollLeft),i=t.pageY-n-(document.body.scrollTop||document.documentElement.scrollTop)):(r=t.originalEvent.targetTouches[0].screenX-e-(document.body.scrollLeft||document.documentElement.scrollLeft),i=t.originalEvent.targetTouches[0].screenY-n-(document.body.scrollTop||document.documentElement.scrollTop)),{x:r,y:i}}function ColorOpacity(t,e){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n=n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null,rgba="rgba("+n.r+","+n.g+","+n.b+","+e+")",rgba}function dryxAladin(t){var e=$(t).attr("data");$.getJSON(e,function(e){var n=$(t).attr("coords"),r=$(t).attr("survey"),i=e.aladin_parameters,o=e.catalogues,a=e.catalogueOrder,s=$(t).attr("transient"),l=A.aladin(t,{cooFrame:"J2000",showReticle:!1,showZoomControl:!0,showShareControl:!1,showCooGrid:!1,showFullscreenControl:!0,showFrameChoice:!1,showLayersControl:!0,showGotoControl:!1,showFrame:!0,fullScreen:!1,reticleColor:"#dc322f",reticleSize:50,survey:r,fov:i.FOV,target:n});l.getBaseImageLayer().getColorMap().reverse(1);for(var u=new Array,c=0;c<a.length;c++){var h=a[c];if(o.hasOwnProperty(h)){var f=A.graphicOverlay({name:"search areas",color:o[h].color,lineWidth:i.search_perimeter_width});l.addOverlay(f);var d=A.catalog({name:h,shape:"square",sourceSize:0,labelFont:"20px dryx_icon_font",displayLabel:!0,color:o[h].color,labelColumn:"mainId",colorColumn:"color"});l.addCatalog(d);var p=A.catalog({name:h+" markers",sourceSize:0,color:o[h].color});l.addCatalog(p);for(var g=o[h].data,m=0;m<g.length;m++)f.add(A.circle(g[m].catalogue_object_ra,g[m].catalogue_object_dec,g[m].original_search_radius_arcsec/3600,{color:g[m].radius_color,fillOpacity:.1})),p.addSources([A.marker(g[m].catalogue_object_ra,g[m].catalogue_object_dec,{popupTitle:g[m].catalogue_object_id,popupDesc:g[m].details})]),d.addSources(A.source(g[m].catalogue_object_ra,g[m].catalogue_object_dec,{mainId:g[m].label,color:g[m].radius_color}))}}var v=A.catalog({name:"transient",sourceSize:18,color:"#dc322f"});l.addCatalog(v);var y=n.split(" ");v.addSources([A.marker(y[0],y[1],{popupTitle:s})]),l.setImageSurvey("P/DSS/color"),setTimeout(function(){l.setImageSurvey(r)},200)});var n=function(t){return console.log("init function triggered for dryxAladin"),{}},r=function(t){console.log("attributes function triggered for dryxAladin")};return{init:n,update_attributes:r}}function reset_all_tickets(){$("div.aladin").each(function(t,e){$(e).attr("class","aladin-hide"),$(e).html("")}),$("div.singleTicket").each(function(t,e){$(e).find("a[data-toggle='tab']:first").click()})}var Holder=Holder||{};!function(t,e){function n(t,e,n){e=parseInt(e,10),t=parseInt(t,10);var r=Math.max(e,t),i=Math.min(e,t),o=1/12,a=Math.min(.75*i,.75*r*o);return{height:Math.round(Math.max(n.size,a))}}function r(t){var e=[];for(p in t)t.hasOwnProperty(p)&&e.push(p+":"+t[p]);return e.join(";")}function i(t){var e=t.ctx,r=t.dimensions,i=t.template,o=t.ratio,a=t.holder,s="literal"==a.textmode,l="exact"==a.textmode,u=n(r.width,r.height,i),c=u.height,h=r.width*o,f=r.height*o,d=i.font?i.font:"Arial,Helvetica,sans-serif";canvas.width=h,canvas.height=f,e.textAlign="center",e.textBaseline="middle",e.fillStyle=i.background,e.fillRect(0,0,h,f),e.fillStyle=i.foreground,e.font="bold "+c+"px "+d;var p=i.text?i.text:Math.floor(r.width)+"x"+Math.floor(r.height);if(s){var r=a.dimensions;p=r.width+"x"+r.height}else if(l&&a.exact_dimensions){var r=a.exact_dimensions;p=Math.floor(r.width)+"x"+Math.floor(r.height)}var g=e.measureText(p).width;return g/h>=.75&&(c=Math.floor(.75*c*(h/g))),e.font="bold "+c*o+"px "+d,e.fillText(p,h/2,f/2,h),canvas.toDataURL("image/png")}function o(t){var e=t.dimensions,r=t.template,i=t.holder,o="literal"==i.textmode,a="exact"==i.textmode,s=n(e.width,e.height,r),l=s.height,u=e.width,c=e.height,h=r.font?r.font:"Arial,Helvetica,sans-serif",f=r.text?r.text:Math.floor(e.width)+"x"+Math.floor(e.height);if(o){var e=i.dimensions;f=e.width+"x"+e.height}else if(a&&i.exact_dimensions){var e=i.exact_dimensions;f=Math.floor(e.width)+"x"+Math.floor(e.height)}var d=_({text:f,width:u,height:c,text_height:l,font:h,template:r});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(d)))}function a(t){return v.use_canvas&&!v.use_svg?i(t):o(t)}function s(t,e,n,r){var i=n.dimensions,o=n.theme,s=n.text?decodeURIComponent(n.text):n.text,l=i.width+"x"+i.height;o=s?g(o,{text:s}):o,o=n.font?g(o,{font:n.font}):o,e.setAttribute("data-src",r),n.theme=o,e.holder_data=n,"image"==t?(e.setAttribute("alt",s?s:o.text?o.text+" ["+l+"]":l),(v.use_fallback||!n.auto)&&(e.style.width=i.width+"px",e.style.height=i.height+"px"),v.use_fallback?e.style.backgroundColor=o.background:(e.setAttribute("src",a({ctx:C,dimensions:i,template:o,ratio:M,holder:n})),n.textmode&&"exact"==n.textmode&&(w.push(e),c(e)))):"background"==t?v.use_fallback||(e.style.backgroundImage="url("+a({ctx:C,dimensions:i,template:o,ratio:M,holder:n})+")",e.style.backgroundSize=i.width+"px "+i.height+"px"):"fluid"==t&&(e.setAttribute("alt",s?s:o.text?o.text+" ["+l+"]":l),"%"==i.height.slice(-1)?e.style.height=i.height:null!=n.auto&&n.auto||(e.style.height=i.height+"px"),"%"==i.width.slice(-1)?e.style.width=i.width:null!=n.auto&&n.auto||(e.style.width=i.width+"px"),("inline"==e.style.display||""===e.style.display||"none"==e.style.display)&&(e.style.display="block"),u(e),v.use_fallback?e.style.backgroundColor=o.background:(w.push(e),c(e)))}function l(t,e){var n={height:t.clientHeight,width:t.clientWidth};return n.height||n.width?(t.removeAttribute("data-holder-invisible"),n):(t.setAttribute("data-holder-invisible",!0),void e.call(this,t))}function u(e){if(e.holder_data){var n=l(e,t.invisible_error_fn(u));if(n){var r=e.holder_data;r.initial_dimensions=n,r.fluid_data={fluid_height:"%"==r.dimensions.height.slice(-1),fluid_width:"%"==r.dimensions.width.slice(-1),mode:null},r.fluid_data.fluid_width&&!r.fluid_data.fluid_height?(r.fluid_data.mode="width",r.fluid_data.ratio=r.initial_dimensions.width/parseFloat(r.dimensions.height)):!r.fluid_data.fluid_width&&r.fluid_data.fluid_height&&(r.fluid_data.mode="height",r.fluid_data.ratio=parseFloat(r.dimensions.width)/r.initial_dimensions.height)}}}function c(e){var n;n=null==e.nodeType?w:[e];for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];if(i.holder_data){var o=i.holder_data,s=l(i,t.invisible_error_fn(c));if(s){if(o.fluid){if(o.auto)switch(o.fluid_data.mode){case"width":s.height=s.width/o.fluid_data.ratio;break;case"height":s.width=s.height*o.fluid_data.ratio}i.setAttribute("src",a({ctx:C,dimensions:s,template:o.theme,ratio:M,holder:o}))}o.textmode&&"exact"==o.textmode&&(o.exact_dimensions=s,i.setAttribute("src",a({ctx:C,dimensions:o.dimensions,template:o.theme,ratio:M,holder:o})))}}}}function h(e,n){for(var r={theme:g(S.themes.gray,{})},i=!1,o=e.length,a=0;o>a;a++){var s=e[a];t.flags.dimensions.match(s)?(i=!0,r.dimensions=t.flags.dimensions.output(s)):t.flags.fluid.match(s)?(i=!0,r.dimensions=t.flags.fluid.output(s),r.fluid=!0):t.flags.textmode.match(s)?r.textmode=t.flags.textmode.output(s):t.flags.colors.match(s)?r.theme=t.flags.colors.output(s):n.themes[s]?n.themes.hasOwnProperty(s)&&(r.theme=g(n.themes[s],{})):t.flags.font.match(s)?r.font=t.flags.font.output(s):t.flags.auto.match(s)?r.auto=!0:t.flags.text.match(s)&&(r.text=t.flags.text.output(s))}return i?r:!1}function f(t,e){var n="complete",r="readystatechange",i=!1,o=i,a=!0,s=t.document,l=s.documentElement,u=s.addEventListener?"addEventListener":"attachEvent",c=s.addEventListener?"removeEventListener":"detachEvent",h=s.addEventListener?"":"on",f=function(a){(a.type!=r||s.readyState==n)&&(("load"==a.type?t:s)[c](h+a.type,f,i),!o&&(o=!0)&&e.call(t,null))},d=function(){try{l.doScroll("left")}catch(t){return void setTimeout(d,50)}f("poll")};if(s.readyState==n)e.call(t,"lazy");else{if(s.createEventObject&&l.doScroll){try{a=!t.frameElement}catch(p){}a&&d()}s[u](h+"DOMContentLoaded",f,i),s[u](h+r,f,i),t[u](h+"load",f,i)}}function d(t,e){var t=t.match(/^(\W)?(.*)/),e=e||document,n=e["getElement"+(t[1]?"#"==t[1]?"ById":"sByClassName":"sByTagName")],r=n.call(e,t[2]),i=[];return null!==r&&(i=r.length||0===r.length?r:[r]),i}function g(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}var m={use_svg:!1,use_canvas:!1,use_fallback:!1},v={},y=!1;canvas=document.createElement("canvas");var x=1,b=1,w=[];if(canvas.getContext)if(canvas.toDataURL("image/png").indexOf("data:image/png")<0)m.use_fallback=!0;else var C=canvas.getContext("2d");else m.use_fallback=!0;document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect&&(m.use_svg=!0,m.use_canvas=!1),m.use_fallback||(x=window.devicePixelRatio||1,b=C.webkitBackingStorePixelRatio||C.mozBackingStorePixelRatio||C.msBackingStorePixelRatio||C.oBackingStorePixelRatio||C.backingStorePixelRatio||1);var M=x/b,S={domain:"holder.js",images:"img",bgnodes:".holderjs",themes:{gray:{background:"#eee",foreground:"#aaa",size:12},social:{background:"#3a5a97",foreground:"#fff",size:12},industrial:{background:"#434A52",foreground:"#C2F200",size:12},sky:{background:"#0D8FDB",foreground:"#fff",size:12},vine:{background:"#39DBAC",foreground:"#1E292C",size:12},lava:{background:"#F8591A",foreground:"#1C2846",size:12}},stylesheet:""};t.flags={dimensions:{regex:/^(\d+)x(\d+)$/,output:function(t){var e=this.regex.exec(t);return{width:+e[1],height:+e[2]}}},fluid:{regex:/^([0-9%]+)x([0-9%]+)$/,output:function(t){var e=this.regex.exec(t);return{width:e[1],height:e[2]}}},colors:{regex:/#([0-9a-f]{3,})\:#([0-9a-f]{3,})/i,output:function(t){var e=this.regex.exec(t);return{size:S.themes.gray.size,foreground:"#"+e[2],background:"#"+e[1]}}},text:{regex:/text\:(.*)/,output:function(t){return this.regex.exec(t)[1]}},font:{regex:/font\:(.*)/,output:function(t){return this.regex.exec(t)[1]}},auto:{regex:/^auto$/},textmode:{regex:/textmode\:(.*)/,output:function(t){return this.regex.exec(t)[1]}}};var _=function(){if(window.XMLSerializer){var t=new XMLSerializer,e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");n.webkitMatchesSelector&&n.setAttribute("xmlns","http://www.w3.org/2000/svg");var i=document.createElementNS(e,"rect"),o=document.createElementNS(e,"text"),a=document.createTextNode(null);return o.setAttribute("text-anchor","middle"),o.appendChild(a),n.appendChild(i),n.appendChild(o),function(e){return n.setAttribute("width",e.width),n.setAttribute("height",e.height),i.setAttribute("width",e.width),i.setAttribute("height",e.height),i.setAttribute("fill",e.template.background),o.setAttribute("x",e.width/2),o.setAttribute("y",e.height/2),a.nodeValue=e.text,o.setAttribute("style",r({fill:e.template.foreground,"font-weight":"bold","font-size":e.text_height+"px","font-family":e.font,"dominant-baseline":"central"})),t.serializeToString(n)}}}();for(var k in t.flags)t.flags.hasOwnProperty(k)&&(t.flags[k].match=function(t){return t.match(this.regex)});t.invisible_error_fn=function(t){return function(t){if(t.hasAttribute("data-holder-invisible"))throw new Error("Holder: invisible placeholder")}},t.add_theme=function(e,n){return null!=e&&null!=n&&(S.themes[e]=n),t},t.add_image=function(e,n){var r=d(n);if(r.length)for(var i=0,o=r.length;o>i;i++){var a=document.createElement("img");a.setAttribute("data-src",e),r[i].appendChild(a)}return t},t.run=function(e){v=g({},m),y=!0;var n=g(S,e),r=[],i=[],o=[];for(null!=n.use_canvas&&n.use_canvas&&(v.use_canvas=!0,v.use_svg=!1),"string"==typeof n.images?i=d(n.images):window.NodeList&&n.images instanceof window.NodeList?i=n.images:window.Node&&n.images instanceof window.Node?i=[n.images]:window.HTMLCollection&&n.images instanceof window.HTMLCollection&&(i=n.images),"string"==typeof n.bgnodes?o=d(n.bgnodes):window.NodeList&&n.elements instanceof window.NodeList?o=n.bgnodes:window.Node&&n.bgnodes instanceof window.Node&&(o=[n.bgnodes]),c=0,u=i.length;u>c;c++)r.push(i[c]);var a=document.getElementById("holderjs-style");a||(a=document.createElement("style"),a.setAttribute("id","holderjs-style"),a.type="text/css",document.getElementsByTagName("head")[0].appendChild(a)),n.nocss||(a.styleSheet?a.styleSheet.cssText+=n.stylesheet:n.stylesheet.length&&a.appendChild(document.createTextNode(n.stylesheet)));for(var l=new RegExp(n.domain+'/(.*?)"?\\)'),u=o.length,c=0;u>c;c++){var f=window.getComputedStyle(o[c],null).getPropertyValue("background-image"),p=f.match(l),x=o[c].getAttribute("data-background-src");if(p){var b=h(p[1].split("/"),n);b&&s("background",o[c],b,f)}else if(null!=x){var b=h(x.substr(x.lastIndexOf(n.domain)+n.domain.length+1).split("/"),n);b&&s("background",o[c],b,f)}}for(u=r.length,c=0;u>c;c++){var w,C;C=w=f=null;try{C=r[c].getAttribute("src"),attr_datasrc=r[c].getAttribute("data-src")}catch(M){}if(null==attr_datasrc&&C&&C.indexOf(n.domain)>=0?f=C:attr_datasrc&&attr_datasrc.indexOf(n.domain)>=0&&(f=attr_datasrc),f){var b=h(f.substr(f.lastIndexOf(n.domain)+n.domain.length+1).split("/"),n);b&&(b.fluid?s("fluid",r[c],b,f):s("image",r[c],b,f))}}return t},f(e,function(){window.addEventListener?(window.addEventListener("resize",c,!1),window.addEventListener("orientationchange",c,!1)):window.attachEvent("onresize",c),y||t.run({}),"object"==typeof window.Turbolinks&&document.addEventListener("page:change",function(){t.run({})})}),"function"==typeof define&&define.amd&&define([],function(){return t}),function(){function t(t){this.message=t}var e="undefined"!=typeof exports?exports:this,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=Error(),t.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var r,i,o=0,a=n,s="";e.charAt(0|o)||(a="=",o%1);s+=a.charAt(63&r>>8-8*(o%1))){if(i=e.charCodeAt(o+=.75),i>255)throw new t("'btoa' failed");r=r<<8|i}return s}),e.atob||(e.atob=function(e){if(e=e.replace(/=+$/,""),1==e.length%4)throw new t("'atob' failed");for(var r,i,o=0,a=0,s="";i=e.charAt(a++);~i&&(r=o%4?64*r+i:i,o++%4)?s+=String.fromCharCode(255&r>>(6&-2*o)):0)i=n.indexOf(i);return s})}(),document.getElementsByClassName||(document.getElementsByClassName=function(t){var e=document,n,r,i,o=[];if(e.querySelectorAll)return e.querySelectorAll("."+t);if(e.evaluate)for(r=".//*[contains(concat(' ', @class, ' '), ' "+t+" ')]",n=e.evaluate(r,e,null,0,null);i=n.iterateNext();)o.push(i);else for(n=e.getElementsByTagName("*"),r=new RegExp("(^|\\s)"+t+"(\\s|$)"),i=0;i<n.length;i++)r.test(n[i].className)&&o.push(n[i]);return o}),window.getComputedStyle||(window.getComputedStyle=function(t){return this.el=t,this.getPropertyValue=function(e){var n=/(\-([a-z]){1})/g;return"float"==e&&(e="styleFloat"),n.test(e)&&(e=e.replace(n,function(){return arguments[2].toUpperCase()})),t.currentStyle[e]?t.currentStyle[e]:null},this}),Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(t){var e=this.__proto__||this.constructor.prototype;return t in this&&(!(t in e)||e[t]!==this[t])})}(Holder,window),!function(){function t(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function e(t){return null!=t&&!isNaN(t)}function n(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}function r(t){return t.length}function i(t){for(var e=1;t*e%1;)e*=10;return e}function o(t,e){try{for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}catch(r){t.prototype=e}}function a(){}function s(t){return ha+t in this}function l(t){return t=ha+t,t in this&&delete this[t]}function u(){var t=[];return this.forEach(function(e){t.push(e)}),t}function c(){var t=0;for(var e in this)e.charCodeAt(0)===fa&&++t;return t}function h(){for(var t in this)if(t.charCodeAt(0)===fa)return!1;return!0}function f(){}function d(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function p(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.substring(1);for(var n=0,r=da.length;r>n;++n){var i=da[n]+e;if(i in t)return i}}function g(){}function m(){}function v(t){function e(){for(var e=n,r=-1,i=e.length,o;++r<i;)(o=e[r].on)&&o.apply(this,arguments);return t}var n=[],r=new a;return e.on=function(e,i){var o=r.get(e),a;return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function y(){Zo.event.preventDefault()}function x(){for(var t=Zo.event,e;e=t.sourceEvent;)t=e;return t}function b(t){for(var e=new m,n=0,r=arguments.length;++n<r;)e[arguments[n]]=v(e);return e.of=function(n,r){return function(i){try{var o=i.sourceEvent=Zo.event;i.target=t,Zo.event=i,e[i.type].apply(n,r)}finally{Zo.event=o}}},e}function w(t){return ga(t,ba),t}function C(t){return"function"==typeof t?t:function(){return ma(t,this)}}function M(t){return"function"==typeof t?t:function(){return va(t,this)}}function S(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=Zo.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?s:a:t.local?o:i}function _(t){return t.trim().replace(/\s+/g," ")}function k(t){return new RegExp("(?:^|\\s+)"+Zo.requote(t)+"(?:\\s+|$)","g")}function T(t){return t.trim().split(/^|\s+/)}function N(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=T(t).map(A);var i=t.length;return"function"==typeof e?r:n}function A(t){var e=k(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",_(i+" "+t))):n.setAttribute("class",_(i.replace(e," ")))}}function E(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function o(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?o:i}function R(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?i:r}function L(t){return"function"==typeof t?t:(t=Zo.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function I(t){return{__data__:t}}function P(t){return function(){return xa(this,t)}}function O(e){return arguments.length||(e=t),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function D(t,e){for(var n=0,r=t.length;r>n;n++)for(var i=t[n],o=0,a=i.length,s;a>o;o++)(s=i[o])&&e(s,o,n);return t}function j(t){return ga(t,Ca),t}function F(t){var e,n;return function(r,i,o){var a=t[o].update,s=a.length,l;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(l=a[e])&&++e<s;);return l}}function z(){var t=this.__transition__;t&&++t.active}function q(t,e,n){function r(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function i(){var i=l(e,Qo(arguments));r.call(this),this.addEventListener(t,this[a]=i,i.$=n),i._=e}function o(){var e=new RegExp("^__on([^.]+)"+Zo.requote(t)+"$"),n;for(var r in this)if(n=r.match(e)){var i=this[r];this.removeEventListener(n[1],i,i.$),delete this[r]}}var a="__on"+t,s=t.indexOf("."),l=U;s>0&&(t=t.substring(0,s));var u=Sa.get(t);return u&&(t=u,l=H),s?e?i:r:e?g:o}function U(t,e){return function(n){var r=Zo.event;Zo.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{Zo.event=r}}}function H(t,e){var n=U(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function B(){var t=".dragsuppress-"+ ++ka,e="click"+t,n=Zo.select(ea).on("touchmove"+t,y).on("dragstart"+t,y).on("selectstart"+t,y);if(_a){var r=ta.style,i=r[_a];r[_a]="none"}return function(o){function a(){n.on(e,null)}n.on(t,null),_a&&(r[_a]=i),o&&(n.on(e,function(){y(),a()},!0),setTimeout(a,0))}}function V(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function J(){return Zo.event.changedTouches[0].identifier}function G(){return Zo.event.target}function W(){return ea}function X(t){return t>0?1:0>t?-1:0}function Z(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Y(t){return t>1?0:-1>t?Ta:Math.acos(t)}function Q(t){return t>1?Aa:-1>t?-Aa:Math.asin(t)}function K(t){return((t=Math.exp(t))-1/t)/2}function tt(t){return((t=Math.exp(t))+1/t)/2}function et(t){return((t=Math.exp(2*t))-1)/(t+1)}function nt(t){return(t=Math.sin(t/2))*t}function rt(){}function it(t,e,n){return new ot(t,e,n)}function ot(t,e,n){this.h=t,this.s=e,this.l=n}function at(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(a-o)*t/60:180>t?a:240>t?o+(a-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+e):n+e-n*e,o=2*n-a,xt(i(t+120),i(t),i(t-120))}function st(t,e,n){return new lt(t,e,n)}function lt(t,e,n){this.h=t,this.c=e,this.l=n}function ut(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),ct(n,Math.cos(t*=La)*e,Math.sin(t)*e)}function ct(t,e,n){return new ht(t,e,n)}function ht(t,e,n){this.l=t,this.a=e,this.b=n}function ft(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return i=pt(i)*Ha,r=pt(r)*Ba,o=pt(o)*Va,xt(mt(3.2404542*i-1.5371385*r-.4985314*o),mt(-.969266*i+1.8760108*r+.041556*o),mt(.0556434*i-.2040259*r+1.0572252*o))}function dt(t,e,n){return t>0?st(Math.atan2(n,e)*Ia,Math.sqrt(e*e+n*n),t):st(NaN,NaN,t)}function pt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function gt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function mt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function vt(t){return xt(t>>16,t>>8&255,255&t)}function yt(t){return vt(t)+""}function xt(t,e,n){return new bt(t,e,n)}function bt(t,e,n){this.r=t,this.g=e,this.b=n}function wt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function Ct(t,e,n){var r=0,i=0,o=0,a,s,l;if(a=/([a-z]+)\((.*)\)/i.exec(t))switch(s=a[2].split(","),a[1]){case"hsl":return n(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100);case"rgb":return e(kt(s[0]),kt(s[1]),kt(s[2]))}return(l=Wa.get(t))?e(l.r,l.g,l.b):(null==t||"#"!==t.charAt(0)||isNaN(l=parseInt(t.substring(1),16))||(4===t.length?(r=(3840&l)>>4,r=r>>4|r,i=240&l,i=i>>4|i,o=15&l,o=o<<4|o):7===t.length&&(r=(16711680&l)>>16,i=(65280&l)>>8,o=255&l)),e(r,i,o))}function Mt(t,e,n){var r=Math.min(t/=255,e/=255,n/=255),i=Math.max(t,e,n),o=i-r,a,s,l=(i+r)/2;return o?(s=.5>l?o/(i+r):o/(2-i-r),a=t==i?(e-n)/o+(n>e?6:0):e==i?(n-t)/o+2:(t-e)/o+4,a*=60):(a=NaN,s=l>0&&1>l?0:a),it(a,s,l)}function St(t,e,n){t=_t(t),e=_t(e),n=_t(n);var r=gt((.4124564*t+.3575761*e+.1804375*n)/Ha),i=gt((.2126729*t+.7151522*e+.072175*n)/Ba),o=gt((.0193339*t+.119192*e+.9503041*n)/Va);return ct(116*i-16,500*(r-i),200*(i-o))}function _t(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function kt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Tt(t){return"function"==typeof t?t:function(){return t}}function Nt(t){return t}function At(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Et(e,n,t,r)}}function Et(t,e,n,r){function i(){var t=l.status,e;if(!t&&l.responseText||t>=200&&300>t||304===t){try{e=n.call(o,l)}catch(r){return void a.error.call(o,r)}a.load.call(o,e)}else a.error.call(o,l)}var o={},a=Zo.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!ea.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(t){var e=Zo.event;Zo.event=t;try{a.progress.call(o,l)}finally{Zo.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(u=t,o):u},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(Qo(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=u&&(l.responseType=u),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),a.beforesend.call(o,l),l.send(null==r?null:r),o},o.abort=function(){return l.abort(),o},Zo.rebind(o,a,"on"),null==r?o:o.get(Rt(r))}function Rt(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function Lt(){var t=It(),e=Pt()-t;e>24?(isFinite(e)&&(clearTimeout(Qa),Qa=setTimeout(Lt,e)),Ya=0):(Ya=1,ts(Lt))}function It(){var t=Date.now();for(Ka=Xa;Ka;)t>=Ka.t&&(Ka.f=Ka.c(t-Ka.t)),Ka=Ka.n;return t}function Pt(){for(var t,e=Xa,n=1/0;e;)e.f?e=t?t.n=e.n:Xa=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return Za=t,n}function Ot(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function $t(t,e){var n=Math.pow(10,3*ca(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Dt(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,o=r?function(t){for(var e=t.length,i=[],o=0,a=r[0];e>0&&a>0;)i.push(t.substring(e-=a,e+a)),a=r[o=(o+1)%r.length];return i.reverse().join(n)}:Nt;return function(t){var n=ns.exec(t),r=n[1]||" ",a=n[2]||">",s=n[3]||"",l=n[4]||"",u=n[5],c=+n[6],h=n[7],f=n[8],d=n[9],p=1,g="",m="",v=!1;switch(f&&(f=+f.substring(1)),(u||"0"===r&&"="===a)&&(u=r="0",a="=",h&&(c-=Math.floor((c-1)/4))),d){case"n":h=!0,d="g";break;case"%":p=100,m="%",d="f";break;case"p":p=100,m="%",d="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+d.toLowerCase());case"c":case"d":v=!0,f=0;break;case"s":p=-1,d="r"}"$"===l&&(g=i[0],m=i[1]),"r"!=d||f||(d="g"),null!=f&&("g"==d?f=Math.max(1,Math.min(21,f)):("e"==d||"f"==d)&&(f=Math.max(0,Math.min(20,f)))),d=rs.get(d)||jt;var y=u&&h;return function(t){var n=m;if(v&&t%1)return"";var i=0>t||0===t&&0>1/t?(t=-t,"-"):s;if(0>p){var l=Zo.formatPrefix(t,f);t=l.scale(t),n=l.symbol+m}else t*=p;t=d(t,f);var x=t.lastIndexOf("."),b=0>x?t:t.substring(0,x),w=0>x?"":e+t.substring(x+1);!u&&h&&(b=o(b));var C=g.length+b.length+w.length+(y?0:i.length),M=c>C?new Array(C=c-C+1).join(r):"";return y&&(b=o(M+b)),i+=g,t=b+w,("<"===a?i+t+M:">"===a?M+i+t:"^"===a?M.substring(0,C>>=1)+i+t+M.substring(C):i+(y?t:M+t))+n}}}function jt(t){return t+""}function Ft(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function zt(t,e,n){function r(e){var n=t(e),r=o(n,1);return r-e>e-n?n:r}function i(n){return e(n=t(new os(n-1)),1),n}function o(t,n){return e(t=new os(+t),n),t}function a(t,r,o){var a=i(t),s=[];if(o>1)for(;r>a;)n(a)%o||s.push(new Date(+a)),e(a,1);else for(;r>a;)s.push(new Date(+a)),e(a,1);return s}function s(t,e,n){try{os=Ft;var r=new Ft;return r._=t,a(r,e,n)}finally{os=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var l=t.utc=qt(t);return l.floor=l,l.round=qt(r),l.ceil=qt(i),l.offset=qt(o),l.range=s,t}function qt(t){return function(e,n){try{os=Ft;var r=new Ft;return r._=e,t(r,n)._}finally{os=Date}}}function Ut(t){function e(t){function e(e){for(var n=[],i=-1,o=0,a,s,l;++i<r;)37===t.charCodeAt(i)&&(n.push(t.substring(o,i)),null!=(s=ss[a=t.charAt(++i)])&&(a=t.charAt(++i)),(l=N[a])&&(a=l(e,null==s?"e"===a?" ":"0":s)),n.push(a),o=i+1);return n.push(t.substring(o,i)),n.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,t,e,0);if(i!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&os!==Ft,a=new(o?Ft:os);return"j"in r?a.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+Math.floor(r.Z/100),r.M+r.Z%100,r.S,r.L),o?a._:a},e.toString=function(){return t},e}function n(t,e,n,r){for(var i,o,a,s=0,l=e.length,u=n.length;l>s;){if(r>=u)return-1;if(i=e.charCodeAt(s++),37===i){if(a=e.charAt(s++),o=A[a in ss?e.charAt(s++):a],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(t,e,n){C.lastIndex=0;var r=C.exec(e.substring(n));return r?(t.w=M.get(r[0].toLowerCase()),n+r[0].length):-1}function i(t,e,n){b.lastIndex=0;var r=b.exec(e.substring(n));return r?(t.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){k.lastIndex=0;var r=k.exec(e.substring(n));return r?(t.m=T.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,n){S.lastIndex=0;var r=S.exec(e.substring(n));return r?(t.m=_.get(r[0].toLowerCase()),n+r[0].length):-1}function s(t,e,r){return n(t,N.c.toString(),e,r)}function l(t,e,r){return n(t,N.x.toString(),e,r)}function u(t,e,r){return n(t,N.X.toString(),e,r)}function c(t,e,n){var r=x.get(e.substring(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var h=t.dateTime,f=t.date,d=t.time,p=t.periods,g=t.days,m=t.shortDays,v=t.months,y=t.shortMonths;e.utc=function(t){function n(t){try{os=Ft;var e=new os;return e._=t,r(e)}finally{os=Date}}var r=e(t);return n.parse=function(t){try{os=Ft;var e=r.parse(t);return e&&e._}finally{os=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=le;var x=Zo.map(),b=Bt(g),w=Vt(g),C=Bt(m),M=Vt(m),S=Bt(v),_=Vt(v),k=Bt(y),T=Vt(y);p.forEach(function(t,e){x.set(t.toLowerCase(),e)});var N={a:function(t){return m[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return v[t.getMonth()]},c:e(h),d:function(t,e){return Ht(t.getDate(),e,2)},e:function(t,e){return Ht(t.getDate(),e,2)},H:function(t,e){return Ht(t.getHours(),e,2)},I:function(t,e){return Ht(t.getHours()%12||12,e,2)},j:function(t,e){return Ht(1+is.dayOfYear(t),e,3)},L:function(t,e){return Ht(t.getMilliseconds(),e,3)},m:function(t,e){return Ht(t.getMonth()+1,e,2)},M:function(t,e){return Ht(t.getMinutes(),e,2)},p:function(t){return p[+(t.getHours()>=12)]},S:function(t,e){return Ht(t.getSeconds(),e,2)},U:function(t,e){return Ht(is.sundayOfYear(t),e,2)},w:function(t){return t.getDay();
},W:function(t,e){return Ht(is.mondayOfYear(t),e,2)},x:e(f),X:e(d),y:function(t,e){return Ht(t.getFullYear()%100,e,2)},Y:function(t,e){return Ht(t.getFullYear()%1e4,e,4)},Z:ae,"%":function(){return"%"}},A={a:r,A:i,b:o,B:a,c:s,d:te,e:te,H:ne,I:ne,j:ee,L:oe,m:Kt,M:re,p:c,S:ie,U:Gt,w:Jt,W:Wt,x:l,X:u,y:Zt,Y:Xt,Z:Yt,"%":se};return e}function Ht(t,e,n){var r=0>t?"-":"",i=(r?-t:t)+"",o=i.length;return r+(n>o?new Array(n-o+1).join(e)+i:i)}function Bt(t){return new RegExp("^(?:"+t.map(Zo.requote).join("|")+")","i")}function Vt(t){for(var e=new a,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Jt(t,e,n){ls.lastIndex=0;var r=ls.exec(e.substring(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Gt(t,e,n){ls.lastIndex=0;var r=ls.exec(e.substring(n));return r?(t.U=+r[0],n+r[0].length):-1}function Wt(t,e,n){ls.lastIndex=0;var r=ls.exec(e.substring(n));return r?(t.W=+r[0],n+r[0].length):-1}function Xt(t,e,n){ls.lastIndex=0;var r=ls.exec(e.substring(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Zt(t,e,n){ls.lastIndex=0;var r=ls.exec(e.substring(n,n+2));return r?(t.y=Qt(+r[0]),n+r[0].length):-1}function Yt(t,e,n){return/^[+-]\d{4}$/.test(e=e.substring(n,n+5))?(t.Z=-e,n+5):-1}function Qt(t){return t+(t>68?1900:2e3)}function Kt(t,e,n){ls.lastIndex=0;var r=ls.exec(e.substring(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function te(t,e,n){ls.lastIndex=0;var r=ls.exec(e.substring(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ee(t,e,n){ls.lastIndex=0;var r=ls.exec(e.substring(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function ne(t,e,n){ls.lastIndex=0;var r=ls.exec(e.substring(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function re(t,e,n){ls.lastIndex=0;var r=ls.exec(e.substring(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ie(t,e,n){ls.lastIndex=0;var r=ls.exec(e.substring(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function oe(t,e,n){ls.lastIndex=0;var r=ls.exec(e.substring(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ae(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=~~(ca(e)/60),i=ca(e)%60;return n+Ht(r,"0",2)+Ht(i,"0",2)}function se(t,e,n){us.lastIndex=0;var r=us.exec(e.substring(n,n+1));return r?n+r[0].length:-1}function le(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function ue(){}function ce(t,e,n){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function he(t,e){t&&ds.hasOwnProperty(t.type)&&ds[t.type](t,e)}function fe(t,e,n){var r=-1,i=t.length-n,o;for(e.lineStart();++r<i;)o=t[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function de(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)fe(t[n],e,1);e.polygonEnd()}function pe(){function t(t,e){t*=La,e=e*La/2+Ta/4;var n=t-r,a=n>=0?1:-1,s=a*n,l=Math.cos(e),u=Math.sin(e),c=o*u,h=i*l+c*Math.cos(s),f=c*a*Math.sin(s);gs.add(Math.atan2(f,h)),r=t,i=l,o=u}var e,n,r,i,o;ms.point=function(a,s){ms.point=t,r=(e=a)*La,i=Math.cos(s=(n=s)*La/2+Ta/4),o=Math.sin(s)},ms.lineEnd=function(){t(e,n)}}function ge(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function me(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ve(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ye(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function xe(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function be(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function we(t){return[Math.atan2(t[1],t[0]),Q(t[2])]}function Ce(t,e){return ca(t[0]-e[0])<Ea&&ca(t[1]-e[1])<Ea}function Me(t,e){t*=La;var n=Math.cos(e*=La);Se(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Se(t,e,n){++vs,xs+=(t-xs)/vs,bs+=(e-bs)/vs,ws+=(n-ws)/vs}function _e(){function t(t,i){t*=La;var o=Math.cos(i*=La),a=o*Math.cos(t),s=o*Math.sin(t),l=Math.sin(i),u=Math.atan2(Math.sqrt((u=n*l-r*s)*u+(u=r*a-e*l)*u+(u=e*s-n*a)*u),e*a+n*s+r*l);ys+=u,Cs+=u*(e+(e=a)),Ms+=u*(n+(n=s)),Ss+=u*(r+(r=l)),Se(e,n,r)}var e,n,r;Ns.point=function(i,o){i*=La;var a=Math.cos(o*=La);e=a*Math.cos(i),n=a*Math.sin(i),r=Math.sin(o),Ns.point=t,Se(e,n,r)}}function ke(){Ns.point=Me}function Te(){function t(t,e){t*=La;var n=Math.cos(e*=La),a=n*Math.cos(t),s=n*Math.sin(t),l=Math.sin(e),u=i*l-o*s,c=o*a-r*l,h=r*s-i*a,f=Math.sqrt(u*u+c*c+h*h),d=r*a+i*s+o*l,p=f&&-Y(d)/f,g=Math.atan2(f,d);_s+=p*u,ks+=p*c,Ts+=p*h,ys+=g,Cs+=g*(r+(r=a)),Ms+=g*(i+(i=s)),Ss+=g*(o+(o=l)),Se(r,i,o)}var e,n,r,i,o;Ns.point=function(a,s){e=a,n=s,Ns.point=t,a*=La;var l=Math.cos(s*=La);r=l*Math.cos(a),i=l*Math.sin(a),o=Math.sin(s),Se(r,i,o)},Ns.lineEnd=function(){t(e,n),Ns.lineEnd=ke,Ns.point=Me}}function Ne(){return!0}function Ae(t,e,n,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(Ce(n,r)){i.lineStart();for(var s=0;e>s;++s)i.point((n=t[s])[0],n[1]);return void i.lineEnd()}var l=new Re(n,t,null,!0),u=new Re(n,null,l,!1);l.o=u,o.push(l),a.push(u),l=new Re(r,t,null,!1),u=new Re(r,null,l,!0),l.o=u,o.push(l),a.push(u)}}),a.sort(e),Ee(o),Ee(a),o.length){for(var s=0,l=n,u=a.length;u>s;++s)a[s].e=l=!l;for(var c=o[0],h,f;;){for(var d=c,p=!0;d.v;)if((d=d.n)===c)return;h=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(var s=0,u=h.length;u>s;++s)i.point((f=h[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p){h=d.p.z;for(var s=h.length-1;s>=0;--s)i.point((f=h[s])[0],f[1])}else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,h=d.z,p=!p}while(!d.v);i.lineEnd()}}}function Ee(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function Re(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Le(t,e,n,r){return function(i,o){function a(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function s(t,e){var n=i(t,e);d.point(n[0],n[1])}function l(){g.point=s,d.lineStart()}function u(){g.point=a,d.lineEnd()}function c(t,e){w.push([t,e]);var n=i(t,e);y.point(n[0],n[1])}function h(){y.lineStart(),w=[]}function f(){c(w[0][0],w[0][1]),y.lineEnd();var t=y.clean(),e=v.buffer(),n,r=e.length;if(w.pop(),b.push(w),w=null,r)if(1&t){n=e[0];var r=n.length-1,i=-1,a;if(r>0){for(x||(o.polygonStart(),x=!0),o.lineStart();++i<r;)o.point((a=n[i])[0],a[1]);o.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),m.push(e.filter(Ie))}var d=e(o),p=i.invert(r[0],r[1]),g={point:a,lineStart:l,lineEnd:u,polygonStart:function(){g.point=c,g.lineStart=h,g.lineEnd=f,m=[],b=[]},polygonEnd:function(){g.point=a,g.lineStart=l,g.lineEnd=u,m=Zo.merge(m);var t=$e(p,b);m.length?(x||(o.polygonStart(),x=!0),Ae(m,Oe,t,n,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),m=b=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},m,v=Pe(),y=e(v),x=!1,b,w;return g}}function Ie(t){return t.length>1}function Pe(){var t=[],e;return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:g,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Oe(t,e){return((t=t.x)[0]<0?t[1]-Aa-Ea:Aa-t[1])-((e=e.x)[0]<0?e[1]-Aa-Ea:Aa-e[1])}function $e(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;gs.reset();for(var s=0,l=e.length;l>s;++s){var u=e[s],c=u.length;if(c)for(var h=u[0],f=h[0],d=h[1]/2+Ta/4,p=Math.sin(d),g=Math.cos(d),m=1;;){m===c&&(m=0),t=u[m];var v=t[0],y=t[1]/2+Ta/4,x=Math.sin(y),b=Math.cos(y),w=v-f,C=w>=0?1:-1,M=C*w,S=M>Ta,_=p*x;if(gs.add(Math.atan2(_*C*Math.sin(M),g*b+_*Math.cos(M))),o+=S?w+C*Na:w,S^f>=n^v>=n){var k=ve(ge(h),ge(t));be(k);var T=ve(i,k);be(T);var N=(S^w>=0?-1:1)*Q(T[2]);(r>N||r===N&&(k[0]||k[1]))&&(a+=S^w>=0?1:-1)}if(!m++)break;f=v,p=x,g=b,h=t}}return(-Ea>o||Ea>o&&0>gs)^1&a}function De(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(o,a){var s=o>0?Ta:-Ta,l=ca(o-e);ca(l-Ta)<Ea?(t.point(e,n=(n+a)/2>0?Aa:-Aa),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(o,n),i=0):r!==s&&l>=Ta&&(ca(e-r)<Ea&&(e-=r*Ea),ca(o-s)<Ea&&(o-=s*Ea),n=je(e,n,o,a),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),i=0),t.point(e=o,n=a),r=s},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function je(t,e,n,r){var i,o,a=Math.sin(t-n);return ca(a)>Ea?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+r)/2}function Fe(t,e,n,r){var i;if(null==t)i=n*Aa,r.point(-Ta,i),r.point(0,i),r.point(Ta,i),r.point(Ta,0),r.point(Ta,-i),r.point(0,-i),r.point(-Ta,-i),r.point(-Ta,0),r.point(-Ta,i);else if(ca(t[0]-e[0])>Ea){var o=t[0]<e[0]?Ta:-Ta;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function ze(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,f){var d=[h,f],p,g=e(h,f),m=a?g?0:i(h,f):g?i(h+(0>h?Ta:-Ta),f):0;if(!n&&(u=l=g)&&t.lineStart(),g!==l&&(p=r(n,d),(Ce(n,p)||Ce(d,p))&&(d[0]+=Ea,d[1]+=Ea,g=e(d[0],d[1]))),g!==l)c=0,g?(t.lineStart(),p=r(d,n),t.point(p[0],p[1])):(p=r(n,d),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(s&&n&&a^g){var v;m&o||!(v=r(d,n,!0))||(c=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||n&&Ce(n,d)||t.point(d[0],d[1]),n=d,l=g,o=m},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function r(t,e,n){var r=ge(t),i=ge(e),a=[1,0,0],s=ve(r,i),l=me(s,s),u=s[0],c=l-u*u;if(!c)return!n&&t;var h=o*l/c,f=-o*u/c,d=ve(a,s),p=xe(a,h),g=xe(s,f);ye(p,g);var m=d,v=me(p,m),y=me(m,m),x=v*v-y*(me(p,p)-1);if(!(0>x)){var b=Math.sqrt(x),w=xe(m,(-v-b)/y);if(ye(w,p),w=we(w),!n)return w;var C=t[0],M=e[0],S=t[1],_=e[1],k;C>M&&(k=C,C=M,M=k);var T=M-C,N=ca(T-Ta)<Ea,A=N||Ea>T;if(!N&&S>_&&(k=S,S=_,_=k),A?N?S+_>0^w[1]<(ca(w[0]-C)<Ea?S:_):S<=w[1]&&w[1]<=_:T>Ta^(C<=w[0]&&w[0]<=M)){var E=xe(m,(-v+b)/y);return ye(E,p),[w,we(E)]}}}function i(e,n){var r=a?t:Ta-t,i=0;return-r>e?i|=1:e>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var o=Math.cos(t),a=o>0,s=ca(o)>Ea,l=gn(t,6*La);return Le(e,n,l,a?[0,-t]:[-Ta,t-Ta])}function qe(t,e,n,r){return function(i){var o=i.a,a=i.b,s=o.x,l=o.y,u=a.x,c=a.y,h=0,f=1,d=u-s,p=c-l,g;if(g=t-s,d||!(g>0)){if(g/=d,0>d){if(h>g)return;f>g&&(f=g)}else if(d>0){if(g>f)return;g>h&&(h=g)}if(g=n-s,d||!(0>g)){if(g/=d,0>d){if(g>f)return;g>h&&(h=g)}else if(d>0){if(h>g)return;f>g&&(f=g)}if(g=e-l,p||!(g>0)){if(g/=p,0>p){if(h>g)return;f>g&&(f=g)}else if(p>0){if(g>f)return;g>h&&(h=g)}if(g=r-l,p||!(0>g)){if(g/=p,0>p){if(g>f)return;g>h&&(h=g)}else if(p>0){if(h>g)return;f>g&&(f=g)}return h>0&&(i.a={x:s+h*d,y:l+h*p}),1>f&&(i.b={x:s+f*d,y:l+f*p}),i}}}}}}function Ue(t,e,n,r){function i(r,i){return ca(r[0]-t)<Ea?i>0?0:3:ca(r[0]-n)<Ea?i>0?2:1:ca(r[1]-e)<Ea?i>0?1:0:i>0?3:2}function o(t,e){return a(t.x,e.x)}function a(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(t){for(var e=0,n=x.length,r=t[1],i=0;n>i;++i)for(var o=1,a=x[i],s=a.length,l=a[0],u;s>o;++o)u=a[o],l[1]<=r?u[1]>r&&Z(l,u,t)>0&&++e:u[1]<=r&&Z(l,u,t)<0&&--e,l=u;return 0!==e}function u(o,s,l,u){var c=0,h=0;if(null==o||(c=i(o,l))!==(h=i(s,l))||a(o,s)<0^l>0){do u.point(0===c||3===c?t:n,c>1?r:e);while((c=(c+l+4)%4)!==h)}else u.point(s[0],s[1])}function c(i,o){return i>=t&&n>=i&&o>=e&&r>=o}function h(t,e){c(t,e)&&s.point(t,e)}function f(){w.point=p,x&&x.push(b=[]),N=!0,T=!1,_=k=NaN}function d(){y&&(p(C,M),S&&T&&m.rejoin(),y.push(m.buffer())),w.point=h,T&&s.lineEnd()}function p(t,e){t=Math.max(-Es,Math.min(Es,t)),e=Math.max(-Es,Math.min(Es,e));var n=c(t,e);if(x&&b.push([t,e]),N)C=t,M=e,S=n,N=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&T)s.point(t,e);else{var r={a:{x:_,y:k},b:{x:t,y:e}};v(r)?(T||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),A=!1):n&&(s.lineStart(),s.point(t,e),A=!1)}_=t,k=e,T=n}var g=s,m=Pe(),v=qe(t,e,n,r),y,x,b,w={point:h,lineStart:f,lineEnd:d,polygonStart:function(){s=m,y=[],x=[],A=!0},polygonEnd:function(){s=g,y=Zo.merge(y);var e=l([t,r]),n=A&&e,i=y.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),i&&Ae(y,o,e,u,s),s.polygonEnd()),y=x=b=null}},C,M,S,_,k,T,N,A;return w}}function He(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function Be(t){var e=0,n=Ta/3,r=sn(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Ta/180,n=t[1]*Ta/180):[e/Ta*180,n/Ta*180]},i}function Ve(t,e){function n(t,e){var n=Math.sqrt(o-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),a-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,Q((o-(t*t+n*n)*i*i)/(2*i))]},n}function Je(){function t(t,e){Ls+=i*t-r*e,r=t,i=e}var e,n,r,i;Is.point=function(o,a){Is.point=t,e=r=o,n=i=a},Is.lineEnd=function(){t(e,n)}}function Ge(t,e){Ps>t&&(Ps=t),t>$s&&($s=t),Os>e&&(Os=e),e>Ds&&(Ds=e)}function We(){function t(t,e){a.push("M",t,",",e,o)}function e(t,e){a.push("M",t,",",e),s.point=n}function n(t,e){a.push("L",t,",",e)}function r(){s.point=t}function i(){a.push("Z")}var o=Xe(4.5),a=[],s={point:t,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(t){return o=Xe(t),s},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return s}function Xe(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ze(t,e){xs+=t,bs+=e,++ws}function Ye(){function t(t,r){var i=t-e,o=r-n,a=Math.sqrt(i*i+o*o);Cs+=a*(e+t)/2,Ms+=a*(n+r)/2,Ss+=a,Ze(e=t,n=r)}var e,n;Fs.point=function(r,i){Fs.point=t,Ze(e=r,n=i)}}function Qe(){Fs.point=Ze}function Ke(){function t(t,e){var n=t-r,o=e-i,a=Math.sqrt(n*n+o*o);Cs+=a*(r+t)/2,Ms+=a*(i+e)/2,Ss+=a,a=i*t-r*e,_s+=a*(r+t),ks+=a*(i+e),Ts+=3*a,Ze(r=t,i=e)}var e,n,r,i;Fs.point=function(o,a){Fs.point=t,Ze(e=r=o,n=i=a)},Fs.lineEnd=function(){t(e,n)}}function tn(t){function e(e,n){t.moveTo(e,n),t.arc(e,n,a,0,Na)}function n(e,n){t.moveTo(e,n),s.point=r}function r(e,n){t.lineTo(e,n)}function i(){s.point=e}function o(){t.closePath()}var a=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(t){return a=t,s},result:g};return s}function en(t){function e(t){return(s?r:n)(t)}function n(e){return on(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){x=NaN,S.point=o,e.lineStart()}function o(n,r){var o=ge([n,r]),a=t(n,r);i(x,b,y,w,C,M,x=a[0],b=a[1],y=n,w=o[0],C=o[1],M=o[2],s,e),e.point(x,b)}function a(){S.point=n,e.lineEnd()}function l(){r(),S.point=u,S.lineEnd=c}function u(t,e){o(h=t,f=e),d=x,p=b,g=w,m=C,v=M,S.point=o}function c(){i(x,b,y,w,C,M,d,p,h,g,m,v,s,e),S.lineEnd=a,a()}var h,f,d,p,g,m,v,y,x,b,w,C,M,S={point:n,lineStart:r,lineEnd:a,polygonStart:function(){e.polygonStart(),S.lineStart=l},polygonEnd:function(){e.polygonEnd(),S.lineStart=r}};return S}function i(e,n,r,s,l,u,c,h,f,d,p,g,m,v){var y=c-e,x=h-n,b=y*y+x*x;if(b>4*o&&m--){var w=s+d,C=l+p,M=u+g,S=Math.sqrt(w*w+C*C+M*M),_=Math.asin(M/=S),k=ca(ca(M)-1)<Ea||ca(r-f)<Ea?(r+f)/2:Math.atan2(C,w),T=t(k,_),N=T[0],A=T[1],E=N-e,R=A-n,L=x*E-y*R;(L*L/b>o||ca((y*E+x*R)/b-.5)>.3||a>s*d+l*p+u*g)&&(i(e,n,r,s,l,u,N,A,k,w/=S,C/=S,M,m,v),v.point(N,A),i(N,A,k,w,C,M,c,h,f,d,p,g,m,v))}}var o=.5,a=Math.cos(30*La),s=16;return e.precision=function(t){return arguments.length?(s=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function nn(t){var e=en(function(e,n){return t([e*Ia,n*Ia])});return function(t){return ln(e(t))}}function rn(t){this.stream=t}function on(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function an(t){return sn(function(){return t})()}function sn(t){function e(t){return t=s(t[0]*La,t[1]*La),[t[0]*u+v,y-t[1]*u]}function n(t){return t=s.invert((t[0]-v)/u,(y-t[1])/u),t&&[t[0]*Ia,t[1]*Ia]}function r(){s=He(a=hn(p,g,m),o);var t=o(f,d);return v=c-t[0]*u,y=h+t[1]*u,i()}function i(){return M&&(M.valid=!1,M=null),e}var o,a,s,l=en(function(t,e){return t=o(t,e),[t[0]*u+v,y-t[1]*u]}),u=150,c=480,h=250,f=0,d=0,p=0,g=0,m=0,v,y,x=As,b=Nt,w=null,C=null,M;return e.stream=function(t){return M&&(M.valid=!1),M=ln(x(a,l(b(t)))),M.valid=!0,M},e.clipAngle=function(t){return arguments.length?(x=null==t?(w=t,As):ze((w=+t)*La),i()):w},e.clipExtent=function(t){return arguments.length?(C=t,b=t?Ue(t[0][0],t[0][1],t[1][0],t[1][1]):Nt,i()):C},e.scale=function(t){return arguments.length?(u=+t,r()):u},e.translate=function(t){return arguments.length?(c=+t[0],h=+t[1],r()):[c,h]},e.center=function(t){return arguments.length?(f=t[0]%360*La,d=t[1]%360*La,r()):[f*Ia,d*Ia]},e.rotate=function(t){return arguments.length?(p=t[0]%360*La,g=t[1]%360*La,m=t.length>2?t[2]%360*La:0,r()):[p*Ia,g*Ia,m*Ia]},Zo.rebind(e,l,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,r()}}function ln(t){return on(t,function(e,n){t.point(e*La,n*La)})}function un(t,e){return[t,e]}function cn(t,e){return[t>Ta?t-Na:-Ta>t?t+Na:t,e]}function hn(t,e,n){return t?e||n?He(dn(t),pn(e,n)):dn(t):e||n?pn(e,n):cn}function fn(t){return function(e,n){return e+=t,[e>Ta?e-Na:-Ta>e?e+Na:e,n]}}function dn(t){var e=fn(t);return e.invert=fn(-t),e}function pn(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*r+s*i;return[Math.atan2(l*o-c*a,s*r-u*i),Q(c*o+l*a)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(e),a=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*o-l*a;return[Math.atan2(l*o+u*a,s*r+c*i),Q(c*r-s*i)]},n}function gn(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,a,s){var l=a*e;null!=i?(i=mn(n,i),o=mn(n,o),(a>0?o>i:i>o)&&(i+=a*Na)):(i=t+a*Na,o=t-.5*l);for(var u,c=i;a>0?c>o:o>c;c-=l)s.point((u=we([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function mn(t,e){var n=ge(e);n[0]-=t,be(n);var r=Y(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ea)%(2*Math.PI)}function vn(t,e,n){var r=Zo.range(t,e-Ea,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function yn(t,e,n){var r=Zo.range(t,e-Ea,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function xn(t){return t.source}function bn(t){return t.target}function wn(t,e,n,r){var i=Math.cos(e),o=Math.sin(e),a=Math.cos(r),s=Math.sin(r),l=i*Math.cos(t),u=i*Math.sin(t),c=a*Math.cos(n),h=a*Math.sin(n),f=2*Math.asin(Math.sqrt(nt(r-e)+i*a*nt(n-t))),d=1/Math.sin(f),p=f?function(t){var e=Math.sin(t*=f)*d,n=Math.sin(f-t)*d,r=n*l+e*c,i=n*u+e*h,a=n*o+e*s;return[Math.atan2(i,r)*Ia,Math.atan2(a,Math.sqrt(r*r+i*i))*Ia]}:function(){return[t*Ia,e*Ia]};return p.distance=f,p}function Cn(){function t(t,i){var o=Math.sin(i*=La),a=Math.cos(i),s=ca((t*=La)-e),l=Math.cos(s);zs+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=r*o-n*a*l)*s),n*o+r*a*l),e=t,n=o,r=a}var e,n,r;qs.point=function(i,o){e=i*La,n=Math.sin(o*=La),r=Math.cos(o),qs.point=t},qs.lineEnd=function(){qs.point=qs.lineEnd=g}}function Mn(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&n*o/r)]},n}function Sn(t,e){function n(t,e){a>0?-Aa+Ea>e&&(e=-Aa+Ea):e>Aa-Ea&&(e=Aa-Ea);var n=a/Math.pow(i(e),o);return[n*Math.sin(o*t),a-n*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Ta/4+t/2)},o=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),a=r*Math.pow(i(t),o)/o;return o?(n.invert=function(t,e){var n=a-e,r=X(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(a/r,1/o))-Aa]},n):kn}function _n(t,e){function n(t,e){var n=o-e;return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),o=r/i+t;return ca(i)<Ea?un:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,o-X(i)*Math.sqrt(t*t+n*n)]},n)}function kn(t,e){return[t,Math.log(Math.tan(Ta/4+e/2))]}function Tn(t){var e=an(t),n=e.scale,r=e.translate,i=e.clipExtent,o;return e.scale=function(){var t=n.apply(e,arguments);return t===e?o?e.clipExtent(null):e:t},e.translate=function(){var t=r.apply(e,arguments);return t===e?o?e.clipExtent(null):e:t},e.clipExtent=function(t){var a=i.apply(e,arguments);if(a===e){if(o=null==t){var s=Ta*n(),l=r();i([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else o&&(a=null);return a},e.clipExtent(null)}function Nn(t,e){return[Math.log(Math.tan(Ta/4+e/2)),-t]}function An(t){return t[0]}function En(t){return t[1]}function Rn(t){for(var e=t.length,n=[0,1],r=2,i=2;e>i;i++){for(;r>1&&Z(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Ln(t,e){return t[0]-e[0]||t[1]-e[1]}function In(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Pn(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,s=r[0]-o,l=t[1],u=n[1],c=e[1]-l,h=r[1]-u,f=(s*(l-u)-h*(i-o))/(h*a-s*c);return[i+f*a,l+f*c]}function On(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function $n(){rr(this),this.edge=this.site=this.circle=null}function Dn(t){var e=Ys.pop()||new $n;return e.site=t,e}function jn(t){Wn(t),Zs.remove(t),Ys.push(t),rr(t)}function Fn(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,a=t.N,s=[t];jn(t);for(var l=o;l.circle&&ca(n-l.circle.x)<Ea&&ca(r-l.circle.cy)<Ea;)o=l.P,s.unshift(l),jn(l),l=o;s.unshift(l),Wn(l);for(var u=a;u.circle&&ca(n-u.circle.x)<Ea&&ca(r-u.circle.cy)<Ea;)a=u.N,s.push(u),jn(u),u=a;s.push(u),Wn(u);var c=s.length,h;for(h=1;c>h;++h)u=s[h],l=s[h-1],tr(u.edge,l.site,u.site,i);l=s[0],u=s[c-1],u.edge=Qn(l.site,u.site,null,i),Gn(l),Gn(u)}function zn(t){for(var e=t.x,n=t.y,r,i,o,a,s=Zs._;s;)if(o=qn(s,n)-e,o>Ea)s=s.L;else{if(a=e-Un(s,n),!(a>Ea)){o>-Ea?(r=s.P,i=s):a>-Ea?(r=s,i=s.N):r=i=s;break}if(!s.R){r=s;break}s=s.R}var l=Dn(t);if(Zs.insert(r,l),r||i){if(r===i)return Wn(r),i=Dn(r.site),Zs.insert(l,i),l.edge=i.edge=Qn(r.site,l.site),Gn(r),void Gn(i);if(!i)return void(l.edge=Qn(r.site,l.site));Wn(r),Wn(i);var u=r.site,c=u.x,h=u.y,f=t.x-c,d=t.y-h,p=i.site,g=p.x-c,m=p.y-h,v=2*(f*m-d*g),y=f*f+d*d,x=g*g+m*m,b={x:(m*y-d*x)/v+c,y:(f*x-g*y)/v+h};tr(i.edge,u,p,b),l.edge=Qn(u,t,null,b),i.edge=Qn(t,p,null,b),Gn(r),Gn(i)}}function qn(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.P;if(!a)return-(1/0);n=a.site;var s=n.x,l=n.y,u=l-e;if(!u)return s;var c=s-r,h=1/o-1/u,f=c/u;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*u)-l+u/2+i-o/2)))/h+r:(r+s)/2}function Un(t,e){var n=t.N;if(n)return qn(n,e);var r=t.site;return r.y===e?r.x:1/0}function Hn(t){this.site=t,this.edges=[]}function Bn(t){for(var e=t[0][0],n=t[1][0],r=t[0][1],i=t[1][1],o,a,s,l,u=Xs,c=u.length,h,f,d,p,g,m;c--;)if(h=u[c],h&&h.prepare())for(d=h.edges,p=d.length,f=0;p>f;)m=d[f].end(),s=m.x,l=m.y,g=d[++f%p].start(),o=g.x,a=g.y,(ca(s-o)>Ea||ca(l-a)>Ea)&&(d.splice(f,0,new er(Kn(h.site,m,ca(s-e)<Ea&&i-l>Ea?{x:e,y:ca(o-e)<Ea?a:i}:ca(l-i)<Ea&&n-s>Ea?{x:ca(a-i)<Ea?o:n,y:i}:ca(s-n)<Ea&&l-r>Ea?{x:n,y:ca(o-n)<Ea?a:r}:ca(l-r)<Ea&&s-e>Ea?{x:ca(a-r)<Ea?o:e,y:r}:null),h.site,null)),++p)}function Vn(t,e){return e.angle-t.angle}function Jn(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Gn(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,s=i.y,l=r.x-a,u=r.y-s,c=o.x-a,h=o.y-s,f=2*(l*h-u*c);if(!(f>=-Ra)){var d=l*l+u*u,p=c*c+h*h,g=(h*d-u*p)/f,m=(l*p-c*d)/f,h=m+s,v=tl.pop()||new Jn;v.arc=t,v.site=i,v.x=g+a,v.y=h+Math.sqrt(g*g+m*m),v.cy=h,t.circle=v;for(var y=null,x=Ks._;x;)if(v.y<x.y||v.y===x.y&&v.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}Ks.insert(y,v),y||(Qs=v)}}}}function Wn(t){var e=t.circle;e&&(e.P||(Qs=e.N),Ks.remove(e),tl.push(e),rr(e),t.circle=null)}function Xn(t){for(var e=Ws,n=qe(t[0][0],t[0][1],t[1][0],t[1][1]),r=e.length,i;r--;)i=e[r],(!Zn(i,t)||!n(i)||ca(i.a.x-i.b.x)<Ea&&ca(i.a.y-i.b.y)<Ea)&&(i.a=i.b=null,e.splice(r,1))}function Zn(t,e){var n=t.b;if(n)return!0;var r=t.a,i=e[0][0],o=e[1][0],a=e[0][1],s=e[1][1],l=t.l,u=t.r,c=l.x,h=l.y,f=u.x,d=u.y,p=(c+f)/2,g=(h+d)/2,m,v;if(d===h){if(i>p||p>=o)return;if(c>f){if(r){if(r.y>=s)return}else r={x:p,y:a};n={x:p,y:s}}else{if(r){if(r.y<a)return}else r={x:p,y:s};n={x:p,y:a}}}else if(m=(c-f)/(d-h),v=g-m*p,-1>m||m>1)if(c>f){if(r){if(r.y>=s)return}else r={x:(a-v)/m,y:a};n={x:(s-v)/m,y:s}}else{if(r){if(r.y<a)return}else r={x:(s-v)/m,y:s};n={x:(a-v)/m,y:a}}else if(d>h){if(r){if(r.x>=o)return}else r={x:i,y:m*i+v};n={x:o,y:m*o+v}}else{if(r){if(r.x<i)return}else r={x:o,y:m*o+v};n={x:i,y:m*i+v}}return t.a=r,t.b=n,!0}function Yn(t,e){this.l=t,this.r=e,this.a=this.b=null}function Qn(t,e,n,r){var i=new Yn(t,e);return Ws.push(i),n&&tr(i,t,e,n),r&&tr(i,e,t,r),Xs[t.i].edges.push(new er(i,t,e)),Xs[e.i].edges.push(new er(i,e,t)),i}function Kn(t,e,n){var r=new Yn(t,null);return r.a=e,r.b=n,Ws.push(r),r}function tr(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function er(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function nr(){this._=null}function rr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ir(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function or(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ar(t){for(;t.L;)t=t.L;return t}function sr(t,e){var n=t.sort(lr).pop(),r,i,o;for(Ws=[],Xs=new Array(t.length),Zs=new nr,Ks=new nr;;)if(o=Qs,n&&(!o||n.y<o.y||n.y===o.y&&n.x<o.x))(n.x!==r||n.y!==i)&&(Xs[n.i]=new Hn(n),zn(n),r=n.x,i=n.y),n=t.pop();else{if(!o)break;Fn(o.arc)}e&&(Xn(e),Bn(e));var a={cells:Xs,edges:Ws};return Zs=Ks=Ws=Xs=null,a}function lr(t,e){return e.y-t.y||e.x-t.x}function ur(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function cr(t){return t.x}function hr(t){return t.y}function fr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function dr(t,e,n,r,i,o){if(!t(e,n,r,i,o)){var a=.5*(n+i),s=.5*(r+o),l=e.nodes;l[0]&&dr(t,l[0],n,r,a,s),l[1]&&dr(t,l[1],a,r,i,s),l[2]&&dr(t,l[2],n,s,a,o),l[3]&&dr(t,l[3],a,s,i,o)}}function pr(t,e){t=Zo.rgb(t),e=Zo.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,a=e.g-r,s=e.b-i;return function(t){return"#"+wt(Math.round(n+o*t))+wt(Math.round(r+a*t))+wt(Math.round(i+s*t))}}function gr(t,e){var n={},r={},i;for(i in t)i in e?n[i]=yr(t[i],e[i]):r[i]=t[i];for(i in e)i in t||(r[i]=e[i]);return function(t){for(i in n)r[i]=n[i](t);return r}}function mr(t,e){return e-=t=+t,function(n){return t+e*n}}function vr(t,e){var n=nl.lastIndex=rl.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(t+="",e+="";(r=nl.exec(t))&&(i=rl.exec(e));)(o=i.index)>n&&(o=e.substring(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:mr(r,i)})),n=rl.lastIndex;return n<e.length&&(o=e.substring(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n=0,r;e>n;++n)s[(r=l[n]).i]=r.x(t);return s.join("")})}function yr(t,e){for(var n=Zo.interpolators.length,r;--n>=0&&!(r=Zo.interpolators[n](t,e)););return r}function xr(t,e){var n=[],r=[],i=t.length,o=e.length,a=Math.min(t.length,e.length),s;for(s=0;a>s;++s)n.push(yr(t[s],e[s]));for(;i>s;++s)r[s]=t[s];for(;o>s;++s)r[s]=e[s];return function(t){for(s=0;a>s;++s)r[s]=n[s](t);return r}}function br(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function wr(t){return function(e){return 1-t(1-e)}}function Cr(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Mr(t){return t*t}function Sr(t){return t*t*t}function _r(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function kr(t){return function(e){return Math.pow(e,t)}}function Tr(t){return 1-Math.cos(t*Aa)}function Nr(t){return Math.pow(2,10*(t-1))}function Ar(t){return 1-Math.sqrt(1-t*t)}function Er(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Na*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Na/e)}}function Rr(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Lr(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Ir(t,e){t=Zo.hcl(t),e=Zo.hcl(e);var n=t.h,r=t.c,i=t.l,o=e.h-n,a=e.c-r,s=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.c:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return ut(n+o*t,r+a*t,i+s*t)+""}}function Pr(t,e){t=Zo.hsl(t),e=Zo.hsl(e);var n=t.h,r=t.s,i=t.l,o=e.h-n,a=e.s-r,s=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.s:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return at(n+o*t,r+a*t,i+s*t)+""}}function Or(t,e){t=Zo.lab(t),e=Zo.lab(e);var n=t.l,r=t.a,i=t.b,o=e.l-n,a=e.a-r,s=e.b-i;return function(t){return ft(n+o*t,r+a*t,i+s*t)+""}}function $r(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Dr(t){var e=[t.a,t.b],n=[t.c,t.d],r=Fr(e),i=jr(e,n),o=Fr(zr(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Ia,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Ia:0}function jr(t,e){return t[0]*e[0]+t[1]*e[1]}function Fr(t){var e=Math.sqrt(jr(t,t));return e&&(t[0]/=e,t[1]/=e),e}function zr(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function qr(t,e){var n=[],r=[],i,o=Zo.transform(t),a=Zo.transform(e),s=o.translate,l=a.translate,u=o.rotate,c=a.rotate,h=o.skew,f=a.skew,d=o.scale,p=a.scale;return s[0]!=l[0]||s[1]!=l[1]?(n.push("translate(",null,",",null,")"),r.push({i:1,x:mr(s[0],l[0])},{i:3,x:mr(s[1],l[1])})):l[0]||l[1]?n.push("translate("+l+")"):n.push(""),u!=c?(u-c>180?c+=360:c-u>180&&(u+=360),r.push({i:n.push(n.pop()+"rotate(",null,")")-2,x:mr(u,c)})):c&&n.push(n.pop()+"rotate("+c+")"),h!=f?r.push({i:n.push(n.pop()+"skewX(",null,")")-2,x:mr(h,f)}):f&&n.push(n.pop()+"skewX("+f+")"),d[0]!=p[0]||d[1]!=p[1]?(i=n.push(n.pop()+"scale(",null,",",null,")"),r.push({i:i-4,x:mr(d[0],p[0])},{i:i-2,x:mr(d[1],p[1])})):(1!=p[0]||1!=p[1])&&n.push(n.pop()+"scale("+p+")"),i=r.length,function(t){for(var e=-1,o;++e<i;)n[(o=r[e]).i]=o.x(t);return n.join("")}}function Ur(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return(n-t)*e}}function Hr(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return Math.max(0,Math.min(1,(n-t)*e))}}function Br(t){for(var e=t.source,n=t.target,r=Jr(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Vr(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Jr(t,e){if(t===e)return t;for(var n=Vr(t),r=Vr(e),i=n.pop(),o=r.pop(),a=null;i===o;)a=i,i=n.pop(),o=r.pop();return a}function Gr(t){t.fixed|=2}function Wr(t){t.fixed&=-7}function Xr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Zr(t){t.fixed&=-5}function Yr(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o=t.nodes,a=o.length,s=-1,l;++s<a;)l=o[s],null!=l&&(Yr(l,e,n),t.charge+=l.charge,r+=l.charge*l.cx,i+=l.charge*l.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,r+=u*t.point.x,i+=u*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function Qr(t,e){return Zo.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=ii,t}function Kr(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function ti(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(a=t.children)&&(o=a.length))for(var i=-1,o,a;++i<o;)n.push(a[i]);for(;null!=(t=r.pop());)e(t)}function ei(t){return t.children}function ni(t){return t.value}function ri(t,e){return e.value-t.value}function ii(t){return Zo.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function oi(t){return t.x}function ai(t){return t.y}function si(t,e,n){t.y0=e,t.y=n}function li(t){return Zo.range(t.length);
}function ui(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function ci(t){for(var e=1,n=0,r=t[0][1],i,o=t.length;o>e;++e)(i=t[e][1])>r&&(n=e,r=i);return n}function hi(t){return t.reduce(fi,0)}function fi(t,e){return t+e[1]}function di(t,e){return pi(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function pi(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function gi(t){return[Zo.min(t),Zo.max(t)]}function mi(t,e){return t.value-e.value}function vi(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function yi(t,e){t._pack_next=e,e._pack_prev=t}function xi(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function bi(t){function e(t){r=Math.min(t.x-t.r,r),i=Math.max(t.x+t.r,i),o=Math.min(t.y-t.r,o),a=Math.max(t.y+t.r,a)}if((n=t.children)&&(d=n.length)){var n,r=1/0,i=-(1/0),o=1/0,a=-(1/0),s,l,u,c,h,f,d;if(n.forEach(wi),s=n[0],s.x=-s.r,s.y=0,e(s),d>1&&(l=n[1],l.x=l.r,l.y=0,e(l),d>2))for(u=n[2],Si(s,l,u),e(u),vi(s,u),s._pack_prev=u,vi(u,l),l=s._pack_next,c=3;d>c;c++){Si(s,l,u=n[c]);var p=0,g=1,m=1;for(h=l._pack_next;h!==l;h=h._pack_next,g++)if(xi(h,u)){p=1;break}if(1==p)for(f=s._pack_prev;f!==h._pack_prev&&!xi(f,u);f=f._pack_prev,m++);p?(m>g||g==m&&l.r<s.r?yi(s,l=h):yi(s=f,l),c--):(vi(s,u),l=u,e(u))}var v=(r+i)/2,y=(o+a)/2,x=0;for(c=0;d>c;c++)u=n[c],u.x-=v,u.y-=y,x=Math.max(x,u.r+Math.sqrt(u.x*u.x+u.y*u.y));t.r=x,n.forEach(Ci)}}function wi(t){t._pack_next=t._pack_prev=t}function Ci(t){delete t._pack_next,delete t._pack_prev}function Mi(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var o=-1,a=i.length;++o<a;)Mi(i[o],e,n,r)}function Si(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var a=e.r+n.r,s=i*i+o*o;a*=a,r*=r;var l=.5+(r-a)/(2*s),u=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=t.x+l*i+u*o,n.y=t.y+l*o-u*i}else n.x=t.x+r,n.y=t.y}function _i(t,e){return t.parent==e.parent?1:2}function ki(t){var e=t.children;return e.length?e[0]:t.t}function Ti(t){var e=t.children,n;return(n=e.length)?e[n-1]:t.t}function Ni(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Ai(t){for(var e=0,n=0,r=t.children,i=r.length,o;--i>=0;)o=r[i],o.z+=e,o.m+=e,e+=o.s+(n+=o.c)}function Ei(t,e,n){return t.a.parent===e.parent?t.a:n}function Ri(t){return 1+Zo.max(t,function(t){return t.y})}function Li(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Ii(t){var e=t.children;return e&&e.length?Ii(e[0]):t}function Pi(t){var e=t.children,n;return e&&(n=e.length)?Pi(e[n-1]):t}function Oi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function $i(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>i&&(n+=i/2,i=0),0>o&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function Di(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function ji(t){return t.rangeExtent?t.rangeExtent():Di(t.range())}function Fi(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function zi(t,e){var n=0,r=t.length-1,i=t[n],o=t[r],a;return i>o&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function qi(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:pl}function Ui(t,e,n,r){var i=[],o=[],a=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=s;)i.push(n(t[a-1],t[a])),o.push(r(e[a-1],e[a]));return function(e){var n=Zo.bisect(t,e,1,s)-1;return o[n](i[n](e))}}function Hi(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?Ui:Fi,l=r?Hr:Ur;return a=i(t,e,l,n),s=i(e,t,l,yr),o}function o(t){return a(t)}var a,s;return o.invert=function(t){return s(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},o.range=function(t){return arguments.length?(e=t,i()):e},o.rangeRound=function(t){return o.range(t).interpolate($r)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(n=t,i()):n},o.ticks=function(e){return Gi(t,e)},o.tickFormat=function(e,n){return Wi(t,e,n)},o.nice=function(e){return Vi(t,e),i()},o.copy=function(){return Hi(t,e,n,r)},i()}function Bi(t,e){return Zo.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Vi(t,e){return zi(t,qi(Ji(t,e)[2]))}function Ji(t,e){null==e&&(e=10);var n=Di(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Gi(t,e){return Zo.range.apply(Zo,Ji(t,e))}function Wi(t,e,n){var r=Ji(t,e);if(n){var i=ns.exec(n);if(i.shift(),"s"===i[8]){var o=Zo.formatPrefix(Math.max(ca(r[0]),ca(r[1])));return i[7]||(i[7]="."+Xi(o.scale(r[2]))),i[8]="f",n=Zo.format(i.join("")),function(t){return n(o.scale(t))+o.symbol}}i[7]||(i[7]="."+Zi(i[8],r)),n=i.join("")}else n=",."+Xi(r[2])+"f";return Zo.format(n)}function Xi(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Zi(t,e){var n=Xi(e[2]);return t in gl?Math.abs(n-Xi(Math.max(ca(e[0]),ca(e[1]))))+ +("e"!==t):n-2*("%"===t)}function Yi(t,e,n,r){function i(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(i(e))}return a.invert=function(e){return o(t.invert(e))},a.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(i)),a):r},a.base=function(n){return arguments.length?(e=+n,t.domain(r.map(i)),a):e},a.nice=function(){var e=zi(r.map(i),n?Math:vl);return t.domain(e),r=e.map(o),a},a.ticks=function(){var t=Di(r),a=[],s=t[0],l=t[1],u=Math.floor(i(s)),c=Math.ceil(i(l)),h=e%1?2:e;if(isFinite(c-u)){if(n){for(;c>u;u++)for(var f=1;h>f;f++)a.push(o(u)*f);a.push(o(u))}else for(a.push(o(u));u++<c;)for(var f=h-1;f>0;f--)a.push(o(u)*f);for(u=0;a[u]<s;u++);for(c=a.length;a[c-1]>l;c--);a=a.slice(u,c)}return a},a.tickFormat=function(t,e){if(!arguments.length)return ml;arguments.length<2?e=ml:"function"!=typeof e&&(e=Zo.format(e));var r=Math.max(.1,t/a.ticks().length),s=n?(l=1e-12,Math.ceil):(l=-1e-12,Math.floor),l;return function(t){return t/o(s(i(t)+l))<=r?e(t):""}},a.copy=function(){return Yi(t.copy(),e,n,r)},Bi(a,t)}function Qi(t,e,n){function r(e){return t(i(e))}var i=Ki(e),o=Ki(1/e);return r.invert=function(e){return o(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(i)),r):n},r.ticks=function(t){return Gi(n,t)},r.tickFormat=function(t,e){return Wi(n,t,e)},r.nice=function(t){return r.domain(Vi(n,t))},r.exponent=function(a){return arguments.length?(i=Ki(e=a),o=Ki(1/e),t.domain(n.map(i)),r):e},r.copy=function(){return Qi(t.copy(),e,n)},Bi(r,t)}function Ki(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function to(t,e){function n(n){return o[((i.get(n)||("range"===e.t?i.set(n,t.push(n)):NaN))-1)%o.length]}function r(e,n){return Zo.range(t.length).map(function(t){return e+n*t})}var i,o,s;return n.domain=function(r){if(!arguments.length)return t;t=[],i=new a;for(var o=-1,s=r.length,l;++o<s;)i.has(l=r[o])||i.set(l,t.push(l));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,s=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(i,a){arguments.length<2&&(a=0);var l=i[0],u=i[1],c=(u-l)/(Math.max(1,t.length-1)+a);return o=r(t.length<2?(l+u)/2:l+c*a/2,c),s=0,e={t:"rangePoints",a:arguments},n},n.rangeBands=function(i,a,l){arguments.length<2&&(a=0),arguments.length<3&&(l=a);var u=i[1]<i[0],c=i[u-0],h=i[1-u],f=(h-c)/(t.length-a+2*l);return o=r(c+f*l,f),u&&o.reverse(),s=f*(1-a),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,a,l){arguments.length<2&&(a=0),arguments.length<3&&(l=a);var u=i[1]<i[0],c=i[u-0],h=i[1-u],f=Math.floor((h-c)/(t.length-a+2*l)),d=h-c-(t.length-a)*f;return o=r(c+Math.round(d/2),f),u&&o.reverse(),s=Math.round(f*(1-a)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return s},n.rangeExtent=function(){return Di(e.a[0])},n.copy=function(){return to(t,e)},n.domain(t)}function eo(n,r){function i(){var t=0,e=r.length;for(a=[];++t<e;)a[t-1]=Zo.quantile(n,t/e);return o}function o(t){return isNaN(t=+t)?void 0:r[Zo.bisect(a,t)]}var a;return o.domain=function(r){return arguments.length?(n=r.filter(e).sort(t),i()):n},o.range=function(t){return arguments.length?(r=t,i()):r},o.quantiles=function(){return a},o.invertExtent=function(t){return t=r.indexOf(t),0>t?[NaN,NaN]:[t>0?a[t-1]:n[0],t<a.length?a[t]:n[n.length-1]]},o.copy=function(){return eo(n,r)},i()}function no(t,e,n){function r(e){return n[Math.max(0,Math.min(a,Math.floor(o*(e-t))))]}function i(){return o=n.length/(e-t),a=n.length-1,r}var o,a;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t,i()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=0>e?NaN:e/o+t,[e,e+1/o]},r.copy=function(){return no(t,e,n)},i()}function ro(t,e){function n(n){return n>=n?e[Zo.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return ro(t,e)},n}function io(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Gi(t,e)},e.tickFormat=function(e,n){return Wi(t,e,n)},e.copy=function(){return io(t)},e}function oo(t){return t.innerRadius}function ao(t){return t.outerRadius}function so(t){return t.startAngle}function lo(t){return t.endAngle}function uo(t){function e(e){function a(){l.push("M",o(t(u),s))}for(var l=[],u=[],c=-1,h=e.length,f,d=Tt(n),p=Tt(r);++c<h;)i.call(this,f=e[c],c)?u.push([+d.call(this,f,c),+p.call(this,f,c)]):u.length&&(a(),u=[]);return u.length&&a(),l.length?l.join(""):null}var n=An,r=En,i=Ne,o=co,a=o.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=Sl.get(t)||co).key,e):a},e.tension=function(t){return arguments.length?(s=t,e):s},e}function co(t){return t.join("L")}function ho(t){return co(t)+"Z"}function fo(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function po(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function go(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function mo(t,e){return t.length<4?co(t):t[1]+xo(t.slice(1,t.length-1),bo(t,e))}function vo(t,e){return t.length<3?co(t):t[0]+xo((t.push(t[0]),t),bo([t[t.length-2]].concat(t,[t[1]]),e))}function yo(t,e){return t.length<3?co(t):t[0]+xo(t,bo(t,e))}function xo(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return co(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],a=e[0],s=a,l=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],l=2),e.length>1){s=e[1],o=t[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var u=2;u<e.length;u++,l++)o=t[l],s=e[u],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=t[l];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function bo(t,e){for(var n=[],r=(1-e)/2,i,o=t[0],a=t[1],s=1,l=t.length;++s<l;)i=o,o=a,a=t[s],n.push([r*(a[0]-i[0]),r*(a[1]-i[1])]);return n}function wo(t){if(t.length<3)return co(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],s=[o,o,o,r[1]],l=[i,",",o,"L",_o(Tl,a),",",_o(Tl,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),ko(l,a,s);return t.pop(),l.push("L",r),l.join("")}function Co(t){if(t.length<4)return co(t);for(var e=[],n=-1,r=t.length,i,o=[0],a=[0];++n<3;)i=t[n],o.push(i[0]),a.push(i[1]);for(e.push(_o(Tl,o)+","+_o(Tl,a)),--n;++n<r;)i=t[n],o.shift(),o.push(i[0]),a.shift(),a.push(i[1]),ko(e,o,a);return e.join("")}function Mo(t){for(var e,n=-1,r=t.length,i=r+4,o,a=[],s=[];++n<4;)o=t[n%r],a.push(o[0]),s.push(o[1]);for(e=[_o(Tl,a),",",_o(Tl,s)],--n;++n<i;)o=t[n%r],a.shift(),a.push(o[0]),s.shift(),s.push(o[1]),ko(e,a,s);return e.join("")}function So(t,e){var n=t.length-1;if(n)for(var r=t[0][0],i=t[0][1],o=t[n][0]-r,a=t[n][1]-i,s=-1,l,u;++s<=n;)l=t[s],u=s/n,l[0]=e*l[0]+(1-e)*(r+u*o),l[1]=e*l[1]+(1-e)*(i+u*a);return wo(t)}function _o(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function ko(t,e,n){t.push("C",_o(_l,e),",",_o(_l,n),",",_o(kl,e),",",_o(kl,n),",",_o(Tl,e),",",_o(Tl,n))}function To(t,e){return(e[1]-t[1])/(e[0]-t[0])}function No(t){for(var e=0,n=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=To(i,o);++e<n;)r[e]=(a+(a=To(i=o,o=t[e+1])))/2;return r[e]=a,r}function Ao(t){for(var e=[],n,r,i,o,a=No(t),s=-1,l=t.length-1;++s<l;)n=To(t[s],t[s+1]),ca(n)<Ea?a[s]=a[s+1]=0:(r=a[s]/n,i=a[s+1]/n,o=r*r+i*i,o>9&&(o=3*n/Math.sqrt(o),a[s]=o*r,a[s+1]=o*i));for(s=-1;++s<=l;)o=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),e.push([o||0,a[s]*o||0]);return e}function Eo(t){return t.length<3?co(t):t[0]+xo(t,Ao(t))}function Ro(t){for(var e,n=-1,r=t.length,i,o;++n<r;)e=t[n],i=e[0],o=e[1]+Cl,e[0]=i*Math.cos(o),e[1]=i*Math.sin(o);return t}function Lo(t){function e(e){function l(){f.push("M",s(t(p),h),c,u(t(d.reverse()),h),"Z")}for(var f=[],d=[],p=[],g=-1,m=e.length,v,y=Tt(n),x=Tt(i),b=n===r?function(){return C}:Tt(r),w=i===o?function(){return M}:Tt(o),C,M;++g<m;)a.call(this,v=e[g],g)?(d.push([C=+y.call(this,v,g),M=+x.call(this,v,g)]),p.push([+b.call(this,v,g),+w.call(this,v,g)])):d.length&&(l(),d=[],p=[]);return d.length&&l(),f.length?f.join(""):null}var n=An,r=An,i=0,o=En,a=Ne,s=co,l=s.key,u=s,c="L",h=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=o=t,e):o},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=Sl.get(t)||co).key,u=s.reverse||s,c=s.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(h=t,e):h},e}function Io(t){return t.radius}function Po(t){return[t.x,t.y]}function Oo(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]+Cl;return[n*Math.cos(r),n*Math.sin(r)]}}function $o(){return 64}function Do(){return"circle"}function jo(t){var e=Math.sqrt(t/Ta);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Fo(t,e){return ga(t,Rl),t.id=e,t}function zo(t,e,n,r){var i=t.id;return D(t,"function"==typeof n?function(t,o,a){t.__transition__[i].tween.set(e,r(n.call(t,t.__data__,o,a)))}:(n=r(n),function(t){t.__transition__[i].tween.set(e,n)}))}function qo(t){return null==t&&(t=""),function(){this.textContent=t}}function Uo(t,e,n,r){var i=t.__transition__||(t.__transition__={active:0,count:0}),o=i[n];if(!o){var s=r.time;o=i[n]={tween:new a,time:s,ease:r.ease,delay:r.delay,duration:r.duration},++i.count,Zo.timer(function(r){function a(r){return i.active>n?u():(i.active=n,o.event&&o.event.start.call(t,c,e),o.tween.forEach(function(n,r){(r=r.call(t,c,e))&&g.push(r)}),void Zo.timer(function(){return p.c=l(r||1)?Ne:l,1},0,s))}function l(r){if(i.active!==n)return u();for(var a=r/d,s=h(a),l=g.length;l>0;)g[--l].call(t,s);return a>=1?(o.event&&o.event.end.call(t,c,e),u()):void 0}function u(){return--i.count?delete i[n]:delete t.__transition__,1}var c=t.__data__,h=o.ease,f=o.delay,d=o.duration,p=Ka,g=[];return p.t=f+s,r>=f?a(r-f):void(p.c=a)},0,s)}}function Ho(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function Bo(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function Vo(t){return t.toISOString()}function Jo(t,e,n){function r(e){return t(e)}function i(t,n){var r=t[1]-t[0],i=r/n,o=Zo.bisect(Ul,i);return o==Ul.length?[e.year,Ji(t.map(function(t){return t/31536e6}),n)[2]]:o?e[i/Ul[o-1]<Ul[o]/i?o-1:o]:[Vl,Ji(t,n)[2]]}return r.invert=function(e){return Go(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(Go)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,Go(+n+1),e).length}var o=r.domain(),a=Di(o),s=null==t?i(a,10):"number"==typeof t&&i(a,t);return s&&(t=s[0],e=s[1]),r.domain(zi(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=Go(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=Go(+e+1);return e}}:t))},r.ticks=function(t,e){var n=Di(r.domain()),o=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],Go(+n[1]+1),1>e?1:e)},r.tickFormat=function(){return n},r.copy=function(){return Jo(t.copy(),e,n)},Bi(r,t)}function Go(t){return new Date(t)}function Wo(t){return JSON.parse(t.responseText)}function Xo(t){var e=Ko.createRange();return e.selectNode(Ko.body),e.createContextualFragment(t.responseText)}var Zo={version:"3.4.8"};Date.now||(Date.now=function(){return+new Date});var Yo=[].slice,Qo=function(t){return Yo.call(t)},Ko=document,ta=Ko.documentElement,ea=window;try{Qo(ta.childNodes)[0].nodeType}catch(na){Qo=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}try{Ko.createElement("div").style.setProperty("opacity",0,"")}catch(ra){var ia=ea.Element.prototype,oa=ia.setAttribute,aa=ia.setAttributeNS,sa=ea.CSSStyleDeclaration.prototype,la=sa.setProperty;ia.setAttribute=function(t,e){oa.call(this,t,e+"")},ia.setAttributeNS=function(t,e,n){aa.call(this,t,e,n+"")},sa.setProperty=function(t,e,n){la.call(this,t,e+"",n)}}Zo.ascending=t,Zo.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},Zo.min=function(t,e){var n=-1,r=t.length,i,o;if(1===arguments.length){for(;++n<r&&!(null!=(i=t[n])&&i>=i);)i=void 0;for(;++n<r;)null!=(o=t[n])&&i>o&&(i=o)}else{for(;++n<r&&!(null!=(i=e.call(t,t[n],n))&&i>=i);)i=void 0;for(;++n<r;)null!=(o=e.call(t,t[n],n))&&i>o&&(i=o)}return i},Zo.max=function(t,e){var n=-1,r=t.length,i,o;if(1===arguments.length){for(;++n<r&&!(null!=(i=t[n])&&i>=i);)i=void 0;for(;++n<r;)null!=(o=t[n])&&o>i&&(i=o)}else{for(;++n<r&&!(null!=(i=e.call(t,t[n],n))&&i>=i);)i=void 0;for(;++n<r;)null!=(o=e.call(t,t[n],n))&&o>i&&(i=o)}return i},Zo.extent=function(t,e){var n=-1,r=t.length,i,o,a;if(1===arguments.length){for(;++n<r&&!(null!=(i=a=t[n])&&i>=i);)i=a=void 0;for(;++n<r;)null!=(o=t[n])&&(i>o&&(i=o),o>a&&(a=o))}else{for(;++n<r&&!(null!=(i=a=e.call(t,t[n],n))&&i>=i);)i=void 0;for(;++n<r;)null!=(o=e.call(t,t[n],n))&&(i>o&&(i=o),o>a&&(a=o))}return[i,a]},Zo.sum=function(t,e){var n=0,r=t.length,i,o=-1;if(1===arguments.length)for(;++o<r;)isNaN(i=+t[o])||(n+=i);else for(;++o<r;)isNaN(i=+e.call(t,t[o],o))||(n+=i);return n},Zo.mean=function(t,n){var r=0,i=t.length,o,a=-1,s=i;if(1===arguments.length)for(;++a<i;)e(o=t[a])?r+=o:--s;else for(;++a<i;)e(o=n.call(t,t[a],a))?r+=o:--s;return s?r/s:void 0},Zo.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},Zo.median=function(n,r){return arguments.length>1&&(n=n.map(r)),n=n.filter(e),n.length?Zo.quantile(n.sort(t),.5):void 0};var ua=n(t);Zo.bisectLeft=ua.left,Zo.bisect=Zo.bisectRight=ua.right,Zo.bisector=function(e){return n(1===e.length?function(n,r){return t(e(n),r)}:e)},Zo.shuffle=function(t){for(var e=t.length,n,r;e;)r=Math.random()*e--|0,n=t[e],t[e]=t[r],t[r]=n;return t},Zo.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},Zo.pairs=function(t){for(var e=0,n=t.length-1,r,i=t[0],o=new Array(0>n?0:n);n>e;)o[e]=[r=i,i=t[++e]];return o},Zo.zip=function(){if(!(o=arguments.length))return[];for(var t=-1,e=Zo.min(arguments,r),n=new Array(e);++t<e;)for(var i=-1,o,a=n[t]=new Array(o);++i<o;)a[i]=arguments[i][t];return n},Zo.transpose=function(t){return Zo.zip.apply(Zo,t)},Zo.keys=function(t){var e=[];for(var n in t)e.push(n);return e},Zo.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},Zo.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},Zo.merge=function(t){for(var e=t.length,n,r=-1,i=0,o,a;++r<e;)i+=t[r].length;for(o=new Array(i);--e>=0;)for(a=t[e],n=a.length;--n>=0;)o[--i]=a[n];return o};var ca=Math.abs;Zo.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r=[],o=i(ca(n)),a=-1,s;if(t*=o,e*=o,n*=o,0>n)for(;(s=t+n*++a)>e;)r.push(s/o);else for(;(s=t+n*++a)<e;)r.push(s/o);return r},Zo.map=function(t){var e=new a;if(t instanceof a)t.forEach(function(t,n){e.set(t,n)});else for(var n in t)e.set(n,t[n]);return e},o(a,{has:s,get:function(t){return this[ha+t]},set:function(t,e){return this[ha+t]=e},remove:l,keys:u,values:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},entries:function(){var t=[];return this.forEach(function(e,n){t.push({key:e,value:n})}),t},size:c,empty:h,forEach:function(t){for(var e in this)e.charCodeAt(0)===fa&&t.call(this,e.substring(1),this[e])}});var ha="\x00",fa=ha.charCodeAt(0);Zo.nest=function(){function t(e,i,l){if(l>=r.length)return s?s.call(n,i):o?i.sort(o):i;for(var u=-1,c=i.length,h=r[l++],f,d,p,g=new a,m;++u<c;)(m=g.get(f=h(d=i[u])))?m.push(d):g.set(f,[d]);return e?(d=e(),p=function(n,r){d.set(n,t(e,r,l))}):(d={},p=function(n,r){d[n]=t(e,r,l)}),g.forEach(p),d}function e(t,n){if(n>=r.length)return t;var o=[],a=i[n++];return t.forEach(function(t,r){o.push({key:t,values:e(r,n)})}),a?o.sort(function(t,e){return a(t.key,e.key)}):o}var n={},r=[],i=[],o,s;return n.map=function(e,n){return t(n,e,0)},n.entries=function(n){return e(t(Zo.map,n,0),0)},n.key=function(t){return r.push(t),n},n.sortKeys=function(t){return i[r.length-1]=t,n},n.sortValues=function(t){return o=t,n},n.rollup=function(t){return s=t,n},n},Zo.set=function(t){var e=new f;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);return e},o(f,{has:s,add:function(t){return this[ha+t]=!0,t},remove:function(t){return t=ha+t,t in this&&delete this[t]},values:u,size:c,empty:h,forEach:function(t){for(var e in this)e.charCodeAt(0)===fa&&t.call(this,e.substring(1))}}),Zo.behavior={},Zo.rebind=function(t,e){for(var n=1,r=arguments.length,i;++n<r;)t[i=arguments[n]]=d(t,e,e[i]);return t};var da=["webkit","ms","moz","Moz","o","O"];Zo.dispatch=function(){for(var t=new m,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=v(t);return t},m.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.substring(n+1),t=t.substring(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},Zo.event=null,Zo.requote=function(t){return t.replace(pa,"\\$&")};var pa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ga={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},ma=function(t,e){return e.querySelector(t)},va=function(t,e){return e.querySelectorAll(t)},ya=ta[p(ta,"matchesSelector")],xa=function(t,e){return ya.call(t,e)};"function"==typeof Sizzle&&(ma=function(t,e){return Sizzle(t,e)[0]||null},va=Sizzle,xa=Sizzle.matchesSelector),Zo.selection=function(){return Ma};var ba=Zo.selection.prototype=[];ba.select=function(t){var e=[],n,r,i,o;t=C(t);for(var a=-1,s=this.length;++a<s;){e.push(n=[]),n.parentNode=(i=this[a]).parentNode;for(var l=-1,u=i.length;++l<u;)(o=i[l])?(n.push(r=t.call(o,o.__data__,l,a)),r&&"__data__"in o&&(r.__data__=o.__data__)):n.push(null)}return w(e)},ba.selectAll=function(t){var e=[],n,r;t=M(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,l=a.length;++s<l;)(r=a[s])&&(e.push(n=Qo(t.call(r,r.__data__,s,i))),n.parentNode=r);return w(e)};var wa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Zo.ns={prefix:wa,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.substring(0,e),t=t.substring(e+1)),wa.hasOwnProperty(n)?{space:wa[n],local:t}:t}},ba.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=Zo.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(S(e,t[e]));return this}return this.each(S(t,e))},ba.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=T(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!k(t[i]).test(e))return!1;return!0}for(e in t)this.each(N(e,t[e]));return this}return this.each(N(t,e))},ba.style=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e="");for(n in t)this.each(E(n,t[n],e));return this}if(2>r)return ea.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(E(t,e,n))},ba.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(R(e,t[e]));return this}return this.each(R(t,e))},ba.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},ba.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},ba.append=function(t){return t=L(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},ba.insert=function(t,e){return t=L(t),e=C(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},ba.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},ba.data=function(t,e){function n(t,n){var r,i=t.length,o=n.length,s=Math.min(i,o),h=new Array(o),f=new Array(o),d=new Array(i),p,g;if(e){var m=new a,v=new a,y=[],x;for(r=-1;++r<i;)x=e.call(p=t[r],p.__data__,r),m.has(x)?d[r]=p:m.set(x,p),y.push(x);for(r=-1;++r<o;)x=e.call(n,g=n[r],r),(p=m.get(x))?(h[r]=p,p.__data__=g):v.has(x)||(f[r]=I(g)),v.set(x,g),m.remove(x);for(r=-1;++r<i;)m.has(y[r])&&(d[r]=t[r])}else{for(r=-1;++r<s;)p=t[r],g=n[r],p?(p.__data__=g,h[r]=p):f[r]=I(g);for(;o>r;++r)f[r]=I(n[r]);for(;i>r;++r)d[r]=t[r]}f.update=h,f.parentNode=h.parentNode=d.parentNode=t.parentNode,l.push(f),u.push(h),c.push(d)}var r=-1,i=this.length,o,s;if(!arguments.length){for(t=new Array(i=(o=this[0]).length);++r<i;)(s=o[r])&&(t[r]=s.__data__);return t}var l=j([]),u=w([]),c=w([]);if("function"==typeof t)for(;++r<i;)n(o=this[r],t.call(o,o.parentNode.__data__,r));else for(;++r<i;)n(o=this[r],t);return u.enter=function(){return l},u.exit=function(){return c},u},ba.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},ba.filter=function(t){var e=[],n,r,i;"function"!=typeof t&&(t=P(t));for(var o=0,a=this.length;a>o;o++){e.push(n=[]),n.parentNode=(r=this[o]).parentNode;for(var s=0,l=r.length;l>s;s++)(i=r[s])&&t.call(i,i.__data__,s,o)&&n.push(i)}return w(e)},ba.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n=this[t],r=n.length-1,i=n[r],o;--r>=0;)(o=n[r])&&(i&&i!==o.nextSibling&&i.parentNode.insertBefore(o,i),i=o);return this},ba.sort=function(t){t=O.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},ba.each=function(t){return D(this,function(e,n,r){t.call(e,e.__data__,n,r)})},ba.call=function(t){var e=Qo(arguments);return t.apply(e[0]=this,e),this},ba.empty=function(){return!this.node()},ba.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,i=n.length;i>r;r++){var o=n[r];if(o)return o}return null},ba.size=function(){var t=0;return this.each(function(){++t}),t};var Ca=[];Zo.selection.enter=j,Zo.selection.enter.prototype=Ca,Ca.append=ba.append,Ca.empty=ba.empty,Ca.node=ba.node,Ca.call=ba.call,Ca.size=ba.size,Ca.select=function(t){for(var e=[],n,r,i,o,a,s=-1,l=this.length;++s<l;){i=(o=this[s]).update,e.push(n=[]),n.parentNode=o.parentNode;for(var u=-1,c=o.length;++u<c;)(a=o[u])?(n.push(i[u]=r=t.call(o.parentNode,a.__data__,u,s)),r.__data__=a.__data__):n.push(null)}return w(e)},Ca.insert=function(t,e){return arguments.length<2&&(e=F(this)),ba.insert.call(this,t,e)},ba.transition=function(){for(var t=Il||++Ll,e=[],n,r,i=Pl||{time:Date.now(),ease:_r,delay:0,duration:250},o=-1,a=this.length;++o<a;){e.push(n=[]);for(var s=this[o],l=-1,u=s.length;++l<u;)(r=s[l])&&Uo(r,l,t,i),n.push(r)}return Fo(e,t)},ba.interrupt=function(){return this.each(z)},Zo.select=function(t){var e=["string"==typeof t?ma(t,Ko):t];return e.parentNode=ta,w([e])},Zo.selectAll=function(t){var e=Qo("string"==typeof t?va(t,Ko):t);return e.parentNode=ta,w([e])};var Ma=Zo.select(ta);ba.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(q(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(q(t,e,n))};var Sa=Zo.map({mouseenter:"mouseover",mouseleave:"mouseout"});Sa.forEach(function(t){"on"+t in Ko&&Sa.remove(t)});var _a="onselectstart"in Ko?null:p(ta.style,"userSelect"),ka=0;Zo.mouse=function(t){return V(t,x())},Zo.touches=function(t,e){return arguments.length<2&&(e=x().touches),e?Qo(e).map(function(e){var n=V(t,e);return n.identifier=e.identifier,n}):[]},Zo.behavior.drag=function(){function t(){this.on("mousedown.drag",i).on("touchstart.drag",o)}function e(t,e,i,o,a){return function(){function s(){var t=e(h,p),n,r;t&&(n=t[0]-x[0],r=t[1]-x[1],d|=n|r,x=t,f({type:"drag",x:t[0]+m[0],y:t[1]+m[1],dx:n,dy:r}))}function l(){e(h,p)&&(v.on(o+g,null).on(a+g,null),y(d&&Zo.event.target===c),f({type:"dragend"}))}var u=this,c=Zo.event.target,h=u.parentNode,f=n.of(u,arguments),d=0,p=t(),g=".drag"+(null==p?"":"-"+p),m,v=Zo.select(i()).on(o+g,s).on(a+g,l),y=B(),x=e(h,p);r?(m=r.apply(u,arguments),m=[m.x-x[0],m.y-x[1]]):m=[0,0],f({type:"dragstart"})}}var n=b(t,"drag","dragstart","dragend"),r=null,i=e(g,Zo.mouse,W,"mousemove","mouseup"),o=e(J,Zo.touch,G,"touchmove","touchend");return t.origin=function(e){return arguments.length?(r=e,t):r},Zo.rebind(t,n,"on")};var Ta=Math.PI,Na=2*Ta,Aa=Ta/2,Ea=1e-6,Ra=Ea*Ea,La=Ta/180,Ia=180/Ta,Pa=Math.SQRT2,Oa=2,$a=4;Zo.interpolateZoom=function(t,e){function n(t){var e=t*y;if(v){var n=tt(g),a=o/(Oa*f)*(n*et(Pa*e+g)-K(g));return[r+a*u,i+a*c,o*n/tt(Pa*e+g)]}return[r+t*u,i+t*c,o*Math.exp(Pa*e)]}var r=t[0],i=t[1],o=t[2],a=e[0],s=e[1],l=e[2],u=a-r,c=s-i,h=u*u+c*c,f=Math.sqrt(h),d=(l*l-o*o+$a*h)/(2*o*Oa*f),p=(l*l-o*o-$a*h)/(2*l*Oa*f),g=Math.log(Math.sqrt(d*d+1)-d),m=Math.log(Math.sqrt(p*p+1)-p),v=m-g,y=(v||Math.log(l/o))/Pa;return n.duration=1e3*y,n},Zo.behavior.zoom=function(){function t(t){t.on(w,u).on(Fa+".zoom",h).on(C,f).on("dblclick.zoom",d).on(_,c)}function e(t){return[(t[0]-p.x)/p.k,(t[1]-p.y)/p.k]}function n(t){return[t[0]*p.k+p.x,t[1]*p.k+p.y]}function r(t){p.k=Math.max(x[0],Math.min(x[1],t))}function i(t,e){e=n(e),p.x+=t[0]-e[0],p.y+=t[1]-e[1]}function o(){A&&A.domain(N.range().map(function(t){return(t-p.x)/p.k}).map(N.invert)),R&&R.domain(E.range().map(function(t){return(t-p.y)/p.k}).map(E.invert))}function a(t){t({type:"zoomstart"})}function s(t){o(),t({type:"zoom",scale:p.k,translate:[p.x,p.y]})}function l(t){t({type:"zoomend"})}function u(){function t(){c=1,i(Zo.mouse(r),d),s(u)}function n(){h.on(C,ea===r?f:null).on(M,null),p(c&&Zo.event.target===o),l(u)}var r=this,o=Zo.event.target,u=T.of(r,arguments),c=0,h=Zo.select(ea).on(C,t).on(M,n),d=e(Zo.mouse(r)),p=B();z.call(r),a(u)}function c(){function t(){var t=Zo.touches(f);return v=p.k,t.forEach(function(t){t.identifier in g&&(g[t.identifier]=e(t))}),t}function n(){var e=Zo.event.target;Zo.select(e).on(b,o).on(C,h),M.push(e);for(var n=Zo.event.changedTouches,a=0,l=n.length;l>a;++a)g[n[a].identifier]=null;var u=t(),c=Date.now();if(1===u.length){if(500>c-k){var f=u[0],v=g[f.identifier];r(2*p.k),i(f,v),y(),s(d)}
k=c}else if(u.length>1){var f=u[0],x=u[1],w=f[0]-x[0],S=f[1]-x[1];m=w*w+S*S}}function o(){for(var t=Zo.touches(f),e,n,o,a,l=0,u=t.length;u>l;++l,a=null)if(o=t[l],a=g[o.identifier]){if(n)break;e=o,n=a}if(a){var c=(c=o[0]-e[0])*c+(c=o[1]-e[1])*c,h=m&&Math.sqrt(c/m);e=[(e[0]+o[0])/2,(e[1]+o[1])/2],n=[(n[0]+a[0])/2,(n[1]+a[1])/2],r(h*v)}k=null,i(e,n),s(d)}function h(){if(Zo.event.touches.length){for(var e=Zo.event.changedTouches,n=0,r=e.length;r>n;++n)delete g[e[n].identifier];for(var i in g)return void t()}Zo.selectAll(M).on(x,null),S.on(w,u).on(_,c),N(),l(d)}var f=this,d=T.of(f,arguments),g={},m=0,v,x=".zoom-"+Zo.event.changedTouches[0].identifier,b="touchmove"+x,C="touchend"+x,M=[],S=Zo.select(f).on(w,null).on(_,n),N=B();z.call(f),n(),a(d)}function h(){var t=T.of(this,arguments);S?clearTimeout(S):(z.call(this),a(t)),S=setTimeout(function(){S=null,l(t)},50),y();var n=m||Zo.mouse(this);g||(g=e(n)),r(Math.pow(2,.002*ja())*p.k),i(n,g),s(t)}function f(){g=null}function d(){var t=T.of(this,arguments),n=Zo.mouse(this),o=e(n),u=Math.log(p.k)/Math.LN2;a(t),r(Math.pow(2,Zo.event.shiftKey?Math.ceil(u)-1:Math.floor(u)+1)),i(n,o),s(t),l(t)}var p={x:0,y:0,k:1},g,m,v=[960,500],x=Da,w="mousedown.zoom",C="mousemove.zoom",M="mouseup.zoom",S,_="touchstart.zoom",k,T=b(t,"zoomstart","zoom","zoomend"),N,A,E,R;return t.event=function(t){t.each(function(){var t=T.of(this,arguments),e=p;Il?Zo.select(this).transition().each("start.zoom",function(){p=this.__chart__||{x:0,y:0,k:1},a(t)}).tween("zoom:zoom",function(){var n=v[0],r=v[1],i=n/2,o=r/2,a=Zo.interpolateZoom([(i-p.x)/p.k,(o-p.y)/p.k,n/p.k],[(i-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var r=a(e),l=n/r[2];this.__chart__=p={x:i-r[0]*l,y:o-r[1]*l,k:l},s(t)}}).each("end.zoom",function(){l(t)}):(this.__chart__=p,a(t),s(t),l(t))})},t.translate=function(e){return arguments.length?(p={x:+e[0],y:+e[1],k:p.k},o(),t):[p.x,p.y]},t.scale=function(e){return arguments.length?(p={x:p.x,y:p.y,k:+e},o(),t):p.k},t.scaleExtent=function(e){return arguments.length?(x=null==e?Da:[+e[0],+e[1]],t):x},t.center=function(e){return arguments.length?(m=e&&[+e[0],+e[1]],t):m},t.size=function(e){return arguments.length?(v=e&&[+e[0],+e[1]],t):v},t.x=function(e){return arguments.length?(A=e,N=e.copy(),p={x:0,y:0,k:1},t):A},t.y=function(e){return arguments.length?(R=e,E=e.copy(),p={x:0,y:0,k:1},t):R},Zo.rebind(t,T,"on")};var Da=[0,1/0],ja,Fa="onwheel"in Ko?(ja=function(){return-Zo.event.deltaY*(Zo.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Ko?(ja=function(){return Zo.event.wheelDelta},"mousewheel"):(ja=function(){return-Zo.event.detail},"MozMousePixelScroll");rt.prototype.toString=function(){return this.rgb()+""},Zo.hsl=function(t,e,n){return 1===arguments.length?t instanceof ot?it(t.h,t.s,t.l):Ct(""+t,Mt,it):it(+t,+e,+n)};var za=ot.prototype=new rt;za.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),it(this.h,this.s,this.l/t)},za.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),it(this.h,this.s,t*this.l)},za.rgb=function(){return at(this.h,this.s,this.l)},Zo.hcl=function(t,e,n){return 1===arguments.length?t instanceof lt?st(t.h,t.c,t.l):t instanceof ht?dt(t.l,t.a,t.b):dt((t=St((t=Zo.rgb(t)).r,t.g,t.b)).l,t.a,t.b):st(+t,+e,+n)};var qa=lt.prototype=new rt;qa.brighter=function(t){return st(this.h,this.c,Math.min(100,this.l+Ua*(arguments.length?t:1)))},qa.darker=function(t){return st(this.h,this.c,Math.max(0,this.l-Ua*(arguments.length?t:1)))},qa.rgb=function(){return ut(this.h,this.c,this.l).rgb()},Zo.lab=function(t,e,n){return 1===arguments.length?t instanceof ht?ct(t.l,t.a,t.b):t instanceof lt?ut(t.l,t.c,t.h):St((t=Zo.rgb(t)).r,t.g,t.b):ct(+t,+e,+n)};var Ua=18,Ha=.95047,Ba=1,Va=1.08883,Ja=ht.prototype=new rt;Ja.brighter=function(t){return ct(Math.min(100,this.l+Ua*(arguments.length?t:1)),this.a,this.b)},Ja.darker=function(t){return ct(Math.max(0,this.l-Ua*(arguments.length?t:1)),this.a,this.b)},Ja.rgb=function(){return ft(this.l,this.a,this.b)},Zo.rgb=function(t,e,n){return 1===arguments.length?t instanceof bt?xt(t.r,t.g,t.b):Ct(""+t,xt,at):xt(~~t,~~e,~~n)};var Ga=bt.prototype=new rt;Ga.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&i>e&&(e=i),n&&i>n&&(n=i),r&&i>r&&(r=i),xt(Math.min(255,~~(e/t)),Math.min(255,~~(n/t)),Math.min(255,~~(r/t)))):xt(i,i,i)},Ga.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),xt(~~(t*this.r),~~(t*this.g),~~(t*this.b))},Ga.hsl=function(){return Mt(this.r,this.g,this.b)},Ga.toString=function(){return"#"+wt(this.r)+wt(this.g)+wt(this.b)};var Wa=Zo.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Wa.forEach(function(t,e){Wa.set(t,vt(e))}),Zo.functor=Tt,Zo.xhr=At(Nt),Zo.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var a=Et(t,e,null==n?r:i(n),o);return a.row=function(t){return arguments.length?a.response(null==(n=t)?r:i(t)):n},a}function r(t){return n.parse(t.responseText)}function i(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(a).join(t)}function a(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(i(t),n)}:i})},n.parseRows=function(t,e){function n(){if(s>=a)return i;if(h)return h=!1,r;var e=s;if(34===t.charCodeAt(e)){for(var n=e;n++<a;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}s=n+2;var o=t.charCodeAt(n+1);return 13===o?(h=!0,10===t.charCodeAt(n+2)&&++s):10===o&&(h=!0),t.substring(e+1,n).replace(/""/g,'"')}for(;a>s;){var o=t.charCodeAt(s++),u=1;if(10===o)h=!0;else if(13===o)h=!0,10===t.charCodeAt(s)&&(++s,++u);else if(o!==l)continue;return t.substring(e,s-u)}return t.substring(e)}for(var r={},i={},o=[],a=t.length,s=0,u=0,c,h;(c=n())!==i;){for(var f=[];c!==r&&c!==i;)f.push(c),c=n();(!e||(f=e(f,u++)))&&o.push(f)}return o},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new f,i=[];return e.forEach(function(t){for(var e in t)r.has(e)||i.push(r.add(e))}),[i.map(a).join(t)].concat(e.map(function(e){return i.map(function(t){return a(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},Zo.csv=Zo.dsv(",","text/csv"),Zo.tsv=Zo.dsv("	","text/tab-separated-values"),Zo.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=x().changedTouches),e)for(var r=0,i=e.length,o;i>r;++r)if((o=e[r]).identifier===n)return V(t,o)};var Xa,Za,Ya,Qa,Ka,ts=ea[p(ea,"requestAnimationFrame")]||function(t){setTimeout(t,17)};Zo.timer=function(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var i=n+e,o={c:t,t:i,f:!1,n:null};Za?Za.n=o:Xa=o,Za=o,Ya||(Qa=clearTimeout(Qa),Ya=1,ts(Lt))},Zo.timer.flush=function(){It(),Pt()},Zo.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var es=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map($t);Zo.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=Zo.round(t,Ot(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),es[8+n/3]};var ns=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,rs=Zo.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=Zo.round(t,Ot(t,e))).toFixed(Math.max(0,Math.min(20,Ot(t*(1+1e-15),e))))}}),is=Zo.time={},os=Date;Ft.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){as.setUTCDate.apply(this._,arguments)},setDay:function(){as.setUTCDay.apply(this._,arguments)},setFullYear:function(){as.setUTCFullYear.apply(this._,arguments)},setHours:function(){as.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){as.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){as.setUTCMinutes.apply(this._,arguments)},setMonth:function(){as.setUTCMonth.apply(this._,arguments)},setSeconds:function(){as.setUTCSeconds.apply(this._,arguments)},setTime:function(){as.setTime.apply(this._,arguments)}};var as=Date.prototype;is.year=zt(function(t){return t=is.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),is.years=is.year.range,is.years.utc=is.year.utc.range,is.day=zt(function(t){var e=new os(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),is.days=is.day.range,is.days.utc=is.day.utc.range,is.dayOfYear=function(t){var e=is.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=is[t]=zt(function(t){return(t=is.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=is.year(t).getDay();return Math.floor((is.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});is[t+"s"]=n.range,is[t+"s"].utc=n.utc.range,is[t+"OfYear"]=function(t){var n=is.year(t).getDay();return Math.floor((is.dayOfYear(t)+(n+e)%7)/7)}}),is.week=is.sunday,is.weeks=is.sunday.range,is.weeks.utc=is.sunday.utc.range,is.weekOfYear=is.sundayOfYear;var ss={"-":"",_:" ",0:"0"},ls=/^\s*\d+/,us=/^%/;Zo.locale=function(t){return{numberFormat:Dt(t),timeFormat:Ut(t)}};var cs=Zo.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Zo.format=cs.numberFormat,Zo.geo={},ue.prototype={s:0,t:0,add:function(t){ce(t,this.t,hs),ce(hs.s,this.s,this),this.s?this.t+=hs.t:this.s=hs.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var hs=new ue;Zo.geo.stream=function(t,e){t&&fs.hasOwnProperty(t.type)?fs[t.type](t,e):he(t,e)};var fs={Feature:function(t,e){he(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)he(n[r].geometry,e)}},ds={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){fe(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)fe(n[r],e,0)},Polygon:function(t,e){de(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)de(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)he(n[r],e)}};Zo.geo.area=function(t){return ps=0,Zo.geo.stream(t,ms),ps};var ps,gs=new ue,ms={sphere:function(){ps+=4*Ta},point:g,lineStart:g,lineEnd:g,polygonStart:function(){gs.reset(),ms.lineStart=pe},polygonEnd:function(){var t=2*gs;ps+=0>t?4*Ta+t:t,ms.lineStart=ms.lineEnd=ms.point=g}};Zo.geo.bounds=function(){function t(t,e){x.push(b=[c=t,f=t]),h>e&&(h=e),e>d&&(d=e)}function e(e,n){var r=ge([e*La,n*La]);if(v){var i=ve(v,r),o=[i[1],-i[0],0],a=ve(o,i);be(a),a=we(a);var l=e-p,u=l>0?1:-1,g=a[0]*Ia*u,m=ca(l)>180;if(m^(g>u*p&&u*e>g)){var y=a[1]*Ia;y>d&&(d=y)}else if(g=(g+360)%360-180,m^(g>u*p&&u*e>g)){var y=-a[1]*Ia;h>y&&(h=y)}else h>n&&(h=n),n>d&&(d=n);m?p>e?s(c,e)>s(c,f)&&(f=e):s(e,f)>s(c,f)&&(c=e):f>=c?(c>e&&(c=e),e>f&&(f=e)):e>p?s(c,e)>s(c,f)&&(f=e):s(e,f)>s(c,f)&&(c=e)}else t(e,n);v=r,p=e}function n(){w.point=e}function r(){b[0]=c,b[1]=f,w.point=t,v=null}function i(t,n){if(v){var r=t-p;y+=ca(r)>180?r+(r>0?360:-360):r}else g=t,m=n;ms.point(t,n),e(t,n)}function o(){ms.lineStart()}function a(){i(g,m),ms.lineEnd(),ca(y)>Ea&&(c=-(f=180)),b[0]=c,b[1]=f,v=null}function s(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,h,f,d,p,g,m,v,y,x,b,w={point:t,lineStart:n,lineEnd:r,polygonStart:function(){w.point=i,w.lineStart=o,w.lineEnd=a,y=0,ms.polygonStart()},polygonEnd:function(){ms.polygonEnd(),w.point=t,w.lineStart=n,w.lineEnd=r,0>gs?(c=-(f=180),h=-(d=90)):y>Ea?d=90:-Ea>y&&(h=-90),b[0]=c,b[1]=f}};return function(t){d=f=-(c=h=1/0),x=[],Zo.geo.stream(t,w);var e=x.length;if(e){x.sort(l);for(var n=1,r=x[0],i,o=[r];e>n;++n)i=x[n],u(i[0],r)||u(i[1],r)?(s(r[0],i[1])>s(r[0],r[1])&&(r[1]=i[1]),s(i[0],r[1])>s(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(var a=-(1/0),p,e=o.length-1,n=0,r=o[e],i;e>=n;r=i,++n)i=o[n],(p=s(r[1],i[0]))>a&&(a=p,c=i[0],f=r[1])}return x=b=null,c===1/0||h===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,h],[f,d]]}}(),Zo.geo.centroid=function(t){vs=ys=xs=bs=ws=Cs=Ms=Ss=_s=ks=Ts=0,Zo.geo.stream(t,Ns);var e=_s,n=ks,r=Ts,i=e*e+n*n+r*r;return Ra>i&&(e=Cs,n=Ms,r=Ss,Ea>ys&&(e=xs,n=bs,r=ws),i=e*e+n*n+r*r,Ra>i)?[NaN,NaN]:[Math.atan2(n,e)*Ia,Q(r/Math.sqrt(i))*Ia]};var vs,ys,xs,bs,ws,Cs,Ms,Ss,_s,ks,Ts,Ns={sphere:g,point:Me,lineStart:_e,lineEnd:ke,polygonStart:function(){Ns.lineStart=Te},polygonEnd:function(){Ns.lineStart=_e}},As=Le(Ne,De,Fe,[-Ta,-Ta/2]),Es=1e9;Zo.geo.clipExtent=function(){var t,e,n,r,i,o,a={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(s){return arguments.length?(o=Ue(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(Zo.geo.conicEqualArea=function(){return Be(Ve)}).raw=Ve,Zo.geo.albers=function(){return Zo.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Zo.geo.albersUsa=function(){function t(t){var e=t[0],n=t[1];return i=null,a(e,n),i||(s(e,n),i)||l(e,n),i}var e=Zo.geo.albers(),n=Zo.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),r=Zo.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i,o={point:function(t,e){i=[t,e]}},a,s,l;return t.invert=function(t){var i=e.scale(),o=e.translate(),a=(t[0]-o[0])/i,s=(t[1]-o[1])/i;return(s>=.12&&.234>s&&a>=-.425&&-.214>a?n:s>=.166&&.234>s&&a>=-.214&&-.115>a?r:e).invert(t)},t.stream=function(t){var i=e.stream(t),o=n.stream(t),a=r.stream(t);return{point:function(t,e){i.point(t,e),o.point(t,e),a.point(t,e)},sphere:function(){i.sphere(),o.sphere(),a.sphere()},lineStart:function(){i.lineStart(),o.lineStart(),a.lineStart()},lineEnd:function(){i.lineEnd(),o.lineEnd(),a.lineEnd()},polygonStart:function(){i.polygonStart(),o.polygonStart(),a.polygonStart()},polygonEnd:function(){i.polygonEnd(),o.polygonEnd(),a.polygonEnd()}}},t.precision=function(i){return arguments.length?(e.precision(i),n.precision(i),r.precision(i),t):e.precision()},t.scale=function(i){return arguments.length?(e.scale(i),n.scale(.35*i),r.scale(i),t.translate(e.translate())):e.scale()},t.translate=function(i){if(!arguments.length)return e.translate();var u=e.scale(),c=+i[0],h=+i[1];return a=e.translate(i).clipExtent([[c-.455*u,h-.238*u],[c+.455*u,h+.238*u]]).stream(o).point,s=n.translate([c-.307*u,h+.201*u]).clipExtent([[c-.425*u+Ea,h+.12*u+Ea],[c-.214*u-Ea,h+.234*u-Ea]]).stream(o).point,l=r.translate([c-.205*u,h+.212*u]).clipExtent([[c-.214*u+Ea,h+.166*u+Ea],[c-.115*u-Ea,h+.234*u-Ea]]).stream(o).point,t},t.scale(1070)};var Rs,Ls,Is={point:g,lineStart:g,lineEnd:g,polygonStart:function(){Ls=0,Is.lineStart=Je},polygonEnd:function(){Is.lineStart=Is.lineEnd=Is.point=g,Rs+=ca(Ls/2)}},Ps,Os,$s,Ds,js={point:Ge,lineStart:g,lineEnd:g,polygonStart:g,polygonEnd:g},Fs={point:Ze,lineStart:Ye,lineEnd:Qe,polygonStart:function(){Fs.lineStart=Ke},polygonEnd:function(){Fs.point=Ze,Fs.lineStart=Ye,Fs.lineEnd=Qe}};Zo.geo.path=function(){function t(t){return t&&("function"==typeof n&&a.pointRadius(+n.apply(this,arguments)),s&&s.valid||(s=o(a)),Zo.geo.stream(t,s)),a.result()}function e(){return s=null,t}var n=4.5,r,i,o,a,s;return t.area=function(t){return Rs=0,Zo.geo.stream(t,o(Is)),Rs},t.centroid=function(t){return xs=bs=ws=Cs=Ms=Ss=_s=ks=Ts=0,Zo.geo.stream(t,o(Fs)),Ts?[_s/Ts,ks/Ts]:Ss?[Cs/Ss,Ms/Ss]:ws?[xs/ws,bs/ws]:[NaN,NaN]},t.bounds=function(t){return $s=Ds=-(Ps=Os=1/0),Zo.geo.stream(t,o(js)),[[Ps,Os],[$s,Ds]]},t.projection=function(t){return arguments.length?(o=(r=t)?t.stream||nn(t):Nt,e()):r},t.context=function(t){return arguments.length?(a=null==(i=t)?new We:new tn(t),"function"!=typeof n&&a.pointRadius(n),e()):i},t.pointRadius=function(e){return arguments.length?(n="function"==typeof e?e:(a.pointRadius(+e),+e),t):n},t.projection(Zo.geo.albersUsa()).context(null)},Zo.geo.transform=function(t){return{stream:function(e){var n=new rn(e);for(var r in t)n[r]=t[r];return n}}},rn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Zo.geo.projection=an,Zo.geo.projectionMutator=sn,(Zo.geo.equirectangular=function(){return an(un)}).raw=un.invert=un,Zo.geo.rotation=function(t){function e(e){return e=t(e[0]*La,e[1]*La),e[0]*=Ia,e[1]*=Ia,e}return t=hn(t[0]%360*La,t[1]*La,t.length>2?t[2]*La:0),e.invert=function(e){return e=t.invert(e[0]*La,e[1]*La),e[0]*=Ia,e[1]*=Ia,e},e},cn.invert=un,Zo.geo.circle=function(){function t(){var t="function"==typeof e?e.apply(this,arguments):e,n=hn(-t[0]*La,-t[1]*La,0).invert,r=[];return i(null,null,1,{point:function(t,e){r.push(t=n(t,e)),t[0]*=Ia,t[1]*=Ia}}),{type:"Polygon",coordinates:[r]}}var e=[0,0],n,r=6,i;return t.origin=function(n){return arguments.length?(e=n,t):e},t.angle=function(e){return arguments.length?(i=gn((n=+e)*La,r*La),t):n},t.precision=function(e){return arguments.length?(i=gn(n*La,(r=+e)*La),t):r},t.angle(90)},Zo.geo.distance=function(t,e){var n=(e[0]-t[0])*La,r=t[1]*La,i=e[1]*La,o=Math.sin(n),a=Math.cos(n),s=Math.sin(r),l=Math.cos(r),u=Math.sin(i),c=Math.cos(i),h;return Math.atan2(Math.sqrt((h=c*o)*h+(h=l*u-s*c*a)*h),s*u+l*c*a)},Zo.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return Zo.range(Math.ceil(o/f)*f,i,f).map(m).concat(Zo.range(Math.ceil(u/d)*d,l,d).map(v)).concat(Zo.range(Math.ceil(r/c)*c,n,c).filter(function(t){return ca(t%f)>Ea}).map(p)).concat(Zo.range(Math.ceil(s/h)*h,a,h).filter(function(t){return ca(t%d)>Ea}).map(g))}var n,r,i,o,a,s,l,u,c=10,h=c,f=90,d=360,p,g,m,v,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[m(o).concat(v(l).slice(1),m(i).reverse().slice(1),v(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],i=+e[1][0],u=+e[0][1],l=+e[1][1],o>i&&(e=o,o=i,i=e),u>l&&(e=u,u=l,l=e),t.precision(y)):[[o,u],[i,l]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),t.precision(y)):[[r,s],[n,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(f=+e[0],d=+e[1],t):[f,d]},t.minorStep=function(e){return arguments.length?(c=+e[0],h=+e[1],t):[c,h]},t.precision=function(e){return arguments.length?(y=+e,p=vn(s,a,90),g=yn(r,n,y),m=vn(u,l,90),v=yn(o,i,y),t):y},t.majorExtent([[-180,-90+Ea],[180,90-Ea]]).minorExtent([[-180,-80-Ea],[180,80+Ea]])},Zo.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[n||e.apply(this,arguments),i||r.apply(this,arguments)]}}var e=xn,n,r=bn,i;return t.distance=function(){return Zo.geo.distance(n||e.apply(this,arguments),i||r.apply(this,arguments))},t.source=function(r){return arguments.length?(e=r,n="function"==typeof r?null:r,t):e},t.target=function(e){return arguments.length?(r=e,i="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},Zo.geo.interpolate=function(t,e){return wn(t[0]*La,t[1]*La,e[0]*La,e[1]*La)},Zo.geo.length=function(t){return zs=0,Zo.geo.stream(t,qs),zs};var zs,qs={sphere:g,point:g,lineStart:Cn,lineEnd:g,polygonStart:g,polygonEnd:g},Us=Mn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(Zo.geo.azimuthalEqualArea=function(){return an(Us)}).raw=Us;var Hs=Mn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},Nt);(Zo.geo.azimuthalEquidistant=function(){return an(Hs)}).raw=Hs,(Zo.geo.conicConformal=function(){return Be(Sn)}).raw=Sn,(Zo.geo.conicEquidistant=function(){return Be(_n)}).raw=_n;var Bs=Mn(function(t){return 1/t},Math.atan);(Zo.geo.gnomonic=function(){return an(Bs)}).raw=Bs,kn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Aa]},(Zo.geo.mercator=function(){return Tn(kn)}).raw=kn;var Vs=Mn(function(){return 1},Math.asin);(Zo.geo.orthographic=function(){return an(Vs)}).raw=Vs;var Js=Mn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(Zo.geo.stereographic=function(){return an(Js)}).raw=Js,Nn.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Aa]},(Zo.geo.transverseMercator=function(){var t=Tn(Nn),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[-t[1],t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},t.rotate([0,0])}).raw=Nn,Zo.geom={},Zo.geom.hull=function(t){function e(t){if(t.length<3)return[];var e=Tt(n),i=Tt(r),o,a=t.length,s=[],l=[];for(o=0;a>o;o++)s.push([+e.call(this,t[o],o),+i.call(this,t[o],o),o]);for(s.sort(Ln),o=0;a>o;o++)l.push([s[o][0],-s[o][1]]);var u=Rn(s),c=Rn(l),h=c[0]===u[0],f=c[c.length-1]===u[u.length-1],d=[];for(o=u.length-1;o>=0;--o)d.push(t[s[u[o]][2]]);for(o=+h;o<c.length-f;++o)d.push(t[s[c[o]][2]]);return d}var n=An,r=En;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},Zo.geom.polygon=function(t){return ga(t,Gs),t};var Gs=Zo.geom.polygon.prototype=[];Gs.area=function(){for(var t=-1,e=this.length,n,r=this[e-1],i=0;++t<e;)n=r,r=this[t],i+=n[1]*r[0]-n[0]*r[1];return.5*i},Gs.centroid=function(t){var e=-1,n=this.length,r=0,i=0,o,a=this[n-1],s;for(arguments.length||(t=-1/(6*this.area()));++e<n;)o=a,a=this[e],s=o[0]*a[1]-a[0]*o[1],r+=(o[0]+a[0])*s,i+=(o[1]+a[1])*s;return[r*t,i*t]},Gs.clip=function(t){for(var e,n=On(t),r=-1,i=this.length-On(this),o,a,s=this[i-1],l,u,c;++r<i;){for(e=t.slice(),t.length=0,l=this[r],u=e[(a=e.length-n)-1],o=-1;++o<a;)c=e[o],In(c,s,l)?(In(u,s,l)||t.push(Pn(u,c,s,l)),t.push(c)):In(u,s,l)&&t.push(Pn(u,c,s,l)),u=c;n&&t.push(t[0]),s=l}return t};var Ws,Xs,Zs,Ys=[],Qs,Ks,tl=[];Hn.prototype.prepare=function(){for(var t=this.edges,e=t.length,n;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(Vn),t.length},er.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nr.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ar(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(ir(this,n),t=n,n=t.U),n.C=!1,r.C=!0,or(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(or(this,n),t=n,n=t.U),n.C=!1,r.C=!0,ir(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e=t.U,n,r=t.L,i=t.R,o,a;if(o=r?i?ar(i):r:i,e?e.L===t?e.L=o:e.R=o:this._=o,r&&i?(a=o.C,o.C=t.C,o.L=r,r.U=o,o!==i?(e=o.U,o.U=t.U,t=o.R,e.L=t,o.R=i,i.U=o):(o.U=e,e=o,t=o.R)):(a=t.C,t=o),t&&(t.U=e),!a){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===e.L){if(n=e.R,n.C&&(n.C=!1,e.C=!0,ir(this,e),n=e.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,or(this,n),n=e.R),n.C=e.C,e.C=n.R.C=!1,ir(this,e),t=this._;break}}else if(n=e.L,n.C&&(n.C=!1,e.C=!0,or(this,e),n=e.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,ir(this,n),n=e.L),n.C=e.C,e.C=n.L.C=!1,or(this,e),t=this._;break}n.C=!0,t=e,e=e.U}while(!t.C);t&&(t.C=!1)}}},Zo.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=s[0][0],i=s[0][1],o=s[1][0],a=s[1][1];return sr(n(t),s).cells.forEach(function(n,s){var l=n.edges,u=n.site,c=e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=r&&u.x<=o&&u.y>=i&&u.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[];c.point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Ea)*Ea,y:Math.round(a(t,e)/Ea)*Ea,i:e}})}var r=An,i=En,o=r,a=i,s=el;return t?e(t):(e.links=function(t){return sr(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return sr(n(t)).cells.forEach(function(n,r){for(var i=n.site,o=n.edges.sort(Vn),a=-1,s=o.length,l,u,c=o[s-1].edge,h=c.l===i?c.r:c.l;++a<s;)l=c,u=h,c=o[a].edge,h=c.l===i?c.r:c.l,r<u.i&&r<h.i&&ur(i,u,h)<0&&e.push([t[r],t[u.i],t[h.i]])}),e},e.x=function(t){return arguments.length?(o=Tt(r=t),e):r},e.y=function(t){return arguments.length?(a=Tt(i=t),e):i},e.clipExtent=function(t){return arguments.length?(s=null==t?el:t,e):s===el?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===el?null:s&&s[1]},e)};var el=[[-1e6,-1e6],[1e6,1e6]];Zo.geom.delaunay=function(t){return Zo.geom.voronoi().triangles(t)},Zo.geom.quadtree=function(t,e,n,r,i){function o(t){function o(t,e,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(ca(l-n)+ca(c-r)<.01)u(t,e,n,r,i,o,a,s);else{var h=t.point;t.x=t.y=t.point=null,u(t,h,l,c,i,o,a,s),u(t,e,n,r,i,o,a,s)}else t.x=n,t.y=r,t.point=e}else u(t,e,n,r,i,o,a,s)}function u(t,e,n,r,i,a,s,l){var u=.5*(i+s),c=.5*(a+l),h=n>=u,f=r>=c,d=(f<<1)+h;t.leaf=!1,t=t.nodes[d]||(t.nodes[d]=fr()),h?i=u:s=u,f?a=c:l=c,o(t,e,n,r,i,a,s,l)}var c,h=Tt(a),f=Tt(s),d,p,g,m,v,y,x,b;if(null!=e)v=e,y=n,x=r,b=i;else if(x=b=-(v=y=1/0),d=[],p=[],m=t.length,l)for(g=0;m>g;++g)c=t[g],c.x<v&&(v=c.x),c.y<y&&(y=c.y),c.x>x&&(x=c.x),c.y>b&&(b=c.y),d.push(c.x),p.push(c.y);else for(g=0;m>g;++g){var w=+h(c=t[g],g),C=+f(c,g);v>w&&(v=w),y>C&&(y=C),w>x&&(x=w),C>b&&(b=C),d.push(w),p.push(C)}var M=x-v,S=b-y;M>S?b=y+M:x=v+S;var _=fr();if(_.add=function(t){o(_,t,+h(t,++g),+f(t,g),v,y,x,b)},_.visit=function(t){dr(t,_,v,y,x,b)},g=-1,null==e){for(;++g<m;)o(_,t[g],d[g],p[g],v,y,x,b);--g}else t.forEach(_.add);return d=p=t=c=null,_}var a=An,s=En,l;return(l=arguments.length)?(a=cr,s=hr,3===l&&(i=n,r=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(a=t,o):a},o.y=function(t){return arguments.length?(s=t,o):s},o.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==e?null:[[e,n],[r,i]]},o.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),o):null==e?null:[r-e,i-n]},o)},Zo.interpolateRgb=pr,Zo.interpolateObject=gr,Zo.interpolateNumber=mr,Zo.interpolateString=vr;var nl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rl=new RegExp(nl.source,"g");Zo.interpolate=yr,Zo.interpolators=[function(t,e){var n=typeof e;return("string"===n?Wa.has(e)||/^(#|rgb\(|hsl\()/.test(e)?pr:vr:e instanceof rt?pr:Array.isArray(e)?xr:"object"===n&&isNaN(e)?gr:mr)(t,e)}],Zo.interpolateArray=xr;var il=function(){return Nt},ol=Zo.map({linear:il,poly:kr,quad:function(){return Mr},cubic:function(){return Sr},sin:function(){return Tr},exp:function(){return Nr},circle:function(){return Ar},elastic:Er,back:Rr,bounce:function(){return Lr}}),al=Zo.map({"in":Nt,out:wr,"in-out":Cr,"out-in":function(t){return Cr(wr(t))}});Zo.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.substring(0,e):t,r=e>=0?t.substring(e+1):"in";return n=ol.get(n)||il,r=al.get(r)||Nt,br(r(n.apply(null,Yo.call(arguments,1))))},Zo.interpolateHcl=Ir,Zo.interpolateHsl=Pr,Zo.interpolateLab=Or,Zo.interpolateRound=$r,Zo.transform=function(t){var e=Ko.createElementNS(Zo.ns.prefix.svg,"g");return(Zo.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Dr(n?n.matrix:sl)})(t)},Dr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var sl={a:1,b:0,c:0,d:1,e:0,f:0};Zo.interpolateTransform=qr,Zo.layout={},Zo.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(Br(t[n]));return e}},Zo.layout.chord=function(){function t(){var t={},n=[],h=Zo.range(a),f=[],d,p,g,m,v;
for(r=[],i=[],d=0,m=-1;++m<a;){for(p=0,v=-1;++v<a;)p+=o[m][v];n.push(p),f.push(Zo.range(a)),d+=p}for(l&&h.sort(function(t,e){return l(n[t],n[e])}),u&&f.forEach(function(t,e){t.sort(function(t,n){return u(o[e][t],o[e][n])})}),d=(Na-s*a)/d,p=0,m=-1;++m<a;){for(g=p,v=-1;++v<a;){var y=h[m],x=f[y][v],b=o[y][x],w=p,C=p+=b*d;t[y+"-"+x]={index:y,subindex:x,startAngle:w,endAngle:C,value:b}}i[y]={index:y,startAngle:g,endAngle:p,value:(p-g)/d},p+=s}for(m=-1;++m<a;)for(v=m-1;++v<a;){var M=t[m+"-"+v],S=t[v+"-"+m];(M.value||S.value)&&r.push(M.value<S.value?{source:S,target:M}:{source:M,target:S})}c&&e()}function e(){r.sort(function(t,e){return c((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n={},r,i,o,a,s=0,l,u,c;return n.matrix=function(t){return arguments.length?(a=(o=t)&&o.length,r=i=null,n):o},n.padding=function(t){return arguments.length?(s=t,r=i=null,n):s},n.sortGroups=function(t){return arguments.length?(l=t,r=i=null,n):l},n.sortSubgroups=function(t){return arguments.length?(u=t,r=null,n):u},n.sortChords=function(t){return arguments.length?(c=t,r&&e(),n):c},n.chords=function(){return r||t(),r},n.groups=function(){return i||t(),i},n},Zo.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=i-n,l=o*o+a*a;if(l>s*s/d){if(h>l){var u=e.charge/l;t.px-=o*u,t.py-=a*u}return!0}if(e.point&&l&&h>l){var u=e.pointCharge/l;t.px-=o*u,t.py-=a*u}}return!e.charge}}function e(t){t.px=Zo.event.x,t.py=Zo.event.y,n.resume()}var n={},r=Zo.dispatch("start","tick","end"),i=[1,1],o,a,s=.9,l=ll,u=ul,c=-30,h=cl,f=.1,d=.64,p=[],g=[],m,v,y;return n.tick=function(){if((a*=.99)<.005)return r.end({type:"end",alpha:a=0}),!0;var e=p.length,n=g.length,o,l,u,h,d,x,b,w,C;for(l=0;n>l;++l)u=g[l],h=u.source,d=u.target,w=d.x-h.x,C=d.y-h.y,(x=w*w+C*C)&&(x=a*v[l]*((x=Math.sqrt(x))-m[l])/x,w*=x,C*=x,d.x-=w*(b=h.weight/(d.weight+h.weight)),d.y-=C*b,h.x+=w*(b=1-b),h.y+=C*b);if((b=a*f)&&(w=i[0]/2,C=i[1]/2,l=-1,b))for(;++l<e;)u=p[l],u.x+=(w-u.x)*b,u.y+=(C-u.y)*b;if(c)for(Yr(o=Zo.geom.quadtree(p),a,y),l=-1;++l<e;)(u=p[l]).fixed||o.visit(t(u));for(l=-1;++l<e;)u=p[l],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*s,u.y-=(u.py-(u.py=u.y))*s);r.tick({type:"tick",alpha:a})},n.nodes=function(t){return arguments.length?(p=t,n):p},n.links=function(t){return arguments.length?(g=t,n):g},n.size=function(t){return arguments.length?(i=t,n):i},n.linkDistance=function(t){return arguments.length?(l="function"==typeof t?t:+t,n):l},n.distance=n.linkDistance,n.linkStrength=function(t){return arguments.length?(u="function"==typeof t?t:+t,n):u},n.friction=function(t){return arguments.length?(s=+t,n):s},n.charge=function(t){return arguments.length?(c="function"==typeof t?t:+t,n):c},n.chargeDistance=function(t){return arguments.length?(h=t*t,n):Math.sqrt(h)},n.gravity=function(t){return arguments.length?(f=+t,n):f},n.theta=function(t){return arguments.length?(d=t*t,n):Math.sqrt(d)},n.alpha=function(t){return arguments.length?(t=+t,a?a=t>0?t:0:t>0&&(r.start({type:"start",alpha:a=t}),Zo.timer(n.tick)),n):a},n.start=function(){function t(t,n){if(!h){for(h=new Array(r),a=0;r>a;++a)h[a]=[];for(a=0;s>a;++a){var i=g[a];h[i.source.index].push(i.target),h[i.target.index].push(i.source)}}for(var o=h[e],a=-1,s=o.length,l;++a<s;)if(!isNaN(l=o[a][t]))return l;return Math.random()*n}var e,r=p.length,o=g.length,a=i[0],s=i[1],h,f;for(e=0;r>e;++e)(f=p[e]).index=e,f.weight=0;for(e=0;o>e;++e)f=g[e],"number"==typeof f.source&&(f.source=p[f.source]),"number"==typeof f.target&&(f.target=p[f.target]),++f.source.weight,++f.target.weight;for(e=0;r>e;++e)f=p[e],isNaN(f.x)&&(f.x=t("x",a)),isNaN(f.y)&&(f.y=t("y",s)),isNaN(f.px)&&(f.px=f.x),isNaN(f.py)&&(f.py=f.y);if(m=[],"function"==typeof l)for(e=0;o>e;++e)m[e]=+l.call(this,g[e],e);else for(e=0;o>e;++e)m[e]=l;if(v=[],"function"==typeof u)for(e=0;o>e;++e)v[e]=+u.call(this,g[e],e);else for(e=0;o>e;++e)v[e]=u;if(y=[],"function"==typeof c)for(e=0;r>e;++e)y[e]=+c.call(this,p[e],e);else for(e=0;r>e;++e)y[e]=c;return n.resume()},n.resume=function(){return n.alpha(.1)},n.stop=function(){return n.alpha(0)},n.drag=function(){return o||(o=Zo.behavior.drag().origin(Nt).on("dragstart.force",Gr).on("drag.force",e).on("dragend.force",Wr)),arguments.length?void this.on("mouseover.force",Xr).on("mouseout.force",Zr).call(o):o},Zo.rebind(n,r,"on")};var ll=20,ul=1,cl=1/0;Zo.layout.hierarchy=function(){function t(i){var o=[i],a=[],s;for(i.depth=0;null!=(s=o.pop());)if(a.push(s),(u=n.call(t,s,s.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)o.push(c=u[l]),c.parent=s,c.depth=s.depth+1;r&&(s.value=0),s.children=u}else r&&(s.value=+r.call(t,s,s.depth)||0),delete s.children;return ti(i,function(t){var n,i;e&&(n=t.children)&&n.sort(e),r&&(i=t.parent)&&(i.value+=t.value)}),a}var e=ri,n=ei,r=ni;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(Kr(e,function(t){t.children&&(t.value=0)}),ti(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},Zo.layout.partition=function(){function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(s=o.length)){var a=-1,s,l,u;for(r=e.value?r/e.value:0;++a<s;)t(l=o[a],n,u=l.value*r,i),n+=u}}function e(t){var n=t.children,r=0;if(n&&(o=n.length))for(var i=-1,o;++i<o;)r=Math.max(r,e(n[i]));return 1+r}function n(n,o){var a=r.call(this,n,o);return t(a[0],0,i[0],i[1]/e(a[0])),a}var r=Zo.layout.hierarchy(),i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},Qr(n,r)},Zo.layout.pie=function(){function t(o){var a=o.map(function(n,r){return+e.call(t,n,r)}),s=+("function"==typeof r?r.apply(this,arguments):r),l=(("function"==typeof i?i.apply(this,arguments):i)-s)/Zo.sum(a),u=Zo.range(o.length);null!=n&&u.sort(n===hl?function(t,e){return a[e]-a[t]}:function(t,e){return n(o[t],o[e])});var c=[];return u.forEach(function(t){var e;c[t]={data:o[t],value:e=a[t],startAngle:s,endAngle:s+=e*l}}),c}var e=Number,n=hl,r=0,i=Na;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t};var hl={};Zo.layout.stack=function(){function t(s,l){var u=s.map(function(n,r){return e.call(t,n,r)}),c=u.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),a.call(t,e,n)]})}),h=n.call(t,c,l);u=Zo.permute(u,h),c=Zo.permute(c,h);var f=r.call(t,c,l),d=u.length,p=u[0].length,g,m,v;for(m=0;p>m;++m)for(i.call(t,u[0][m],v=f[m],c[0][m][1]),g=1;d>g;++g)i.call(t,u[g][m],v+=c[g-1][m][1],c[g][m][1]);return s}var e=Nt,n=li,r=ui,i=si,o=oi,a=ai;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:fl.get(e)||li,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:dl.get(e)||ui,t):r},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(i=e,t):i},t};var fl=Zo.map({"inside-out":function(t){var e=t.length,n,r,i=t.map(ci),o=t.map(hi),a=Zo.range(e).sort(function(t,e){return i[t]-i[e]}),s=0,l=0,u=[],c=[];for(n=0;e>n;++n)r=a[n],l>s?(s+=o[r],u.push(r)):(l+=o[r],c.push(r));return c.reverse().concat(u)},reverse:function(t){return Zo.range(t.length).reverse()},"default":li}),dl=Zo.map({silhouette:function(t){var e=t.length,n=t[0].length,r=[],i=0,o,a,s,l=[];for(a=0;n>a;++a){for(o=0,s=0;e>o;o++)s+=t[o][a][1];s>i&&(i=s),r.push(s)}for(a=0;n>a;++a)l[a]=(i-r[a])/2;return l},wiggle:function(t){var e=t.length,n=t[0],r=n.length,i,o,a,s,l,u,c,h,f,d=[];for(d[0]=h=f=0,o=1;r>o;++o){for(i=0,s=0;e>i;++i)s+=t[i][o][1];for(i=0,l=0,c=n[o][0]-n[o-1][0];e>i;++i){for(a=0,u=(t[i][o][1]-t[i][o-1][1])/(2*c);i>a;++a)u+=(t[a][o][1]-t[a][o-1][1])/c;l+=u*t[i][o][1]}d[o]=h-=s?l/s*c:0,f>h&&(f=h)}for(o=0;r>o;++o)d[o]-=f;return d},expand:function(t){var e=t.length,n=t[0].length,r=1/e,i,o,a,s=[];for(o=0;n>o;++o){for(i=0,a=0;e>i;i++)a+=t[i][o][1];if(a)for(i=0;e>i;i++)t[i][o][1]/=a;else for(i=0;e>i;i++)t[i][o][1]=r}for(o=0;n>o;++o)s[o]=0;return s},zero:ui});Zo.layout.histogram=function(){function t(t,o){for(var a=[],s=t.map(n,this),l=r.call(this,s,o),u=i.call(this,l,s,o),c,o=-1,h=s.length,f=u.length-1,d=e?1:1/h,p;++o<f;)c=a[o]=[],c.dx=u[o+1]-(c.x=u[o]),c.y=0;if(f>0)for(o=-1;++o<h;)p=s[o],p>=l[0]&&p<=l[1]&&(c=a[Zo.bisect(u,p,1,f)-1],c.y+=d,c.push(t[o]));return a}var e=!0,n=Number,r=gi,i=di;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=Tt(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return pi(t,e)}:Tt(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},Zo.layout.pack=function(){function t(t,o){var a=e.call(this,t,o),s=a[0],l=r[0],u=r[1],c=null==i?Math.sqrt:"function"==typeof i?i:function(){return i};if(s.x=s.y=0,ti(s,function(t){t.r=+c(t.value)}),ti(s,bi),n){var h=n*(i?1:Math.max(2*s.r/l,2*s.r/u))/2;ti(s,function(t){t.r+=h}),ti(s,bi),ti(s,function(t){t.r-=h})}return Mi(s,l/2,u/2,i?1:1/Math.max(2*s.r/l,2*s.r/u)),a}var e=Zo.layout.hierarchy().sort(mi),n=0,r=[1,1],i;return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(e){return arguments.length?(i=null==e||"function"==typeof e?e:+e,t):i},t.padding=function(e){return arguments.length?(n=+e,t):n},Qr(t,e)},Zo.layout.tree=function(){function t(t,i){var c=a.call(this,t,i),h=c[0],f=e(h);if(ti(f,n),f.parent.m=-f.z,Kr(f,r),u)Kr(h,o);else{var d=h,p=h,g=h;Kr(h,function(t){t.x<d.x&&(d=t),t.x>p.x&&(p=t),t.depth>g.depth&&(g=t)});var m=s(d,p)/2-d.x,v=l[0]/(p.x+s(p,d)/2+m),y=l[1]/(g.depth||1);Kr(h,function(t){t.x=(t.x+m)*v,t.y=t.depth*y})}return c}function e(t){for(var e={A:null,children:[t]},n=[e],r;null!=(r=n.pop());)for(var i=r.children,o,a=0,s=i.length;s>a;++a)n.push((i[a]=o={_:i[a],parent:r,children:(o=i[a].children)&&o.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=o);return e.children[0]}function n(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){Ai(t);var o=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+s(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+s(t._,r._));t.parent.A=i(t,r,t.parent.A||n[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,e,n){if(e){for(var r=t,i=t,o=e,a=r.parent.children[0],l=r.m,u=i.m,c=o.m,h=a.m,f;o=Ti(o),r=ki(r),o&&r;)a=ki(a),i=Ti(i),i.a=t,f=o.z+c-r.z-l+s(o._,r._),f>0&&(Ni(Ei(o,t,n),t,f),l+=f,u+=f),c+=o.m,l+=r.m,h+=a.m,u+=i.m;o&&!Ti(i)&&(i.t=o,i.m+=c-u),r&&!ki(a)&&(a.t=r,a.m+=l-h,n=t)}return n}function o(t){t.x*=l[0],t.y=t.depth*l[1]}var a=Zo.layout.hierarchy().sort(null).value(null),s=_i,l=[1,1],u=null;return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(u=null==(l=e)?o:null,t):u?null:l},t.nodeSize=function(e){return arguments.length?(u=null==(l=e)?null:o,t):u?l:null},Qr(t,a)},Zo.layout.cluster=function(){function t(t,o){var a=e.call(this,t,o),s=a[0],l,u=0;ti(s,function(t){var e=t.children;e&&e.length?(t.x=Li(e),t.y=Ri(e)):(t.x=l?u+=n(t,l):0,t.y=0,l=t)});var c=Ii(s),h=Pi(s),f=c.x-n(c,h)/2,d=h.x+n(h,c)/2;return ti(s,i?function(t){t.x=(t.x-s.x)*r[0],t.y=(s.y-t.y)*r[1]}:function(t){t.x=(t.x-f)/(d-f)*r[0],t.y=(1-(s.y?t.y/s.y:1))*r[1]}),a}var e=Zo.layout.hierarchy().sort(null).value(null),n=_i,r=[1,1],i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=null==(r=e),t):i?null:r},t.nodeSize=function(e){return arguments.length?(i=null!=(r=e),t):i?r:null},Qr(t,e)},Zo.layout.treemap=function(){function t(t,e){for(var n=-1,r=t.length,i,o;++n<r;)o=(i=t[n]).value*(0>e?0:e),i.area=isNaN(o)||0>=o?0:o}function e(n){var o=n.children;if(o&&o.length){var a=c(n),s=[],l=o.slice(),u,h=1/0,f,p="slice"===d?a.dx:"dice"===d?a.dy:"slice-dice"===d?1&n.depth?a.dy:a.dx:Math.min(a.dx,a.dy),g;for(t(l,a.dx*a.dy/n.value),s.area=0;(g=l.length)>0;)s.push(u=l[g-1]),s.area+=u.area,"squarify"!==d||(f=r(s,p))<=h?(l.pop(),h=f):(s.area-=s.pop().area,i(s,p,a,!1),p=Math.min(a.dx,a.dy),s.length=s.area=0,h=1/0);s.length&&(i(s,p,a,!0),s.length=s.area=0),o.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var o=c(e),a=r.slice(),s,l=[];for(t(a,o.dx*o.dy/e.value),l.area=0;s=a.pop();)l.push(s),l.area+=s.area,null!=s.z&&(i(l,s.z?o.dx:o.dy,o,!a.length),l.length=l.area=0);r.forEach(n)}}function r(t,e){for(var n=t.area,r,i=0,o=1/0,a=-1,s=t.length;++a<s;)(r=t[a].area)&&(o>r&&(o=r),r>i&&(i=r));return n*=n,e*=e,n?Math.max(e*i*p/n,n/(e*o*p)):1/0}function i(t,e,n,r){var i=-1,o=t.length,a=n.x,l=n.y,u=e?s(t.area/e):0,c;if(e==n.dx){for((r||u>n.dy)&&(u=n.dy);++i<o;)c=t[i],c.x=a,c.y=l,c.dy=u,a+=c.dx=Math.min(n.x+n.dx-a,u?s(c.area/u):0);c.z=!0,c.dx+=n.x+n.dx-a,n.y+=u,n.dy-=u}else{for((r||u>n.dx)&&(u=n.dx);++i<o;)c=t[i],c.x=a,c.y=l,c.dx=u,l+=c.dy=Math.min(n.y+n.dy-l,u?s(c.area/u):0);c.z=!1,c.dy+=n.y+n.dy-l,n.x+=u,n.dx-=u}}function o(r){var i=f||a(r),o=i[0];return o.x=0,o.y=0,o.dx=l[0],o.dy=l[1],f&&a.revalue(o),t([o],o.dx*o.dy/o.value),(f?n:e)(o),h&&(f=i),i}var a=Zo.layout.hierarchy(),s=Math.round,l=[1,1],u=null,c=Oi,h=!1,f,d="squarify",p=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(l=t,o):l},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Oi(e):$i(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return $i(e,t)}if(!arguments.length)return u;var r;return c=null==(u=t)?Oi:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(s=t?Math.round:Number,o):s!=Number},o.sticky=function(t){return arguments.length?(h=t,f=null,o):h},o.ratio=function(t){return arguments.length?(p=t,o):p},o.mode=function(t){return arguments.length?(d=t+"",o):d},Qr(o,a)},Zo.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=Zo.random.normal.apply(Zo,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=Zo.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},Zo.scale={};var pl={floor:Nt,ceil:Nt};Zo.scale.linear=function(){return Hi([0,1],[0,1],yr,!1)};var gl={s:1,g:1,p:1,r:1,e:1};Zo.scale.log=function(){return Yi(Zo.scale.linear().domain([0,1]),10,!0,[1,10])};var ml=Zo.format(".0e"),vl={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};Zo.scale.pow=function(){return Qi(Zo.scale.linear(),1,[0,1])},Zo.scale.sqrt=function(){return Zo.scale.pow().exponent(.5)},Zo.scale.ordinal=function(){return to([],{t:"range",a:[[]]})},Zo.scale.category10=function(){return Zo.scale.ordinal().range(yl)},Zo.scale.category20=function(){return Zo.scale.ordinal().range(xl)},Zo.scale.category20b=function(){return Zo.scale.ordinal().range(bl)},Zo.scale.category20c=function(){return Zo.scale.ordinal().range(wl)};var yl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(yt),xl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(yt),bl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(yt),wl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(yt);Zo.scale.quantile=function(){return eo([],[])},Zo.scale.quantize=function(){return no(0,1,[0,1])},Zo.scale.threshold=function(){return ro([.5],[0,1])},Zo.scale.identity=function(){return io([0,1])},Zo.svg={},Zo.svg.arc=function(){function t(){var t=e.apply(this,arguments),o=n.apply(this,arguments),a=r.apply(this,arguments)+Cl,s=i.apply(this,arguments)+Cl,l=(a>s&&(l=a,a=s,s=l),s-a),u=Ta>l?"0":"1",c=Math.cos(a),h=Math.sin(a),f=Math.cos(s),d=Math.sin(s);return l>=Ml?t?"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z":t?"M"+o*c+","+o*h+"A"+o+","+o+" 0 "+u+",1 "+o*f+","+o*d+"L"+t*f+","+t*d+"A"+t+","+t+" 0 "+u+",0 "+t*c+","+t*h+"Z":"M"+o*c+","+o*h+"A"+o+","+o+" 0 "+u+",1 "+o*f+","+o*d+"L0,0Z"}var e=oo,n=ao,r=so,i=lo;return t.innerRadius=function(n){return arguments.length?(e=Tt(n),t):e},t.outerRadius=function(e){return arguments.length?(n=Tt(e),t):n},t.startAngle=function(e){return arguments.length?(r=Tt(e),t):r},t.endAngle=function(e){return arguments.length?(i=Tt(e),t):i},t.centroid=function(){var t=(e.apply(this,arguments)+n.apply(this,arguments))/2,o=(r.apply(this,arguments)+i.apply(this,arguments))/2+Cl;return[Math.cos(o)*t,Math.sin(o)*t]},t};var Cl=-Aa,Ml=Na-Ea;Zo.svg.line=function(){return uo(Nt)};var Sl=Zo.map({linear:co,"linear-closed":ho,step:fo,"step-before":po,"step-after":go,basis:wo,"basis-open":Co,"basis-closed":Mo,bundle:So,cardinal:yo,"cardinal-open":mo,"cardinal-closed":vo,monotone:Eo});Sl.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var _l=[0,2/3,1/3,0],kl=[0,1/3,2/3,0],Tl=[0,1/6,2/3,1/6];Zo.svg.line.radial=function(){var t=uo(Ro);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},po.reverse=go,go.reverse=po,Zo.svg.area=function(){return Lo(Nt)},Zo.svg.area.radial=function(){var t=Lo(Ro);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},Zo.svg.chord=function(){function t(t,s){var l=e(this,o,t,s),u=e(this,a,t,s);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(n(l,u)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,u.r,u.p0)+r(u.r,u.p1,u.a1-u.a0)+i(u.r,u.p1,l.r,l.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),o=s.call(t,i,r),a=l.call(t,i,r)+Cl,c=u.call(t,i,r)+Cl;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Ta)+",1 "+e}function i(t,e,n,r){return"Q 0,0 "+r}var o=xn,a=bn,s=Io,l=so,u=lo;return t.radius=function(e){return arguments.length?(s=Tt(e),t):s},t.source=function(e){return arguments.length?(o=Tt(e),t):o},t.target=function(e){return arguments.length?(a=Tt(e),t):a},t.startAngle=function(e){return arguments.length?(l=Tt(e),t):l},t.endAngle=function(e){return arguments.length?(u=Tt(e),t):u},t},Zo.svg.diagonal=function(){function t(t,i){var o=e.call(this,t,i),a=n.call(this,t,i),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=xn,n=bn,r=Po;return t.source=function(n){return arguments.length?(e=Tt(n),t):e},t.target=function(e){return arguments.length?(n=Tt(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},Zo.svg.diagonal.radial=function(){var t=Zo.svg.diagonal(),e=Po,n=t.projection;return t.projection=function(t){return arguments.length?n(Oo(e=t)):e},t},Zo.svg.symbol=function(){function t(t,r){return(Nl.get(e.call(this,t,r))||jo)(n.call(this,t,r))}var e=Do,n=$o;return t.type=function(n){return arguments.length?(e=Tt(n),t):e},t.size=function(e){return arguments.length?(n=Tt(e),t):n},t};var Nl=Zo.map({circle:jo,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*El)),n=e*El;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Al),n=e*Al/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Al),n=e*Al/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});Zo.svg.symbolTypes=Nl.keys();var Al=Math.sqrt(3),El=Math.tan(30*La),Rl=[],Ll=0,Il,Pl;Rl.call=ba.call,Rl.empty=ba.empty,Rl.node=ba.node,Rl.size=ba.size,Zo.transition=function(t){return arguments.length?Il?t.transition():t:Ma.transition()},Zo.transition.prototype=Rl,Rl.select=function(t){var e=this.id,n=[],r,i,o;t=C(t);for(var a=-1,s=this.length;++a<s;){n.push(r=[]);for(var l=this[a],u=-1,c=l.length;++u<c;)(o=l[u])&&(i=t.call(o,o.__data__,u,a))?("__data__"in o&&(i.__data__=o.__data__),Uo(i,u,e,o.__transition__[e]),r.push(i)):r.push(null)}return Fo(n,e)},Rl.selectAll=function(t){var e=this.id,n=[],r,i,o,a,s;t=M(t);for(var l=-1,u=this.length;++l<u;)for(var c=this[l],h=-1,f=c.length;++h<f;)if(o=c[h]){s=o.__transition__[e],i=t.call(o,o.__data__,h,l),n.push(r=[]);for(var d=-1,p=i.length;++d<p;)(a=i[d])&&Uo(a,d,e,s),r.push(a)}return Fo(n,e)},Rl.filter=function(t){var e=[],n,r,i;"function"!=typeof t&&(t=P(t));for(var o=0,a=this.length;a>o;o++){e.push(n=[]);for(var r=this[o],s=0,l=r.length;l>s;s++)(i=r[s])&&t.call(i,i.__data__,s,o)&&n.push(i)}return Fo(e,this.id)},Rl.tween=function(t,e){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(t):D(this,null==e?function(e){e.__transition__[n].tween.remove(t)}:function(r){r.__transition__[n].tween.set(t,e)})},Rl.attr=function(t,e){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(t){return null==t?n:(t+="",function(){var e=this.getAttribute(s),n;return e!==t&&(n=a(e,t),function(t){this.setAttribute(s,n(t))})})}function o(t){return null==t?r:(t+="",function(){var e=this.getAttributeNS(s.space,s.local),n;return e!==t&&(n=a(e,t),function(t){this.setAttributeNS(s.space,s.local,n(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?qr:yr,s=Zo.ns.qualify(t);return zo(this,"attr."+t,e,s.local?o:i)},Rl.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=Zo.ns.qualify(t);return this.tween("attr."+t,i.local?r:n)},Rl.style=function(t,e,n){function r(){this.style.removeProperty(t)}function i(e){return null==e?r:(e+="",function(){var r=ea.getComputedStyle(this,null).getPropertyValue(t),i;return r!==e&&(i=yr(r,e),function(e){this.style.setProperty(t,i(e),n)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}return zo(this,"style."+t,e,i)},Rl.styleTween=function(t,e,n){function r(r,i){var o=e.call(this,r,i,ea.getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,r)},Rl.text=function(t){return zo(this,"text",t,qo)},Rl.remove=function(){return this.each("end.transition",function(){var t;this.__transition__.count<2&&(t=this.parentNode)&&t.removeChild(this)})},Rl.ease=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].ease:("function"!=typeof t&&(t=Zo.ease.apply(Zo,arguments)),D(this,function(n){n.__transition__[e].ease=t}))},Rl.delay=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].delay:D(this,"function"==typeof t?function(n,r,i){n.__transition__[e].delay=+t.call(n,n.__data__,r,i)}:(t=+t,function(n){n.__transition__[e].delay=t}))},Rl.duration=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].duration:D(this,"function"==typeof t?function(n,r,i){n.__transition__[e].duration=Math.max(1,t.call(n,n.__data__,r,i))}:(t=Math.max(1,t),function(n){n.__transition__[e].duration=t}))},Rl.each=function(t,e){var n=this.id;if(arguments.length<2){var r=Pl,i=Il;Il=n,D(this,function(e,r,i){Pl=e.__transition__[n],t.call(e,e.__data__,r,i)}),Pl=r,Il=i}else D(this,function(r){var i=r.__transition__[n];(i.event||(i.event=Zo.dispatch("start","end"))).on(t,e)});return this},Rl.transition=function(){for(var t=this.id,e=++Ll,n=[],r,i,o,a,s=0,l=this.length;l>s;s++){n.push(r=[]);for(var i=this[s],u=0,c=i.length;c>u;u++)(o=i[u])&&(a=Object.create(o.__transition__[t]),a.delay+=a.duration,Uo(o,u,e,a)),r.push(o)}return Fo(n,e)},Zo.svg.axis=function(){function t(t){t.each(function(){var t=Zo.select(this),u=this.__chart__||e,c=this.__chart__=e.copy(),h=null==s?c.ticks?c.ticks.apply(c,a):c.domain():s,f=null==l?c.tickFormat?c.tickFormat.apply(c,a):Nt:l,d=t.selectAll(".tick").data(h,c),p=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Ea),g=Zo.transition(d.exit()).style("opacity",Ea).remove(),m=Zo.transition(d.order()).style("opacity",1),v,y=ji(c),x=t.selectAll(".domain").data([0]),b=(x.enter().append("path").attr("class","domain"),Zo.transition(x));p.append("line"),p.append("text");var w=p.select("line"),C=m.select("line"),M=d.select("text").text(f),S=p.select("text"),_=m.select("text");switch(n){case"bottom":v=Ho,w.attr("y2",r),S.attr("y",Math.max(r,0)+o),C.attr("x2",0).attr("y2",r),_.attr("x",0).attr("y",Math.max(r,0)+o),M.attr("dy",".71em").style("text-anchor","middle"),b.attr("d","M"+y[0]+","+i+"V0H"+y[1]+"V"+i);break;case"top":v=Ho,w.attr("y2",-r),S.attr("y",-(Math.max(r,0)+o)),C.attr("x2",0).attr("y2",-r),_.attr("x",0).attr("y",-(Math.max(r,0)+o)),M.attr("dy","0em").style("text-anchor","middle"),b.attr("d","M"+y[0]+","+-i+"V0H"+y[1]+"V"+-i);break;case"left":v=Bo,w.attr("x2",-r),S.attr("x",-(Math.max(r,0)+o)),C.attr("x2",-r).attr("y2",0),_.attr("x",-(Math.max(r,0)+o)).attr("y",0),M.attr("dy",".32em").style("text-anchor","end"),b.attr("d","M"+-i+","+y[0]+"H0V"+y[1]+"H"+-i);break;case"right":v=Bo,w.attr("x2",r),S.attr("x",Math.max(r,0)+o),C.attr("x2",r).attr("y2",0),_.attr("x",Math.max(r,0)+o).attr("y",0),M.attr("dy",".32em").style("text-anchor","start"),b.attr("d","M"+i+","+y[0]+"H0V"+y[1]+"H"+i)}if(c.rangeBand){var k=c,T=k.rangeBand()/2;u=c=function(t){return k(t)+T}}else u.rangeBand?u=c:g.call(v,c);p.call(v,u),m.call(v,c)})}var e=Zo.scale.linear(),n=Ol,r=6,i=6,o=3,a=[10],s=null,l;return t.scale=function(n){return arguments.length?(e=n,t):e},t.orient=function(e){return arguments.length?(n=e in $l?e+"":Ol,t):n},t.ticks=function(){return arguments.length?(a=arguments,t):a},t.tickValues=function(e){return arguments.length?(s=e,t):s},t.tickFormat=function(e){return arguments.length?(l=e,t):l},t.tickSize=function(e){var n=arguments.length;return n?(r=+e,i=+arguments[n-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(i=+e,t):i},t.tickPadding=function(e){return arguments.length?(o=+e,t):o},t.tickSubdivide=function(){return arguments.length&&t},t};var Ol="bottom",$l={top:1,right:1,bottom:1,left:1};Zo.svg.brush=function(){function t(o){o.each(function(){var o=Zo.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),l=o.selectAll(".background").data([0]);l.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),o.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=o.selectAll(".resize").data(p,Nt);u.exit().remove(),u.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Dl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",t.empty()?"none":null);var c=Zo.transition(o),h=Zo.transition(l),f;a&&(f=ji(a),h.attr("x",f[0]).attr("width",f[1]-f[0]),n(c)),s&&(f=ji(s),h.attr("y",f[0]).attr("height",f[1]-f[0]),r(c)),e(c)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+l[+/e$/.test(t)]+","+u[+/^s/.test(t)]+")"})}function n(t){t.select(".extent").attr("x",l[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function r(t){t.select(".extent").attr("y",u[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",u[1]-u[0])}function i(){function i(){32==Zo.event.keyCode&&(k||(N=null,A[0]-=l[1],A[1]-=u[1],k=2),y())}function p(){32==Zo.event.keyCode&&2==k&&(A[0]+=l[1],A[1]+=u[1],k=0,y())}function g(){var t=Zo.mouse(x),i=!1;E&&(t[0]+=E[0],t[1]+=E[1]),k||(Zo.event.altKey?(N||(N=[(l[0]+l[1])/2,(u[0]+u[1])/2]),A[0]=l[+(t[0]<N[0])],A[1]=u[+(t[1]<N[1])]):N=null),S&&m(t,a,0)&&(n(C),i=!0),_&&m(t,s,1)&&(r(C),i=!0),i&&(e(C),w({type:"brush",mode:k?"move":"resize"}))}function m(t,e,n){var r=ji(e),i=r[0],o=r[1],a=A[n],s=n?u:l,p=s[1]-s[0],g,m;return k&&(i-=a,o-=p+a),g=(n?d:f)?Math.max(i,Math.min(o,t[n])):t[n],k?m=(g+=a)+p:(N&&(a=Math.max(i,Math.min(o,2*N[n]-g))),g>a?(m=g,g=a):m=a),s[0]!=g||s[1]!=m?(n?h=null:c=null,s[0]=g,s[1]=m,!0):void 0}function v(){g(),C.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),Zo.select("body").style("cursor",null),R.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),T(),w({type:"brushend"})}var x=this,b=Zo.select(Zo.event.target),w=o.of(x,arguments),C=Zo.select(x),M=b.datum(),S=!/^(n|s)$/.test(M)&&a,_=!/^(e|w)$/.test(M)&&s,k=b.classed("extent"),T=B(),N,A=Zo.mouse(x),E,R=Zo.select(ea).on("keydown.brush",i).on("keyup.brush",p);if(Zo.event.changedTouches?R.on("touchmove.brush",g).on("touchend.brush",v):R.on("mousemove.brush",g).on("mouseup.brush",v),C.interrupt().selectAll("*").interrupt(),k)A[0]=l[0]-A[0],A[1]=u[0]-A[1];else if(M){var L=+/w$/.test(M),I=+/^n/.test(M);E=[l[1-L]-A[0],u[1-I]-A[1]],A[0]=l[L],A[1]=u[I]}else Zo.event.altKey&&(N=A.slice());C.style("pointer-events","none").selectAll(".resize").style("display",null),Zo.select("body").style("cursor",b.style("cursor")),w({type:"brushstart"}),g()}var o=b(t,"brushstart","brush","brushend"),a=null,s=null,l=[0,0],u=[0,0],c,h,f=!0,d=!0,p=jl[0];return t.event=function(t){t.each(function(){var t=o.of(this,arguments),e={x:l,y:u,i:c,j:h},n=this.__chart__||e;this.__chart__=e,Il?Zo.select(this).transition().each("start.brush",function(){c=n.i,h=n.j,l=n.x,u=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=xr(l,e.x),r=xr(u,e.y);return c=h=null,function(i){l=e.x=n(i),u=e.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){c=e.i,h=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(a=e,p=jl[!a<<1|!s],t):a},t.y=function(e){return arguments.length?(s=e,p=jl[!a<<1|!s],t):s},t.clamp=function(e){return arguments.length?(a&&s?(f=!!e[0],d=!!e[1]):a?f=!!e:s&&(d=!!e),t):a&&s?[f,d]:a?f:s?d:null},t.extent=function(e){var n,r,i,o,f;return arguments.length?(a&&(n=e[0],r=e[1],s&&(n=n[0],r=r[0]),c=[n,r],a.invert&&(n=a(n),r=a(r)),n>r&&(f=n,n=r,r=f),(n!=l[0]||r!=l[1])&&(l=[n,r])),s&&(i=e[0],o=e[1],a&&(i=i[1],o=o[1]),h=[i,o],s.invert&&(i=s(i),o=s(o)),i>o&&(f=i,i=o,o=f),(i!=u[0]||o!=u[1])&&(u=[i,o])),t):(a&&(c?(n=c[0],r=c[1]):(n=l[0],r=l[1],a.invert&&(n=a.invert(n),r=a.invert(r)),n>r&&(f=n,n=r,r=f))),s&&(h?(i=h[0],o=h[1]):(i=u[0],o=u[1],s.invert&&(i=s.invert(i),o=s.invert(o)),i>o&&(f=i,i=o,o=f))),a&&s?[[n,i],[r,o]]:a?[n,r]:s&&[i,o])},t.clear=function(){return t.empty()||(l=[0,0],u=[0,0],c=h=null),t},t.empty=function(){return!!a&&l[0]==l[1]||!!s&&u[0]==u[1]},Zo.rebind(t,o,"on")};var Dl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},jl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Fl=is.format=cs.timeFormat,zl=Fl.utc,ql=zl("%Y-%m-%dT%H:%M:%S.%LZ");Fl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Vo:ql,Vo.parse=function(t){
var e=new Date(t);return isNaN(e)?null:e},Vo.toString=ql.toString,is.second=zt(function(t){return new os(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),is.seconds=is.second.range,is.seconds.utc=is.second.utc.range,is.minute=zt(function(t){return new os(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),is.minutes=is.minute.range,is.minutes.utc=is.minute.utc.range,is.hour=zt(function(t){var e=t.getTimezoneOffset()/60;return new os(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),is.hours=is.hour.range,is.hours.utc=is.hour.utc.range,is.month=zt(function(t){return t=is.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),is.months=is.month.range,is.months.utc=is.month.utc.range;var Ul=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Hl=[[is.second,1],[is.second,5],[is.second,15],[is.second,30],[is.minute,1],[is.minute,5],[is.minute,15],[is.minute,30],[is.hour,1],[is.hour,3],[is.hour,6],[is.hour,12],[is.day,1],[is.day,2],[is.week,1],[is.month,1],[is.month,3],[is.year,1]],Bl=Fl.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Ne]]),Vl={range:function(t,e,n){return Zo.range(Math.ceil(t/n)*n,+e,n).map(Go)},floor:Nt,ceil:Nt};Hl.year=is.year,is.scale=function(){return Jo(Zo.scale.linear(),Hl,Bl)};var Jl=Hl.map(function(t){return[t[0].utc,t[1]]}),Gl=zl.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Ne]]);Jl.year=is.year.utc,is.scale.utc=function(){return Jo(Zo.scale.linear(),Jl,Gl)},Zo.text=At(function(t){return t.responseText}),Zo.json=function(t,e){return Et(t,"application/json",Wo,e)},Zo.html=function(t,e){return Et(t,"text/html",Xo,e)},Zo.xml=At(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(Zo):"object"==typeof module&&module.exports?module.exports=Zo:this.d3=Zo}(),function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=tt.type(t);return"function"===n||tt.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function r(t,e,n){if(tt.isFunction(e))return tt.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return tt.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(lt.test(e))return tt.filter(e,t,n);e=tt.filter(e,t)}return tt.grep(t,function(t){return G.call(e,t)>=0!==n})}function i(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e=gt[t]={};return tt.each(t.match(pt)||[],function(t,n){e[n]=!0}),e}function a(){Q.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1),tt.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=tt.expando+Math.random()}function l(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(wt,"-$1").toLowerCase(),n=t.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:bt.test(n)?tt.parseJSON(n):n}catch(i){}xt.set(t,e,n)}else n=void 0;return n}function u(){return!0}function c(){return!1}function h(){try{return Q.activeElement}catch(t){}}function f(t,e){return tt.nodeName(t,"table")&&tt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function d(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function p(t){var e=Dt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function g(t,e){for(var n=0,r=t.length;r>n;n++)yt.set(t[n],"globalEval",!e||yt.get(e[n],"globalEval"))}function m(t,e){var n,r,i,o,a,s,l,u;if(1===e.nodeType){if(yt.hasData(t)&&(o=yt.access(t),a=yt.set(e,o),u=o.events)){delete a.handle,a.events={};for(i in u)for(n=0,r=u[i].length;r>n;n++)tt.event.add(e,i,u[i][n])}xt.hasData(t)&&(s=xt.access(t),l=tt.extend({},s),xt.set(e,l))}}function v(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&tt.nodeName(t,e)?tt.merge([t],n):n}function y(t,e){var n=e.nodeName.toLowerCase();"input"===n&&_t.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function x(e,n){var r,i=tt(n.createElement(e)).appendTo(n.body),o=t.getDefaultComputedStyle&&(r=t.getDefaultComputedStyle(i[0]))?r.display:tt.css(i[0],"display");return i.detach(),o}function b(t){var e=Q,n=qt[t];return n||(n=x(t,e),"none"!==n&&n||(zt=(zt||tt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=zt[0].contentDocument,e.write(),e.close(),n=x(t,e),zt.detach()),qt[t]=n),n}function w(t,e,n){var r,i,o,a,s=t.style;return n=n||Bt(t),n&&(a=n.getPropertyValue(e)||n[e]),n&&(""!==a||tt.contains(t.ownerDocument,t)||(a=tt.style(t,e)),Ht.test(a)&&Ut.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function C(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function M(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),r=e,i=Zt.length;i--;)if(e=Zt[i]+n,e in t)return e;return r}function S(t,e,n){var r=Jt.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function _(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=tt.css(t,n+Mt[o],!0,i)),r?("content"===n&&(a-=tt.css(t,"padding"+Mt[o],!0,i)),"margin"!==n&&(a-=tt.css(t,"border"+Mt[o]+"Width",!0,i))):(a+=tt.css(t,"padding"+Mt[o],!0,i),"padding"!==n&&(a+=tt.css(t,"border"+Mt[o]+"Width",!0,i)));return a}function k(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=Bt(t),a="border-box"===tt.css(t,"boxSizing",!1,o);if(0>=i||null==i){if(i=w(t,e,o),(0>i||null==i)&&(i=t.style[e]),Ht.test(i))return i;r=a&&(Y.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+_(t,e,n||(a?"border":"content"),r,o)+"px"}function T(t,e){for(var n,r,i,o=[],a=0,s=t.length;s>a;a++)r=t[a],r.style&&(o[a]=yt.get(r,"olddisplay"),n=r.style.display,e?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&St(r)&&(o[a]=yt.access(r,"olddisplay",b(r.nodeName)))):(i=St(r),"none"===n&&i||yt.set(r,"olddisplay",i?n:tt.css(r,"display"))));for(a=0;s>a;a++)r=t[a],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[a]||"":"none"));return t}function N(t,e,n,r,i){return new N.prototype.init(t,e,n,r,i)}function A(){return setTimeout(function(){Yt=void 0}),Yt=tt.now()}function E(t,e){var n,r=0,i={height:t};for(e=e?1:0;4>r;r+=2-e)n=Mt[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function R(t,e,n){for(var r,i=(re[e]||[]).concat(re["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,e,t))return r}function L(t,e,n){var r,i,o,a,s,l,u,c,h=this,f={},d=t.style,p=t.nodeType&&St(t),g=yt.get(t,"fxshow");n.queue||(s=tt._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,tt.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],u=tt.css(t,"display"),c="none"===u?yt.get(t,"olddisplay")||b(t.nodeName):u,"inline"===c&&"none"===tt.css(t,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in e)if(i=e[r],Kt.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;p=!0}f[r]=g&&g[r]||tt.style(t,r)}else u=void 0;if(tt.isEmptyObject(f))"inline"===("none"===u?b(t.nodeName):u)&&(d.display=u);else{g?"hidden"in g&&(p=g.hidden):g=yt.access(t,"fxshow",{}),o&&(g.hidden=!p),p?tt(t).show():h.done(function(){tt(t).hide()}),h.done(function(){var e;yt.remove(t,"fxshow");for(e in f)tt.style(t,e,f[e])});for(r in f)a=R(p?g[r]:0,r,h),r in g||(g[r]=a.start,p&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function I(t,e){var n,r,i,o,a;for(n in t)if(r=tt.camelCase(n),i=e[r],o=t[n],tt.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),a=tt.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete t[r];for(n in o)n in t||(t[n]=o[n],e[n]=i)}else e[r]=i}function P(t,e,n){var r,i,o=0,a=ne.length,s=tt.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var e=Yt||A(),n=Math.max(0,u.startTime+u.duration-e),r=n/u.duration||0,o=1-r,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(o);return s.notifyWith(t,[u,o,n]),1>o&&l?n:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:tt.extend({},e),opts:tt.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Yt||A(),duration:n.duration,tweens:[],createTween:function(e,n){var r=tt.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(r),r},stop:function(e){var n=0,r=e?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return e?s.resolveWith(t,[u,e]):s.rejectWith(t,[u,e]),this}}),c=u.props;for(I(c,u.opts.specialEasing);a>o;o++)if(r=ne[o].call(u,t,c,u.opts))return r;return tt.map(c,R,u),tt.isFunction(u.opts.start)&&u.opts.start.call(t,u),tt.fx.timer(tt.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function O(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(pt)||[];if(tt.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function D(t,e,n,r){function i(s){var l;return o[s]=!0,tt.each(t[s]||[],function(t,s){var u=s(e,n,r);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(e.dataTypes.unshift(u),i(u),!1)}),l}var o={},a=t===Ce;return i(e.dataTypes[0])||!o["*"]&&i("*")}function j(t,e){var n,r,i=tt.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&tt.extend(!0,t,r),t}function F(t,e,n){for(var r,i,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function z(t,e,n,r){var i,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[i]:u[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(h){return{state:"parsererror",error:a?h:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function q(t,e,n,r){var i;if(tt.isArray(e))tt.each(e,function(e,i){n||ke.test(t)?r(t,i):q(t+"["+("object"==typeof i?e:"")+"]",i,n,r)});else if(n||"object"!==tt.type(e))r(t,e);else for(i in e)q(t+"["+i+"]",e[i],n,r)}function U(t){return tt.isWindow(t)?t:9===t.nodeType&&t.defaultView}var H=[],B=H.slice,V=H.concat,J=H.push,G=H.indexOf,W={},X=W.toString,Z=W.hasOwnProperty,Y={},Q=t.document,K="2.1.1",tt=function(t,e){return new tt.fn.init(t,e)},et=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,nt=/^-ms-/,rt=/-([\da-z])/gi,it=function(t,e){return e.toUpperCase()};tt.fn=tt.prototype={jquery:K,constructor:tt,selector:"",length:0,toArray:function(){return B.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:B.call(this)},pushStack:function(t){var e=tt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return tt.each(this,t,e)},map:function(t){return this.pushStack(tt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(B.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:H.sort,splice:H.splice},tt.extend=tt.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||tt.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],r=t[e],a!==r&&(u&&r&&(tt.isPlainObject(r)||(i=tt.isArray(r)))?(i?(i=!1,o=n&&tt.isArray(n)?n:[]):o=n&&tt.isPlainObject(n)?n:{},a[e]=tt.extend(u,o,r)):void 0!==r&&(a[e]=r));return a},tt.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===tt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!tt.isArray(t)&&t-parseFloat(t)>=0},isPlainObject:function(t){return"object"!==tt.type(t)||t.nodeType||tt.isWindow(t)?!1:t.constructor&&!Z.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?W[X.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=tt.trim(t),t&&(1===t.indexOf("use strict")?(e=Q.createElement("script"),e.text=t,Q.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(nt,"ms-").replace(rt,it)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,r){var i,o=0,a=t.length,s=n(t);if(r){if(s)for(;a>o&&(i=e.apply(t[o],r),i!==!1);o++);else for(o in t)if(i=e.apply(t[o],r),i===!1)break}else if(s)for(;a>o&&(i=e.call(t[o],o,t[o]),i!==!1);o++);else for(o in t)if(i=e.call(t[o],o,t[o]),i===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(et,"")},makeArray:function(t,e){var r=e||[];return null!=t&&(n(Object(t))?tt.merge(r,"string"==typeof t?[t]:t):J.call(r,t)),r},inArray:function(t,e,n){return null==e?-1:G.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;n>r;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r,i=[],o=0,a=t.length,s=!n;a>o;o++)r=!e(t[o],o),r!==s&&i.push(t[o]);return i},map:function(t,e,r){var i,o=0,a=t.length,s=n(t),l=[];if(s)for(;a>o;o++)i=e(t[o],o,r),null!=i&&l.push(i);else for(o in t)i=e(t[o],o,r),null!=i&&l.push(i);return V.apply([],l)},guid:1,proxy:function(t,e){var n,r,i;return"string"==typeof e&&(n=t[e],e=t,t=n),tt.isFunction(t)?(r=B.call(arguments,2),i=function(){return t.apply(e||this,r.concat(B.call(arguments)))},i.guid=t.guid=t.guid||tt.guid++,i):void 0},now:Date.now,support:Y}),tt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){W["[object "+e+"]"]=e.toLowerCase()});var ot=function(t){function e(t,e,n,r){var i,o,a,s,l,u,h,d,p,g;if((e?e.ownerDocument||e:q)!==L&&R(e),e=e||L,n=n||[],!t||"string"!=typeof t)return n;if(1!==(s=e.nodeType)&&9!==s)return[];if(P&&!r){if(i=xt.exec(t))if(a=i[1]){if(9===s){if(o=e.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(a))&&F(e,o)&&o.id===a)return n.push(o),n}else{if(i[2])return tt.apply(n,e.getElementsByTagName(t)),n;if((a=i[3])&&w.getElementsByClassName&&e.getElementsByClassName)return tt.apply(n,e.getElementsByClassName(a)),n}if(w.qsa&&(!O||!O.test(t))){if(d=h=z,p=e,g=9===s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(u=_(t),(h=e.getAttribute("id"))?d=h.replace(wt,"\\$&"):e.setAttribute("id",d),d="[id='"+d+"'] ",l=u.length;l--;)u[l]=d+f(u[l]);p=bt.test(t)&&c(e.parentNode)||e,g=u.join(",")}if(g)try{return tt.apply(n,p.querySelectorAll(g)),n}catch(m){}finally{h||e.removeAttribute("id")}}}return T(t.replace(ut,"$1"),e,n,r)}function n(){function t(n,r){return e.push(n+" ")>C.cacheLength&&delete t[e.shift()],t[n+" "]=r}var e=[];return t}function r(t){return t[z]=!0,t}function i(t){var e=L.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),r=t.length;r--;)C.attrHandle[n[r]]=e}function a(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||X)-(~t.sourceIndex||X);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return r(function(e){return e=+e,r(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function c(t){return t&&typeof t.getElementsByTagName!==W&&t}function h(){}function f(t){for(var e=0,n=t.length,r="";n>e;e++)r+=t[e].value;return r}function d(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=H++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,a){var s,l,u=[U,o];if(a){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,a))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if(l=e[z]||(e[z]={}),(s=l[r])&&s[0]===U&&s[1]===o)return u[2]=s[2];if(l[r]=u,u[2]=t(e,n,a))return!0}}}function p(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function g(t,n,r){for(var i=0,o=n.length;o>i;i++)e(t,n[i],r);return r}function m(t,e,n,r,i){for(var o,a=[],s=0,l=t.length,u=null!=e;l>s;s++)(o=t[s])&&(!n||n(o,r,i))&&(a.push(o),u&&e.push(s));return a}function v(t,e,n,i,o,a){return i&&!i[z]&&(i=v(i)),o&&!o[z]&&(o=v(o,a)),r(function(r,a,s,l){var u,c,h,f=[],d=[],p=a.length,v=r||g(e||"*",s.nodeType?[s]:s,[]),y=!t||!r&&e?v:m(v,f,t,s,l),x=n?o||(r?t:p||i)?[]:a:y;if(n&&n(y,x,s,l),i)for(u=m(x,d),i(u,[],s,l),c=u.length;c--;)(h=u[c])&&(x[d[c]]=!(y[d[c]]=h));if(r){if(o||t){if(o){for(u=[],c=x.length;c--;)(h=x[c])&&u.push(y[c]=h);o(null,x=[],u,l)}for(c=x.length;c--;)(h=x[c])&&(u=o?nt.call(r,h):f[c])>-1&&(r[u]=!(a[u]=h))}}else x=m(x===a?x.splice(p,x.length):x),o?o(null,a,x,l):tt.apply(a,x)})}function y(t){for(var e,n,r,i=t.length,o=C.relative[t[0].type],a=o||C.relative[" "],s=o?1:0,l=d(function(t){return t===e},a,!0),u=d(function(t){return nt.call(e,t)>-1},a,!0),c=[function(t,n,r){return!o&&(r||n!==N)||((e=n).nodeType?l(t,n,r):u(t,n,r))}];i>s;s++)if(n=C.relative[t[s].type])c=[d(p(c),n)];else{if(n=C.filter[t[s].type].apply(null,t[s].matches),n[z]){for(r=++s;i>r&&!C.relative[t[r].type];r++);return v(s>1&&p(c),s>1&&f(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(ut,"$1"),n,r>s&&y(t.slice(s,r)),i>r&&y(t=t.slice(r)),i>r&&f(t))}c.push(n)}return p(c)}function x(t,n){var i=n.length>0,o=t.length>0,a=function(r,a,s,l,u){var c,h,f,d=0,p="0",g=r&&[],v=[],y=N,x=r||o&&C.find.TAG("*",u),b=U+=null==y?1:Math.random()||.1,w=x.length;for(u&&(N=a!==L&&a);p!==w&&null!=(c=x[p]);p++){if(o&&c){for(h=0;f=t[h++];)if(f(c,a,s)){l.push(c);break}u&&(U=b)}i&&((c=!f&&c)&&d--,r&&g.push(c))}if(d+=p,i&&p!==d){for(h=0;f=n[h++];)f(g,v,a,s);if(r){if(d>0)for(;p--;)g[p]||v[p]||(v[p]=Q.call(l));v=m(v)}tt.apply(l,v),u&&!r&&v.length>0&&d+n.length>1&&e.uniqueSort(l)}return u&&(U=b,N=y),g};return i?r(a):a}var b,w,C,M,S,_,k,T,N,A,E,R,L,I,P,O,D,j,F,z="sizzle"+-new Date,q=t.document,U=0,H=0,B=n(),V=n(),J=n(),G=function(t,e){return t===e&&(E=!0),0},W="undefined",X=1<<31,Z={}.hasOwnProperty,Y=[],Q=Y.pop,K=Y.push,tt=Y.push,et=Y.slice,nt=Y.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},rt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",at=ot.replace("w","w#"),st="\\["+it+"*("+ot+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+at+"))|)"+it+"*\\]",lt=":("+ot+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+st+")*)|.*)\\)|)",ut=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ct=new RegExp("^"+it+"*,"+it+"*"),ht=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ft=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),dt=new RegExp(lt),pt=new RegExp("^"+at+"$"),gt={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot.replace("w","w*")+")"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+lt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+rt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,vt=/^h\d$/i,yt=/^[^{]+\{\s*\[native \w/,xt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,wt=/'|\\/g,Ct=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),Mt=function(t,e,n){var r="0x"+e-65536;return r!==r||n?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{tt.apply(Y=et.call(q.childNodes),q.childNodes),Y[q.childNodes.length].nodeType}catch(St){tt={apply:Y.length?function(t,e){K.apply(t,et.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}w=e.support={},S=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},R=e.setDocument=function(t){var e,n=t?t.ownerDocument||t:q,r=n.defaultView;return n!==L&&9===n.nodeType&&n.documentElement?(L=n,I=n.documentElement,P=!S(n),r&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",function(){R()},!1):r.attachEvent&&r.attachEvent("onunload",function(){R()})),w.attributes=i(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=i(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=yt.test(n.getElementsByClassName)&&i(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),w.getById=i(function(t){return I.appendChild(t).id=z,!n.getElementsByName||!n.getElementsByName(z).length}),w.getById?(C.find.ID=function(t,e){if(typeof e.getElementById!==W&&P){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(t){var e=t.replace(Ct,Mt);return function(t){return t.getAttribute("id")===e}}):(delete C.find.ID,C.filter.ID=function(t){var e=t.replace(Ct,Mt);return function(t){var n=typeof t.getAttributeNode!==W&&t.getAttributeNode("id");return n&&n.value===e}}),C.find.TAG=w.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==W?e.getElementsByTagName(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},C.find.CLASS=w.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==W&&P?e.getElementsByClassName(t):void 0},D=[],O=[],(w.qsa=yt.test(n.querySelectorAll))&&(i(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&O.push("[*^$]="+it+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||O.push("\\["+it+"*(?:value|"+rt+")"),t.querySelectorAll(":checked").length||O.push(":checked")}),i(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&O.push("name"+it+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),O.push(",.*:")})),(w.matchesSelector=yt.test(j=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&i(function(t){w.disconnectedMatch=j.call(t,"div"),j.call(t,"[s!='']:x"),D.push("!=",lt)}),O=O.length&&new RegExp(O.join("|")),D=D.length&&new RegExp(D.join("|")),e=yt.test(I.compareDocumentPosition),F=e||yt.test(I.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},G=e?function(t,e){if(t===e)return E=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r?r:(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&r||!w.sortDetached&&e.compareDocumentPosition(t)===r?t===n||t.ownerDocument===q&&F(q,t)?-1:e===n||e.ownerDocument===q&&F(q,e)?1:A?nt.call(A,t)-nt.call(A,e):0:4&r?-1:1)}:function(t,e){if(t===e)return E=!0,0;var r,i=0,o=t.parentNode,s=e.parentNode,l=[t],u=[e];if(!o||!s)return t===n?-1:e===n?1:o?-1:s?1:A?nt.call(A,t)-nt.call(A,e):0;if(o===s)return a(t,e);for(r=t;r=r.parentNode;)l.unshift(r);for(r=e;r=r.parentNode;)u.unshift(r);for(;l[i]===u[i];)i++;return i?a(l[i],u[i]):l[i]===q?-1:u[i]===q?1:0},n):L},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==L&&R(t),n=n.replace(ft,"='$1']"),w.matchesSelector&&P&&(!D||!D.test(n))&&(!O||!O.test(n)))try{var r=j.call(t,n);if(r||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(i){}return e(n,L,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==L&&R(t),F(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==L&&R(t);var n=C.attrHandle[e.toLowerCase()],r=n&&Z.call(C.attrHandle,e.toLowerCase())?n(t,e,!P):void 0;return void 0!==r?r:w.attributes||!P?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],r=0,i=0;if(E=!w.detectDuplicates,A=!w.sortStable&&t.slice(0),t.sort(G),E){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return A=null,t},M=e.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=M(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=M(e);return n},C=e.selectors={cacheLength:50,createPseudo:r,match:gt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Ct,Mt),t[3]=(t[3]||t[4]||t[5]||"").replace(Ct,Mt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return gt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&dt.test(n)&&(e=_(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Ct,Mt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=B[t+" "];return e||(e=new RegExp("(^|"+it+")"+t+"("+it+"|$)"))&&B(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==W&&t.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(i){var o=e.attr(i,t);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var u,c,h,f,d,p,g=o!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s;if(m){if(o){for(;g;){for(h=e;h=h[g];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&y){for(c=m[z]||(m[z]={}),u=c[t]||[],d=u[0]===U&&u[1],f=u[0]===U&&u[2],h=d&&m.childNodes[d];h=++d&&h&&h[g]||(f=d=0)||p.pop();)if(1===h.nodeType&&++f&&h===e){c[t]=[U,d,f];break}}else if(y&&(u=(e[z]||(e[z]={}))[t])&&u[0]===U)f=u[1];else for(;(h=++d&&h&&h[g]||(f=d=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++f||(y&&((h[z]||(h[z]={}))[t]=[U,f]),h!==e)););return f-=i,f===r||f%r===0&&f/r>=0}}},PSEUDO:function(t,n){var i,o=C.pseudos[t]||C.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[z]?o(n):o.length>1?(i=[t,t,"",n],C.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var r,i=o(t,n),a=i.length;a--;)r=nt.call(t,i[a]),t[r]=!(e[r]=i[a])}):function(t){return o(t,0,i)}):o}},pseudos:{not:r(function(t){var e=[],n=[],i=k(t.replace(ut,"$1"));return i[z]?r(function(t,e,n,r){for(var o,a=i(t,null,r,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),!n.pop()}}),has:r(function(t){return function(n){return e(t,n).length>0}}),contains:r(function(t){return function(e){return(e.textContent||e.innerText||M(e)).indexOf(t)>-1}}),lang:r(function(t){return pt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(Ct,Mt).toLowerCase(),function(e){var n;do if(n=P?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===I},focus:function(t){return t===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return vt.test(t.nodeName)},input:function(t){return mt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var r=0>n?n+e:n;--r>=0;)t.push(r);return t}),gt:u(function(t,e,n){for(var r=0>n?n+e:n;++r<e;)t.push(r);return t})}},C.pseudos.nth=C.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[b]=s(b);
for(b in{submit:!0,reset:!0})C.pseudos[b]=l(b);return h.prototype=C.filters=C.pseudos,C.setFilters=new h,_=e.tokenize=function(t,n){var r,i,o,a,s,l,u,c=V[t+" "];if(c)return n?0:c.slice(0);for(s=t,l=[],u=C.preFilter;s;){(!r||(i=ct.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=ht.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ut," ")}),s=s.slice(r.length));for(a in C.filter)!(i=gt[a].exec(s))||u[a]&&!(i=u[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?e.error(t):V(t,l).slice(0)},k=e.compile=function(t,e){var n,r=[],i=[],o=J[t+" "];if(!o){for(e||(e=_(t)),n=e.length;n--;)o=y(e[n]),o[z]?r.push(o):i.push(o);o=J(t,x(i,r)),o.selector=t}return o},T=e.select=function(t,e,n,r){var i,o,a,s,l,u="function"==typeof t&&t,h=!r&&_(t=u.selector||t);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===e.nodeType&&P&&C.relative[o[1].type]){if(e=(C.find.ID(a.matches[0].replace(Ct,Mt),e)||[])[0],!e)return n;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=gt.needsContext.test(t)?0:o.length;i--&&(a=o[i],!C.relative[s=a.type]);)if((l=C.find[s])&&(r=l(a.matches[0].replace(Ct,Mt),bt.test(o[0].type)&&c(e.parentNode)||e))){if(o.splice(i,1),t=r.length&&f(o),!t)return tt.apply(n,r),n;break}}return(u||k(t,h))(r,e,!P,n,bt.test(t)&&c(e.parentNode)||e),n},w.sortStable=z.split("").sort(G).join("")===z,w.detectDuplicates=!!E,R(),w.sortDetached=i(function(t){return 1&t.compareDocumentPosition(L.createElement("div"))}),i(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&i(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),i(function(t){return null==t.getAttribute("disabled")})||o(rt,function(t,e,n){var r;return n?void 0:t[e]===!0?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),e}(t);tt.find=ot,tt.expr=ot.selectors,tt.expr[":"]=tt.expr.pseudos,tt.unique=ot.uniqueSort,tt.text=ot.getText,tt.isXMLDoc=ot.isXML,tt.contains=ot.contains;var at=tt.expr.match.needsContext,st=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,lt=/^.[^:#\[\.,]*$/;tt.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?tt.find.matchesSelector(r,t)?[r]:[]:tt.find.matches(t,tt.grep(e,function(t){return 1===t.nodeType}))},tt.fn.extend({find:function(t){var e,n=this.length,r=[],i=this;if("string"!=typeof t)return this.pushStack(tt(t).filter(function(){for(e=0;n>e;e++)if(tt.contains(i[e],this))return!0}));for(e=0;n>e;e++)tt.find(t,i[e],r);return r=this.pushStack(n>1?tt.unique(r):r),r.selector=this.selector?this.selector+" "+t:t,r},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&at.test(t)?tt(t):t||[],!1).length}});var ut,ct=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ht=tt.fn.init=function(t,e){var n,r;if(!t)return this;if("string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:ct.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||ut).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof tt?e[0]:e,tt.merge(this,tt.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:Q,!0)),st.test(n[1])&&tt.isPlainObject(e))for(n in e)tt.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return r=Q.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=Q,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):tt.isFunction(t)?"undefined"!=typeof ut.ready?ut.ready(t):t(tt):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),tt.makeArray(t,this))};ht.prototype=tt.fn,ut=tt(Q);var ft=/^(?:parents|prev(?:Until|All))/,dt={children:!0,contents:!0,next:!0,prev:!0};tt.extend({dir:function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&tt(t).is(n))break;r.push(t)}return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),tt.fn.extend({has:function(t){var e=tt(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(tt.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,r=0,i=this.length,o=[],a=at.test(t)||"string"!=typeof t?tt(t,e||this.context):0;i>r;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&tt.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?tt.unique(o):o)},index:function(t){return t?"string"==typeof t?G.call(tt(t),this[0]):G.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(tt.unique(tt.merge(this.get(),tt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),tt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return tt.dir(t,"parentNode")},parentsUntil:function(t,e,n){return tt.dir(t,"parentNode",n)},next:function(t){return i(t,"nextSibling")},prev:function(t){return i(t,"previousSibling")},nextAll:function(t){return tt.dir(t,"nextSibling")},prevAll:function(t){return tt.dir(t,"previousSibling")},nextUntil:function(t,e,n){return tt.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return tt.dir(t,"previousSibling",n)},siblings:function(t){return tt.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return tt.sibling(t.firstChild)},contents:function(t){return t.contentDocument||tt.merge([],t.childNodes)}},function(t,e){tt.fn[t]=function(n,r){var i=tt.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=tt.filter(r,i)),this.length>1&&(dt[t]||tt.unique(i),ft.test(t)&&i.reverse()),this.pushStack(i)}});var pt=/\S+/g,gt={};tt.Callbacks=function(t){t="string"==typeof t?gt[t]||o(t):tt.extend({},t);var e,n,r,i,a,s,l=[],u=!t.once&&[],c=function(o){for(e=t.memory&&o,n=!0,s=i||0,i=0,a=l.length,r=!0;l&&a>s;s++)if(l[s].apply(o[0],o[1])===!1&&t.stopOnFalse){e=!1;break}r=!1,l&&(u?u.length&&c(u.shift()):e?l=[]:h.disable())},h={add:function(){if(l){var n=l.length;!function o(e){tt.each(e,function(e,n){var r=tt.type(n);"function"===r?t.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),r?a=l.length:e&&(i=n,c(e))}return this},remove:function(){return l&&tt.each(arguments,function(t,e){for(var n;(n=tt.inArray(e,l,n))>-1;)l.splice(n,1),r&&(a>=n&&a--,s>=n&&s--)}),this},has:function(t){return t?tt.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=u=e=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,e||h.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!l||n&&!u||(e=e||[],e=[t,e.slice?e.slice():e],r?u.push(e):c(e)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},tt.extend({Deferred:function(t){var e=[["resolve","done",tt.Callbacks("once memory"),"resolved"],["reject","fail",tt.Callbacks("once memory"),"rejected"],["notify","progress",tt.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return tt.Deferred(function(n){tt.each(e,function(e,o){var a=tt.isFunction(t[e])&&t[e];i[o[1]](function(){var t=a&&a.apply(this,arguments);t&&tt.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?tt.extend(t,r):r}},i={};return r.pipe=r.then,tt.each(e,function(t,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e=0,n=B.call(arguments),r=n.length,i=1!==r||t&&tt.isFunction(t.promise)?r:0,o=1===i?t:tt.Deferred(),a=function(t,e,n){return function(r){e[t]=this,n[t]=arguments.length>1?B.call(arguments):r,n===s?o.notifyWith(e,n):--i||o.resolveWith(e,n)}},s,l,u;if(r>1)for(s=new Array(r),l=new Array(r),u=new Array(r);r>e;e++)n[e]&&tt.isFunction(n[e].promise)?n[e].promise().done(a(e,u,n)).fail(o.reject).progress(a(e,l,s)):--i;return i||o.resolveWith(u,n),o.promise()}});var mt;tt.fn.ready=function(t){return tt.ready.promise().done(t),this},tt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?tt.readyWait++:tt.ready(!0)},ready:function(t){(t===!0?--tt.readyWait:tt.isReady)||(tt.isReady=!0,t!==!0&&--tt.readyWait>0||(mt.resolveWith(Q,[tt]),tt.fn.triggerHandler&&(tt(Q).triggerHandler("ready"),tt(Q).off("ready"))))}}),tt.ready.promise=function(e){return mt||(mt=tt.Deferred(),"complete"===Q.readyState?setTimeout(tt.ready):(Q.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1))),mt.promise(e)},tt.ready.promise();var vt=tt.access=function(t,e,n,r,i,o,a){var s=0,l=t.length,u=null==n;if("object"===tt.type(n)){i=!0;for(s in n)tt.access(t,e,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,tt.isFunction(r)||(a=!0),u&&(a?(e.call(t,r),e=null):(u=e,e=function(t,e,n){return u.call(tt(t),n)})),e))for(;l>s;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:u?e.call(t):l?e(t[0],n):o};tt.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},s.uid=1,s.accepts=tt.acceptData,s.prototype={key:function(t){if(!s.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=s.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(r){e[this.expando]=n,tt.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var r,i=this.key(t),o=this.cache[i];if("string"==typeof e)o[e]=n;else if(tt.isEmptyObject(o))tt.extend(this.cache[i],e);else for(r in e)o[r]=e[r];return o},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var r;return void 0===e||e&&"string"==typeof e&&void 0===n?(r=this.get(t,e),void 0!==r?r:this.get(t,tt.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r,i,o=this.key(t),a=this.cache[o];if(void 0===e)this.cache[o]={};else{tt.isArray(e)?r=e.concat(e.map(tt.camelCase)):(i=tt.camelCase(e),e in a?r=[e,i]:(r=i,r=r in a?[r]:r.match(pt)||[])),n=r.length;for(;n--;)delete a[r[n]]}},hasData:function(t){return!tt.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var yt=new s,xt=new s,bt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,wt=/([A-Z])/g;tt.extend({hasData:function(t){return xt.hasData(t)||yt.hasData(t)},data:function(t,e,n){return xt.access(t,e,n)},removeData:function(t,e){xt.remove(t,e)},_data:function(t,e,n){return yt.access(t,e,n)},_removeData:function(t,e){yt.remove(t,e)}}),tt.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=xt.get(o),1===o.nodeType&&!yt.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=tt.camelCase(r.slice(5)),l(o,r,i[r])));yt.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){xt.set(this,t)}):vt(this,function(e){var n,r=tt.camelCase(t);if(o&&void 0===e){if(n=xt.get(o,t),void 0!==n)return n;if(n=xt.get(o,r),void 0!==n)return n;if(n=l(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=xt.get(this,r);xt.set(this,r,e),-1!==t.indexOf("-")&&void 0!==n&&xt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){xt.remove(this,t)})}}),tt.extend({queue:function(t,e,n){var r;return t?(e=(e||"fx")+"queue",r=yt.get(t,e),n&&(!r||tt.isArray(n)?r=yt.access(t,e,tt.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=tt.queue(t,e),r=n.length,i=n.shift(),o=tt._queueHooks(t,e),a=function(){tt.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return yt.get(t,n)||yt.access(t,n,{empty:tt.Callbacks("once memory").add(function(){yt.remove(t,[e+"queue",n])})})}}),tt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?tt.queue(this[0],t):void 0===e?this:this.each(function(){var n=tt.queue(this,t,e);tt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&tt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){tt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=tt.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=yt.get(o[a],t+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var Ct=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Mt=["Top","Right","Bottom","Left"],St=function(t,e){return t=e||t,"none"===tt.css(t,"display")||!tt.contains(t.ownerDocument,t)},_t=/^(?:checkbox|radio)$/i;!function(){var t=Q.createDocumentFragment(),e=t.appendChild(Q.createElement("div")),n=Q.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),Y.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",Y.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var kt="undefined";Y.focusinBubbles="onfocusin"in t;var Tt=/^key/,Nt=/^(?:mouse|pointer|contextmenu)|click/,At=/^(?:focusinfocus|focusoutblur)$/,Et=/^([^.]*)(?:\.(.+)|)$/;tt.event={global:{},add:function(t,e,n,r,i){var o,a,s,l,u,c,h,f,d,p,g,m=yt.get(t);if(m)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=tt.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(e){return typeof tt!==kt&&tt.event.triggered!==e.type?tt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(pt)||[""],u=e.length;u--;)s=Et.exec(e[u])||[],d=g=s[1],p=(s[2]||"").split(".").sort(),d&&(h=tt.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,h=tt.event.special[d]||{},c=tt.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&tt.expr.match.needsContext.test(i),namespace:p.join(".")},o),(f=l[d])||(f=l[d]=[],f.delegateCount=0,h.setup&&h.setup.call(t,r,p,a)!==!1||t.addEventListener&&t.addEventListener(d,a,!1)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),tt.event.global[d]=!0)},remove:function(t,e,n,r,i){var o,a,s,l,u,c,h,f,d,p,g,m=yt.hasData(t)&&yt.get(t);if(m&&(l=m.events)){for(e=(e||"").match(pt)||[""],u=e.length;u--;)if(s=Et.exec(e[u])||[],d=g=s[1],p=(s[2]||"").split(".").sort(),d){for(h=tt.event.special[d]||{},d=(r?h.delegateType:h.bindType)||d,f=l[d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(t,c));a&&!f.length&&(h.teardown&&h.teardown.call(t,p,m.handle)!==!1||tt.removeEvent(t,d,m.handle),delete l[d])}else for(d in l)tt.event.remove(t,d+e[u],n,r,!0);tt.isEmptyObject(l)&&(delete m.handle,yt.remove(t,"events"))}},trigger:function(e,n,r,i){var o,a,s,l,u,c,h,f=[r||Q],d=Z.call(e,"type")?e.type:e,p=Z.call(e,"namespace")?e.namespace.split("."):[];if(a=s=r=r||Q,3!==r.nodeType&&8!==r.nodeType&&!At.test(d+tt.event.triggered)&&(d.indexOf(".")>=0&&(p=d.split("."),d=p.shift(),p.sort()),u=d.indexOf(":")<0&&"on"+d,e=e[tt.expando]?e:new tt.Event(d,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=p.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:tt.makeArray(n,[e]),h=tt.event.special[d]||{},i||!h.trigger||h.trigger.apply(r,n)!==!1)){if(!i&&!h.noBubble&&!tt.isWindow(r)){for(l=h.delegateType||d,At.test(l+d)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(r.ownerDocument||Q)&&f.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=f[o++])&&!e.isPropagationStopped();)e.type=o>1?l:h.bindType||d,c=(yt.get(a,"events")||{})[e.type]&&yt.get(a,"handle"),c&&c.apply(a,n),c=u&&a[u],c&&c.apply&&tt.acceptData(a)&&(e.result=c.apply(a,n),e.result===!1&&e.preventDefault());return e.type=d,i||e.isDefaultPrevented()||h._default&&h._default.apply(f.pop(),n)!==!1||!tt.acceptData(r)||u&&tt.isFunction(r[d])&&!tt.isWindow(r)&&(s=r[u],s&&(r[u]=null),tt.event.triggered=d,r[d](),tt.event.triggered=void 0,s&&(r[u]=s)),e.result}},dispatch:function(t){t=tt.event.fix(t);var e,n,r,i,o,a=[],s=B.call(arguments),l=(yt.get(this,"events")||{})[t.type]||[],u=tt.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(a=tt.event.handlers.call(this,t,l),e=0;(i=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,r=((tt.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==r&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==t.type){for(r=[],n=0;s>n;n++)o=e[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?tt(i,this).index(l)>=0:tt.find(i,this,null,[l]).length),r[i]&&r.push(o);r.length&&a.push({elem:l,handlers:r})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||Q,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[tt.expando])return t;var e,n,r,i=t.type,o=t,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Nt.test(i)?this.mouseHooks:Tt.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,t=new tt.Event(o),e=r.length;e--;)n=r[e],t[n]=o[n];return t.target||(t.target=Q),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==h()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&tt.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return tt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,r){var i=tt.extend(new tt.Event,n,{type:t,isSimulated:!0,originalEvent:{}});r?tt.event.trigger(i,null,e):tt.event.dispatch.call(e,i),i.isDefaultPrevented()&&n.preventDefault()}},tt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},tt.Event=function(t,e){return this instanceof tt.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?u:c):this.type=t,e&&tt.extend(this,e),this.timeStamp=t&&t.timeStamp||tt.now(),void(this[tt.expando]=!0)):new tt.Event(t,e)},tt.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=u,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=u,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=u,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},tt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){tt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return(!i||i!==r&&!tt.contains(r,i))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),Y.focusinBubbles||tt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){tt.event.simulate(e,t.target,tt.event.fix(t),!0)};tt.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=yt.access(r,e);i||r.addEventListener(t,n,!0),yt.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=yt.access(r,e)-1;i?yt.access(r,e,i):(r.removeEventListener(t,n,!0),yt.remove(r,e))}}}),tt.fn.extend({on:function(t,e,n,r,i){var o,a;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(a in t)this.on(a,e,n,t[a],i);return this}if(null==n&&null==r?(r=e,n=e=void 0):null==r&&("string"==typeof e?(r=n,n=void 0):(r=n,n=e,e=void 0)),r===!1)r=c;else if(!r)return this;return 1===i&&(o=r,r=function(t){return tt().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=tt.guid++)),this.each(function(){tt.event.add(this,t,r,n,e)})},one:function(t,e,n,r){return this.on(t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,tt(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=c),this.each(function(){tt.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){tt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?tt.event.trigger(t,e,n,!0):void 0}});var Rt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Lt=/<([\w:]+)/,It=/<|&#?\w+;/,Pt=/<(?:script|style|link)/i,Ot=/checked\s*(?:[^=]|=\s*.checked.)/i,$t=/^$|\/(?:java|ecma)script/i,Dt=/^true\/(.*)/,jt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ft={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ft.optgroup=Ft.option,Ft.tbody=Ft.tfoot=Ft.colgroup=Ft.caption=Ft.thead,Ft.th=Ft.td,tt.extend({clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),l=tt.contains(t.ownerDocument,t);if(!(Y.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||tt.isXMLDoc(t)))for(a=v(s),o=v(t),r=0,i=o.length;i>r;r++)y(o[r],a[r]);if(e)if(n)for(o=o||v(t),a=a||v(s),r=0,i=o.length;i>r;r++)m(o[r],a[r]);else m(t,s);return a=v(s,"script"),a.length>0&&g(a,!l&&v(t,"script")),s},buildFragment:function(t,e,n,r){for(var i,o,a,s,l,u,c=e.createDocumentFragment(),h=[],f=0,d=t.length;d>f;f++)if(i=t[f],i||0===i)if("object"===tt.type(i))tt.merge(h,i.nodeType?[i]:i);else if(It.test(i)){for(o=o||c.appendChild(e.createElement("div")),a=(Lt.exec(i)||["",""])[1].toLowerCase(),s=Ft[a]||Ft._default,o.innerHTML=s[1]+i.replace(Rt,"<$1></$2>")+s[2],u=s[0];u--;)o=o.lastChild;tt.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}else h.push(e.createTextNode(i));for(c.textContent="",f=0;i=h[f++];)if((!r||-1===tt.inArray(i,r))&&(l=tt.contains(i.ownerDocument,i),o=v(c.appendChild(i),"script"),l&&g(o),n))for(u=0;i=o[u++];)$t.test(i.type||"")&&n.push(i);return c},cleanData:function(t){for(var e,n,r,i,o=tt.event.special,a=0;void 0!==(n=t[a]);a++){if(tt.acceptData(n)&&(i=n[yt.expando],i&&(e=yt.cache[i]))){if(e.events)for(r in e.events)o[r]?tt.event.remove(n,r):tt.removeEvent(n,r,e.handle);yt.cache[i]&&delete yt.cache[i]}delete xt.cache[n[xt.expando]]}}}),tt.fn.extend({text:function(t){return vt(this,function(t){return void 0===t?tt.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=f(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=f(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,r=t?tt.filter(t,this):this,i=0;null!=(n=r[i]);i++)e||1!==n.nodeType||tt.cleanData(v(n)),n.parentNode&&(e&&tt.contains(n.ownerDocument,n)&&g(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(tt.cleanData(v(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return tt.clone(this,t,e)})},html:function(t){return vt(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Pt.test(t)&&!Ft[(Lt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Rt,"<$1></$2>");try{for(;r>n;n++)e=this[n]||{},1===e.nodeType&&(tt.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,tt.cleanData(v(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=V.apply([],t);var n,r,i,o,a,s,l=0,u=this.length,c=this,h=u-1,f=t[0],g=tt.isFunction(f);if(g||u>1&&"string"==typeof f&&!Y.checkClone&&Ot.test(f))return this.each(function(n){var r=c.eq(n);g&&(t[0]=f.call(this,n,r.html())),r.domManip(t,e)});if(u&&(n=tt.buildFragment(t,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=tt.map(v(n,"script"),d),o=i.length;u>l;l++)a=n,l!==h&&(a=tt.clone(a,!0,!0),o&&tt.merge(i,v(a,"script"))),e.call(this[l],a,l);if(o)for(s=i[i.length-1].ownerDocument,tt.map(i,p),l=0;o>l;l++)a=i[l],$t.test(a.type||"")&&!yt.access(a,"globalEval")&&tt.contains(s,a)&&(a.src?tt._evalUrl&&tt._evalUrl(a.src):tt.globalEval(a.textContent.replace(jt,"")))}return this}}),tt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){tt.fn[t]=function(t){for(var n,r=[],i=tt(t),o=i.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),tt(i[a])[e](n),J.apply(r,n.get());return this.pushStack(r)}});var zt,qt={},Ut=/^margin/,Ht=new RegExp("^("+Ct+")(?!px)[a-z%]+$","i"),Bt=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)};!function(){function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",i.appendChild(o);var e=t.getComputedStyle(a,null);n="1%"!==e.top,r="4px"===e.width,i.removeChild(o)}var n,r,i=Q.documentElement,o=Q.createElement("div"),a=Q.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",Y.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(a),t.getComputedStyle&&tt.extend(Y,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==r&&e(),r},reliableMarginRight:function(){var e,n=a.appendChild(Q.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",i.appendChild(o),e=!parseFloat(t.getComputedStyle(n,null).marginRight),i.removeChild(o),e}}))}(),tt.swap=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];i=n.apply(t,r||[]);for(o in e)t.style[o]=a[o];return i};var Vt=/^(none|table(?!-c[ea]).+)/,Jt=new RegExp("^("+Ct+")(.*)$","i"),Gt=new RegExp("^([+-])=("+Ct+")","i"),Wt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"},Zt=["Webkit","O","Moz","ms"];tt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=w(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=tt.camelCase(e),l=t.style;return e=tt.cssProps[s]||(tt.cssProps[s]=M(l,s)),a=tt.cssHooks[e]||tt.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:l[e]:(o=typeof n,"string"===o&&(i=Gt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(tt.css(t,e)),o="number"),null!=n&&n===n&&("number"!==o||tt.cssNumber[s]||(n+="px"),Y.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(l[e]=n)),void 0)}},css:function(t,e,n,r){var i,o,a,s=tt.camelCase(e);return e=tt.cssProps[s]||(tt.cssProps[s]=M(t.style,s)),a=tt.cssHooks[e]||tt.cssHooks[s],a&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=w(t,e,r)),"normal"===i&&e in Xt&&(i=Xt[e]),""===n||n?(o=parseFloat(i),n===!0||tt.isNumeric(o)?o||0:i):i}}),tt.each(["height","width"],function(t,e){tt.cssHooks[e]={get:function(t,n,r){return n?Vt.test(tt.css(t,"display"))&&0===t.offsetWidth?tt.swap(t,Wt,function(){return k(t,e,r)}):k(t,e,r):void 0},set:function(t,n,r){var i=r&&Bt(t);return S(t,n,r?_(t,e,r,"border-box"===tt.css(t,"boxSizing",!1,i),i):0)}}}),tt.cssHooks.marginRight=C(Y.reliableMarginRight,function(t,e){return e?tt.swap(t,{display:"inline-block"},w,[t,"marginRight"]):void 0}),tt.each({margin:"",padding:"",border:"Width"},function(t,e){tt.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[t+Mt[r]+e]=o[r]||o[r-2]||o[0];return i}},Ut.test(t)||(tt.cssHooks[t+e].set=S)}),tt.fn.extend({css:function(t,e){return vt(this,function(t,e,n){var r,i,o={},a=0;if(tt.isArray(e)){for(r=Bt(t),i=e.length;i>a;a++)o[e[a]]=tt.css(t,e[a],!1,r);return o}return void 0!==n?tt.style(t,e,n):tt.css(t,e)},t,e,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){St(this)?tt(this).show():tt(this).hide()})}}),tt.Tween=N,N.prototype={constructor:N,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||"swing",this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(tt.cssNumber[n]?"":"px")},cur:function(){var t=N.propHooks[this.prop];return t&&t.get?t.get(this):N.propHooks._default.get(this)},run:function(t){var e,n=N.propHooks[this.prop];return this.options.duration?this.pos=e=tt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):N.propHooks._default.set(this),
this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=tt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){tt.fx.step[t.prop]?tt.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[tt.cssProps[t.prop]]||tt.cssHooks[t.prop])?tt.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},tt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},tt.fx=N.prototype.init,tt.fx.step={};var Yt,Qt,Kt=/^(?:toggle|show|hide)$/,te=new RegExp("^(?:([+-])=|)("+Ct+")([a-z%]*)$","i"),ee=/queueHooks$/,ne=[L],re={"*":[function(t,e){var n=this.createTween(t,e),r=n.cur(),i=te.exec(e),o=i&&i[3]||(tt.cssNumber[t]?"":"px"),a=(tt.cssNumber[t]||"px"!==o&&+r)&&te.exec(tt.css(n.elem,t)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,tt.style(n.elem,t,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};tt.Animation=tt.extend(P,{tweener:function(t,e){tt.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,r=0,i=t.length;i>r;r++)n=t[r],re[n]=re[n]||[],re[n].unshift(e)},prefilter:function(t,e){e?ne.unshift(t):ne.push(t)}}),tt.speed=function(t,e,n){var r=t&&"object"==typeof t?tt.extend({},t):{complete:n||!n&&e||tt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!tt.isFunction(e)&&e};return r.duration=tt.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in tt.fx.speeds?tt.fx.speeds[r.duration]:tt.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){tt.isFunction(r.old)&&r.old.call(this),r.queue&&tt.dequeue(this,r.queue)},r},tt.fn.extend({fadeTo:function(t,e,n,r){return this.filter(St).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=tt.isEmptyObject(t),o=tt.speed(e,n,r),a=function(){var e=P(this,tt.extend({},t),o);(i||yt.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=tt.timers,a=yt.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ee.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));(e||!n)&&tt.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=yt.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=tt.timers,a=r?r.length:0;for(n.finish=!0,tt.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;a>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),tt.each(["toggle","show","hide"],function(t,e){var n=tt.fn[e];tt.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(E(e,!0),t,r,i)}}),tt.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){tt.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),tt.timers=[],tt.fx.tick=function(){var t,e=0,n=tt.timers;for(Yt=tt.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||tt.fx.stop(),Yt=void 0},tt.fx.timer=function(t){tt.timers.push(t),t()?tt.fx.start():tt.timers.pop()},tt.fx.interval=13,tt.fx.start=function(){Qt||(Qt=setInterval(tt.fx.tick,tt.fx.interval))},tt.fx.stop=function(){clearInterval(Qt),Qt=null},tt.fx.speeds={slow:600,fast:200,_default:400},tt.fn.delay=function(t,e){return t=tt.fx?tt.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var r=setTimeout(e,t);n.stop=function(){clearTimeout(r)}})},function(){var t=Q.createElement("input"),e=Q.createElement("select"),n=e.appendChild(Q.createElement("option"));t.type="checkbox",Y.checkOn=""!==t.value,Y.optSelected=n.selected,e.disabled=!0,Y.optDisabled=!n.disabled,t=Q.createElement("input"),t.value="t",t.type="radio",Y.radioValue="t"===t.value}();var ie,oe,ae=tt.expr.attrHandle;tt.fn.extend({attr:function(t,e){return vt(this,tt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){tt.removeAttr(this,t)})}}),tt.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===kt?tt.prop(t,e,n):(1===o&&tt.isXMLDoc(t)||(e=e.toLowerCase(),r=tt.attrHooks[e]||(tt.expr.match.bool.test(e)?oe:ie)),void 0===n?r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=tt.find.attr(t,e),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):void tt.removeAttr(t,e))},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(pt);if(o&&1===t.nodeType)for(;n=o[i++];)r=tt.propFix[n]||n,tt.expr.match.bool.test(n)&&(t[r]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!Y.radioValue&&"radio"===e&&tt.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),oe={set:function(t,e,n){return e===!1?tt.removeAttr(t,n):t.setAttribute(n,n),n}},tt.each(tt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ae[e]||tt.find.attr;ae[e]=function(t,e,r){var i,o;return r||(o=ae[e],ae[e]=i,i=null!=n(t,e,r)?e.toLowerCase():null,ae[e]=o),i}});var se=/^(?:input|select|textarea|button)$/i;tt.fn.extend({prop:function(t,e){return vt(this,tt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[tt.propFix[t]||t]})}}),tt.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var r,i,o,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return o=1!==a||!tt.isXMLDoc(t),o&&(e=tt.propFix[e]||e,i=tt.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||se.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),Y.optSelected||(tt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),tt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){tt.propFix[this.toLowerCase()]=this});var le=/[\t\r\n\f]/g;tt.fn.extend({addClass:function(t){var e,n,r,i,o,a,s="string"==typeof t&&t,l=0,u=this.length;if(tt.isFunction(t))return this.each(function(e){tt(this).addClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(pt)||[];u>l;l++)if(n=this[l],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(le," "):" ")){for(o=0;i=e[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=tt.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,r,i,o,a,s=0===arguments.length||"string"==typeof t&&t,l=0,u=this.length;if(tt.isFunction(t))return this.each(function(e){tt(this).removeClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(pt)||[];u>l;l++)if(n=this[l],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(le," "):"")){for(o=0;i=e[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=t?tt.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):tt.isFunction(t)?this.each(function(n){tt(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,r=0,i=tt(this),o=t.match(pt)||[];e=o[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else(n===kt||"boolean"===n)&&(this.className&&yt.set(this,"__className__",this.className),this.className=this.className||t===!1?"":yt.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(le," ").indexOf(e)>=0)return!0;return!1}});var ue=/\r/g;tt.fn.extend({val:function(t){var e,n,r,i=this[0];{if(arguments.length)return r=tt.isFunction(t),this.each(function(n){var i;1===this.nodeType&&(i=r?t.call(this,n,tt(this).val()):t,null==i?i="":"number"==typeof i?i+="":tt.isArray(i)&&(i=tt.map(i,function(t){return null==t?"":t+""})),e=tt.valHooks[this.type]||tt.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))});if(i)return e=tt.valHooks[i.type]||tt.valHooks[i.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(ue,""):null==n?"":n)}}}),tt.extend({valHooks:{option:{get:function(t){var e=tt.find.attr(t,"value");return null!=e?e:tt.trim(tt.text(t))}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;s>l;l++)if(n=r[l],(n.selected||l===i)&&(Y.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!tt.nodeName(n.parentNode,"optgroup"))){if(e=tt(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=tt.makeArray(e),a=i.length;a--;)r=i[a],(r.selected=tt.inArray(r.value,o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),tt.each(["radio","checkbox"],function(){tt.valHooks[this]={set:function(t,e){return tt.isArray(e)?t.checked=tt.inArray(tt(t).val(),e)>=0:void 0}},Y.checkOn||(tt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),tt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){tt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),tt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var ce=tt.now(),he=/\?/;tt.parseJSON=function(t){return JSON.parse(t+"")},tt.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{n=new DOMParser,e=n.parseFromString(t,"text/xml")}catch(r){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&tt.error("Invalid XML: "+t),e};var fe,de,pe=/#.*$/,ge=/([?&])_=[^&]*/,me=/^(.*?):[ \t]*([^\r\n]*)$/gm,ve=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ye=/^(?:GET|HEAD)$/,xe=/^\/\//,be=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,we={},Ce={},Me="*/".concat("*");try{de=location.href}catch(Se){de=Q.createElement("a"),de.href="",de=de.href}fe=be.exec(de.toLowerCase())||[],tt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:de,type:"GET",isLocal:ve.test(fe[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Me,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":tt.parseJSON,"text xml":tt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?j(j(t,tt.ajaxSettings),e):j(tt.ajaxSettings,t)},ajaxPrefilter:O(we),ajaxTransport:O(Ce),ajax:function(t,e){function n(t,e,n,a){var l,c,v,y,b,C=e;2!==x&&(x=2,s&&clearTimeout(s),r=void 0,o=a||"",w.readyState=t>0?4:0,l=t>=200&&300>t||304===t,n&&(y=F(h,w,n)),y=z(h,y,w,l),l?(h.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(tt.lastModified[i]=b),b=w.getResponseHeader("etag"),b&&(tt.etag[i]=b)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=y.state,c=y.data,v=y.error,l=!v)):(v=C,(t||!C)&&(C="error",0>t&&(t=0))),w.status=t,w.statusText=(e||C)+"",l?p.resolveWith(f,[c,C,w]):p.rejectWith(f,[w,C,v]),w.statusCode(m),m=void 0,u&&d.trigger(l?"ajaxSuccess":"ajaxError",[w,h,l?c:v]),g.fireWith(f,[w,C]),u&&(d.trigger("ajaxComplete",[w,h]),--tt.active||tt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,i,o,a,s,l,u,c,h=tt.ajaxSetup({},e),f=h.context||h,d=h.context&&(f.nodeType||f.jquery)?tt(f):tt.event,p=tt.Deferred(),g=tt.Callbacks("once memory"),m=h.statusCode||{},v={},y={},x=0,b="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===x){if(!a)for(a={};e=me.exec(o);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===x?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return x||(t=y[n]=y[n]||t,v[t]=e),this},overrideMimeType:function(t){return x||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>x)for(e in t)m[e]=[m[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||b;return r&&r.abort(e),n(0,e),this}};if(p.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,h.url=((t||h.url||de)+"").replace(pe,"").replace(xe,fe[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=tt.trim(h.dataType||"*").toLowerCase().match(pt)||[""],null==h.crossDomain&&(l=be.exec(h.url.toLowerCase()),h.crossDomain=!(!l||l[1]===fe[1]&&l[2]===fe[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(fe[3]||("http:"===fe[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=tt.param(h.data,h.traditional)),D(we,h,e,w),2===x)return w;u=h.global,u&&0===tt.active++&&tt.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!ye.test(h.type),i=h.url,h.hasContent||(h.data&&(i=h.url+=(he.test(i)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=ge.test(i)?i.replace(ge,"$1_="+ce++):i+(he.test(i)?"&":"?")+"_="+ce++)),h.ifModified&&(tt.lastModified[i]&&w.setRequestHeader("If-Modified-Since",tt.lastModified[i]),tt.etag[i]&&w.setRequestHeader("If-None-Match",tt.etag[i])),(h.data&&h.hasContent&&h.contentType!==!1||e.contentType)&&w.setRequestHeader("Content-Type",h.contentType),w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Me+"; q=0.01":""):h.accepts["*"]);for(c in h.headers)w.setRequestHeader(c,h.headers[c]);if(h.beforeSend&&(h.beforeSend.call(f,w,h)===!1||2===x))return w.abort();b="abort";for(c in{success:1,error:1,complete:1})w[c](h[c]);if(r=D(Ce,h,e,w)){w.readyState=1,u&&d.trigger("ajaxSend",[w,h]),h.async&&h.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},h.timeout));try{x=1,r.send(v,n)}catch(C){if(!(2>x))throw C;n(-1,C)}}else n(-1,"No Transport");return w},getJSON:function(t,e,n){return tt.get(t,e,n,"json")},getScript:function(t,e){return tt.get(t,void 0,e,"script")}}),tt.each(["get","post"],function(t,e){tt[e]=function(t,n,r,i){return tt.isFunction(n)&&(i=i||r,r=n,n=void 0),tt.ajax({url:t,type:e,dataType:i,data:n,success:r})}}),tt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){tt.fn[e]=function(t){return this.on(e,t)}}),tt._evalUrl=function(t){return tt.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},tt.fn.extend({wrapAll:function(t){var e;return tt.isFunction(t)?this.each(function(e){tt(this).wrapAll(t.call(this,e))}):(this[0]&&(e=tt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return tt.isFunction(t)?this.each(function(e){tt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=tt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=tt.isFunction(t);return this.each(function(n){tt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){tt.nodeName(this,"body")||tt(this).replaceWith(this.childNodes)}).end()}}),tt.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},tt.expr.filters.visible=function(t){return!tt.expr.filters.hidden(t)};var _e=/%20/g,ke=/\[\]$/,Te=/\r?\n/g,Ne=/^(?:submit|button|image|reset|file)$/i,Ae=/^(?:input|select|textarea|keygen)/i;tt.param=function(t,e){var n,r=[],i=function(t,e){e=tt.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=tt.ajaxSettings&&tt.ajaxSettings.traditional),tt.isArray(t)||t.jquery&&!tt.isPlainObject(t))tt.each(t,function(){i(this.name,this.value)});else for(n in t)q(n,t[n],e,i);return r.join("&").replace(_e,"+")},tt.fn.extend({serialize:function(){return tt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=tt.prop(this,"elements");return t?tt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!tt(this).is(":disabled")&&Ae.test(this.nodeName)&&!Ne.test(t)&&(this.checked||!_t.test(t))}).map(function(t,e){var n=tt(this).val();return null==n?null:tt.isArray(n)?tt.map(n,function(t){return{name:e.name,value:t.replace(Te,"\r\n")}}):{name:e.name,value:n.replace(Te,"\r\n")}}).get()}}),tt.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ee=0,Re={},Le={0:200,1223:204},Ie=tt.ajaxSettings.xhr();t.ActiveXObject&&tt(t).on("unload",function(){for(var t in Re)Re[t]()}),Y.cors=!!Ie&&"withCredentials"in Ie,Y.ajax=Ie=!!Ie,tt.ajaxTransport(function(t){var e;return Y.cors||Ie&&!t.crossDomain?{send:function(n,r){var i,o=t.xhr(),a=++Ee;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(i in t.xhrFields)o[i]=t.xhrFields[i];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);e=function(t){return function(){e&&(delete Re[a],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?r(o.status,o.statusText):r(Le[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=Re[a]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(s){if(e)throw s}},abort:function(){e&&e()}}:void 0}),tt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return tt.globalEval(t),t}}}),tt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),tt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(r,i){e=tt("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),Q.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Pe=[],Oe=/(=)\?(?=&|$)|\?\?/;tt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Pe.pop()||tt.expando+"_"+ce++;return this[t]=!0,t}}),tt.ajaxPrefilter("json jsonp",function(e,n,r){var i,o,a,s=e.jsonp!==!1&&(Oe.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Oe.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=tt.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Oe,"$1"+i):e.jsonp!==!1&&(e.url+=(he.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||tt.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){a=arguments},r.always(function(){t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,Pe.push(i)),a&&tt.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),tt.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||Q;var r=st.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=tt.buildFragment([t],e,i),i&&i.length&&tt(i).remove(),tt.merge([],r.childNodes))};var $e=tt.fn.load;tt.fn.load=function(t,e,n){if("string"!=typeof t&&$e)return $e.apply(this,arguments);var r,i,o,a=this,s=t.indexOf(" ");return s>=0&&(r=tt.trim(t.slice(s)),t=t.slice(0,s)),tt.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&tt.ajax({url:t,type:i,dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?tt("<div>").append(tt.parseHTML(t)).find(r):t)}).complete(n&&function(t,e){a.each(n,o||[t.responseText,e,t])}),this},tt.expr.filters.animated=function(t){return tt.grep(tt.timers,function(e){return t===e.elem}).length};var De=t.document.documentElement;tt.offset={setOffset:function(t,e,n){var r,i,o,a,s,l,u,c=tt.css(t,"position"),h=tt(t),f={};"static"===c&&(t.style.position="relative"),s=h.offset(),o=tt.css(t,"top"),l=tt.css(t,"left"),u=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,u?(r=h.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),tt.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(f.top=e.top-s.top+a),null!=e.left&&(f.left=e.left-s.left+i),"using"in e?e.using.call(t,f):h.css(f)}},tt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){tt.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return e=o.documentElement,tt.contains(e,r)?(typeof r.getBoundingClientRect!==kt&&(i=r.getBoundingClientRect()),n=U(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i},position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===tt.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),tt.nodeName(t[0],"html")||(r=t.offset()),r.top+=tt.css(t[0],"borderTopWidth",!0),r.left+=tt.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-tt.css(n,"marginTop",!0),left:e.left-r.left-tt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||De;t&&!tt.nodeName(t,"html")&&"static"===tt.css(t,"position");)t=t.offsetParent;return t||De})}}),tt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r="pageYOffset"===n;tt.fn[e]=function(i){return vt(this,function(e,i,o){var a=U(e);return void 0===o?a?a[n]:e[i]:void(a?a.scrollTo(r?t.pageXOffset:o,r?o:t.pageYOffset):e[i]=o)},e,i,arguments.length,null)}}),tt.each(["top","left"],function(t,e){tt.cssHooks[e]=C(Y.pixelPosition,function(t,n){return n?(n=w(t,e),Ht.test(n)?tt(t).position()[e]+"px":n):void 0})}),tt.each({Height:"height",Width:"width"},function(t,e){tt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){tt.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||i===!0?"margin":"border");return vt(this,function(e,n,r){var i;return tt.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?tt.css(e,n,a):tt.style(e,n,r,a)},e,o?r:void 0,o,null)}})}),tt.fn.size=function(){return this.length},tt.fn.andSelf=tt.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return tt});var je=t.jQuery,Fe=t.$;return tt.noConflict=function(e){return t.$===tt&&(t.$=Fe),e&&t.jQuery===tt&&(t.jQuery=je),tt},typeof e===kt&&(t.jQuery=t.$=tt),tt});var cds=cds||{},A=A||{};"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,i,o,a=gap,s,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,n=0;o>n;n+=1)s[n]=str(n,l)||"null";return i=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,l),i&&s.push(quote(r)+(gap?": ":":")+i));else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(i=str(r,l),i&&s.push(quote(r)+(gap?": ":":")+i));return i=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,i=t[e];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(t,e,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),Logger={},Logger.log=function(t,e){try{var n="http://alasky.u-strasbg.fr/cgi/AladinLiteLogger/log.py",r="";e&&(r=JSON.stringify(e)),$.ajax({url:n,data:{action:t,params:r,pageUrl:window.location.href,referer:document.referrer?document.referrer:""},method:"GET",dataType:"json"})}catch(i){window.console&&console.log("Exception: "+i)}},function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function($){function t(t){var e=t||window.event,n=[].slice.call(arguments,1),o=0,a=0,s=0,l=0,u=0,c;return t=$.event.fix(e),t.type="mousewheel",e.wheelDelta&&(o=e.wheelDelta),e.detail&&(o=-1*e.detail),s=o,void 0!==e.axis&&e.axis===e.HORIZONTAL_AXIS&&(s=0,a=-1*o),e.deltaY&&(s=-1*e.deltaY,o=s),e.deltaX&&(a=e.deltaX,o=-1*a),void 0!==e.wheelDeltaY&&(s=e.wheelDeltaY),void 0!==e.wheelDeltaX&&(a=-1*e.wheelDeltaX),l=Math.abs(o),(!r||r>l)&&(r=l),u=Math.max(Math.abs(s),Math.abs(a)),(!i||i>u)&&(i=u),c=o>0?"floor":"ceil",o=Math[c](o/r),a=Math[c](a/i),s=Math[c](s/i),n.unshift(t,o,a,s),($.event.dispatch||$.event.handle).apply(this,n)}var e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r,i;if($.event.fixHooks)for(var o=e.length;o;)$.event.fixHooks[e[--o]]=$.event.mouseHooks;$.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],t,!1);else this.onmousewheel=null}},$.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}}();var Stats=function(){function t(t,e,n){var r,i,o;for(i=0;30>i;i++)for(r=0;73>r;r++)o=4*(r+74*i),t[o]=t[o+4],t[o+1]=t[o+5],t[o+2]=t[o+6];for(i=0;30>i;i++)o=4*(73+74*i),e>i?(t[o]=E[n].bg.r,t[o+1]=E[n].bg.g,t[o+2]=E[n].bg.b):(t[o]=E[n].fg.r,t[o+1]=E[n].fg.g,t[o+2]=E[n].fg.b)}var e=0,n=2,r,i=0,o=(new Date).getTime(),a=o,s=o,l=0,u=1e3,c=0,h,f,d,p,g,m=0,v=1e3,y=0,x,b,w,C,M=0,S=1e3,_=0,k,T,N,A,E={fps:{bg:{r:16,g:16,b:48},fg:{r:0,g:255,b:255}},ms:{bg:{r:16,g:48,b:16},fg:{r:0,g:255,b:0}},mb:{bg:{r:48,g:16,b:26},fg:{r:255,g:0,b:128}}};r=document.createElement("div"),r.style.cursor="pointer",r.style.width="80px",r.style.opacity="0.9",r.style.zIndex="10001",r.addEventListener("click",function(){switch(e++,e==n&&(e=0),h.style.display="none",x.style.display="none",k.style.display="none",e){case 0:h.style.display="block";break;case 1:x.style.display="block";break;case 2:k.style.display="block"}},!1),h=document.createElement("div"),h.style.backgroundColor="rgb("+Math.floor(E.fps.bg.r/2)+","+Math.floor(E.fps.bg.g/2)+","+Math.floor(E.fps.bg.b/2)+")",h.style.padding="2px 0px 3px 0px",r.appendChild(h),f=document.createElement("div"),f.style.fontFamily="Helvetica, Arial, sans-serif",f.style.textAlign="left",f.style.fontSize="9px",f.style.color="rgb("+E.fps.fg.r+","+E.fps.fg.g+","+E.fps.fg.b+")",f.style.margin="0px 0px 1px 3px",f.innerHTML='<span style="font-weight:bold">FPS</span>',h.appendChild(f),d=document.createElement("canvas"),d.width=74,d.height=30,d.style.display="block",d.style.marginLeft="3px",h.appendChild(d),p=d.getContext("2d"),p.fillStyle="rgb("+E.fps.bg.r+","+E.fps.bg.g+","+E.fps.bg.b+")",p.fillRect(0,0,d.width,d.height),g=p.getImageData(0,0,d.width,d.height),x=document.createElement("div"),x.style.backgroundColor="rgb("+Math.floor(E.ms.bg.r/2)+","+Math.floor(E.ms.bg.g/2)+","+Math.floor(E.ms.bg.b/2)+")",x.style.padding="2px 0px 3px 0px",x.style.display="none",r.appendChild(x),b=document.createElement("div"),b.style.fontFamily="Helvetica, Arial, sans-serif",b.style.textAlign="left",b.style.fontSize="9px",b.style.color="rgb("+E.ms.fg.r+","+E.ms.fg.g+","+E.ms.fg.b+")",b.style.margin="0px 0px 1px 3px",b.innerHTML='<span style="font-weight:bold">MS</span>',x.appendChild(b),d=document.createElement("canvas"),d.width=74,d.height=30,d.style.display="block",d.style.marginLeft="3px",x.appendChild(d),w=d.getContext("2d"),w.fillStyle="rgb("+E.ms.bg.r+","+E.ms.bg.g+","+E.ms.bg.b+")",w.fillRect(0,0,d.width,d.height),C=w.getImageData(0,0,d.width,d.height);try{performance&&performance.memory&&performance.memory.totalJSHeapSize&&(n=3)}catch(R){}return k=document.createElement("div"),k.style.backgroundColor="rgb("+Math.floor(E.mb.bg.r/2)+","+Math.floor(E.mb.bg.g/2)+","+Math.floor(E.mb.bg.b/2)+")",k.style.padding="2px 0px 3px 0px",k.style.display="none",r.appendChild(k),T=document.createElement("div"),T.style.fontFamily="Helvetica, Arial, sans-serif",T.style.textAlign="left",T.style.fontSize="9px",T.style.color="rgb("+E.mb.fg.r+","+E.mb.fg.g+","+E.mb.fg.b+")",T.style.margin="0px 0px 1px 3px",T.innerHTML='<span style="font-weight:bold">MB</span>',k.appendChild(T),d=document.createElement("canvas"),d.width=74,d.height=30,d.style.display="block",d.style.marginLeft="3px",k.appendChild(d),N=d.getContext("2d"),N.fillStyle="#301010",N.fillRect(0,0,d.width,d.height),A=N.getImageData(0,0,d.width,d.height),{domElement:r,update:function(){i++,o=(new Date).getTime(),m=o-a,v=Math.min(v,m),y=Math.max(y,m),t(C.data,Math.min(30,30-m/200*30),"ms"),b.innerHTML='<span style="font-weight:bold">'+m+" MS</span> ("+v+"-"+y+")",w.putImageData(C,0,0),a=o,o>s+1e3&&(l=Math.round(1e3*i/(o-s)),u=Math.min(u,l),c=Math.max(c,l),
t(g.data,Math.min(30,30-l/100*30),"fps"),f.innerHTML='<span style="font-weight:bold">'+l+" FPS</span> ("+u+"-"+c+")",p.putImageData(g,0,0),3==n&&(M=9.54e-7*performance.memory.usedJSHeapSize,S=Math.min(S,M),_=Math.max(_,M),t(A.data,Math.min(30,30-M/2),"mb"),T.innerHTML='<span style="font-weight:bold">'+Math.round(M)+" MB</span> ("+Math.round(S)+"-"+Math.round(_)+")",N.putImageData(A,0,0)),s=o,i=0)}}};Constants={},Constants.PI=Math.PI,Constants.C_PR=Math.PI/180,Constants.VLEV=2,Constants.EPS=1e-7,Constants.c=.105,Constants.LN10=Math.log(10),Constants.PIOVER2=Math.PI/2,Constants.TWOPI=2*Math.PI,Constants.TWOTHIRD=2/3,Constants.ARCSECOND_RADIAN=484813681109536e-20,SpatialVector=function(){function t(t,e,n){"use strict";this.x=t,this.y=e,this.z=n,this.ra_=0,this.dec_=0,this.okRaDec_=!1}return t.prototype.setXYZ=function(t,e,n){this.x=t,this.y=e,this.z=n,this.okRaDec_=!1},t.prototype.length=function(){"use strict";return Math.sqrt(this.lengthSquared())},t.prototype.lengthSquared=function(){"use strict";return this.x*this.x+this.y*this.y+this.z*this.z},t.prototype.normalized=function(){"use strict";var t=this.length();this.x/=t,this.y/=t,this.z/=t},t.prototype.set=function(t,e){"use strict";this.ra_=t,this.dec_=e,this.okRaDec_=!0,this.updateXYZ()},t.prototype.angle=function(t){"use strict";var e=this.y*t.z-this.z*t.y,n=this.z*t.x-this.x*t.z,r=this.x*t.y-this.y*t.x,i=Math.sqrt(e*e+n*n+r*r);return Math.abs(Math.atan2(i,dot(t)))},t.prototype.get=function(){"use strict";return[x,y,z]},t.prototype.toString=function(){"use strict";return"SpatialVector["+this.x+", "+this.y+", "+this.z+"]"},t.prototype.cross=function(e){"use strict";return new t(this.y*e.z-e.y*this.z,this.z*e.x-e.z*this.x,this.x*e.y-e.x()*this.y)},t.prototype.equal=function(t){"use strict";return this.x==t.x&&this.y==t.y&&this.z==t.z()?!0:!1},t.prototype.mult=function(e){"use strict";return new t(e*this.x,e*this.y,e*this.z)},t.prototype.dot=function(t){"use strict";return this.x*t.x+this.y*t.y+this.z*t.z},t.prototype.add=function(e){"use strict";return new t(this.x+e.x,this.y+e.y,this.z+e.z)},t.prototype.sub=function(e){"use strict";return new t(this.x-e.x,this.y-e.y,this.z-e.z)},t.prototype.dec=function(){"use strict";return this.okRaDec_||(this.normalized(),this.updateRaDec()),this.dec_},t.prototype.ra=function(){"use strict";return this.okRaDec_||(this.normalized(),this.updateRaDec()),this.ra_},t.prototype.updateXYZ=function(){"use strict";var t=Math.cos(this.dec_*Constants.C_PR);this.x=Math.cos(this.ra_*Constants.C_PR)*t,this.y=Math.sin(this.ra_*Constants.C_PR)*t,this.z=Math.sin(this.dec_*Constants.C_PR)},t.prototype.updateRaDec=function(){"use strict";this.dec_=Math.asin(this.z)/Constants.C_PR;var t=Math.cos(this.dec_*Constants.C_PR);this.ra_=t>Constants.EPS||-Constants.EPS>t?this.y>Constants.EPS||this.y<-Constants.EPS?0>this.y?360-Math.acos(this.x/t)/Constants.C_PR:Math.acos(this.x/t)/Constants.C_PR:0>this.x?180:0:0,this.okRaDec_=!0},t.prototype.toRaRadians=function(){"use strict";var t=0;return(0!=this.x||0!=this.y)&&(t=Math.atan2(this.y,this.x)),0>t&&(t+=2*Math.PI),t},t.prototype.toDeRadians=function(){var t=z/this.length(),e=Math.acos(t);return Math.PI/2-e},t}(),AngularPosition=function(){return AngularPosition=function(t,e){"use strict";this.theta=t,this.phi=e},AngularPosition.prototype.toString=function(){"use strict";return"theta: "+this.theta+", phi: "+this.phi},AngularPosition}(),LongRangeSetBuilder=function(){function t(){this.items=[]}return t.prototype.appendRange=function(t,e){for(var n=t;e>=n;n++)n in this.items||this.items.push(n)},t}(),HealpixIndex=function(){function t(t){"use strict";this.nside=t}return t.NS_MAX=8192,t.ORDER_MAX=13,t.NSIDELIST=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192],t.JRLL=[2,2,2,2,3,3,3,3,4,4,4,4],t.JPLL=[1,3,5,7,0,2,4,6,1,3,5,7],t.XOFFSET=[-1,-1,0,1,1,1,0,-1],t.YOFFSET=[0,1,1,1,0,-1,-1,-1],t.FACEARRAY=[[8,9,10,11,-1,-1,-1,-1,10,11,8,9],[5,6,7,4,8,9,10,11,9,10,11,8],[-1,-1,-1,-1,5,6,7,4,-1,-1,-1,-1],[4,5,6,7,11,8,9,10,11,8,9,10],[0,1,2,3,4,5,6,7,8,9,10,11],[1,2,3,0,0,1,2,3,5,6,7,4],[-1,-1,-1,-1,7,4,5,6,-1,-1,-1,-1],[3,0,1,2,3,0,1,2,4,5,6,7],[2,3,0,1,-1,-1,-1,-1,0,1,2,3]],t.SWAPARRAY=[[0,0,0,0,0,0,0,0,3,3,3,3],[0,0,0,0,0,0,0,0,6,6,6,6],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,5,5,5,5],[0,0,0,0,0,0,0,0,0,0,0,0],[5,5,5,5,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[6,6,6,6,0,0,0,0,0,0,0,0],[3,3,3,3,0,0,0,0,0,0,0,0]],t.Z0=Constants.TWOTHIRD,t.prototype.init=function(){"use strict";var e=256;this.ctab=Array(e),this.utab=Array(e);for(var n=0;256>n;++n)this.ctab[n]=1&n|(2&n)<<7|(4&n)>>1|(8&n)<<6|(16&n)>>2|(32&n)<<5|(64&n)>>3|(128&n)<<4,this.utab[n]=1&n|(2&n)<<1|(4&n)<<2|(8&n)<<3|(16&n)<<4|(32&n)<<5|(64&n)<<6|(128&n)<<7;this.nl2=2*this.nside,this.nl3=3*this.nside,this.nl4=4*this.nside,this.npface=this.nside*this.nside,this.ncap=2*this.nside*(this.nside-1),this.npix=12*this.npface,this.fact2=4/this.npix,this.fact1=(this.nside<<1)*this.fact2,this.order=t.nside2order(this.nside)},t.calculateNSide=function(e){for(var n=0,r=e*e,i=180/Constants.PI,o=5184e4*Constants.PI*i*i,a=Utils.castToInt(o/r),s=a/12,l=Math.sqrt(s),u=t.NS_MAX,c=0,h=0;t.NSIDELIST.length>h;h++)if(u>=Math.abs(l-t.NSIDELIST[h])&&(u=Math.abs(l-t.NSIDELIST[h]),n=t.NSIDELIST[h],c=h),l>n&&t.NS_MAX>l&&(n=t.NSIDELIST[c+1]),l>t.NS_MAX)return console.log("nside cannot be bigger than "+t.NS_MAX),t.NS_MAX;return n},t.nside2order=function(e){"use strict";return(e&e-1)>0?-1:Utils.castToInt(t.log2(e))},t.log2=function(t){"use strict";return Math.log(t)/Math.log(2)},t.prototype.ang2pix_nest=function(e,n){"use strict";var r,i,o,a,s,l,u,c,h,f,d,p,g;if(n>=Constants.TWOPI&&(n-=Constants.TWOPI),0>n&&(n+=Constants.TWOPI),e>Constants.PI||0>e)throw{name:"Illegal argument",message:"theta must be between 0 and "+Constants.PI};if(n>Constants.TWOPI||0>n)throw{name:"Illegal argument",message:"phi must be between 0 and "+Constants.TWOPI};if(i=Math.cos(e),o=Math.abs(i),a=n/Constants.PIOVER2,t.Z0>=o){var m=this.nside*(.5+a),v=.75*this.nside*i,c=m-v,h=m+v;l=c>>this.order,u=h>>this.order,d=l==u?4==l?4:l+4:u>l?l:u+8,p=Utils.castToInt(h&this.nside-1),g=Utils.castToInt(this.nside-(c&this.nside-1)-1)}else{f=Utils.castToInt(a),f>=4&&(f=3),s=a-f;var y=this.nside*Math.sqrt(3*(1-o));c=Utils.castToInt(s*y),h=Utils.castToInt((1-s)*y),c=Math.min(t.NS_MAX-1,c),h=Math.min(t.NS_MAX-1,h),i>=0?(d=f,p=Utils.castToInt(this.nside-h-1),g=Utils.castToInt(this.nside-c-1)):(d=f+8,p=c,g=h)}return r=this.xyf2nest(p,g,d)},t.prototype.xyf2nest=function(t,e,n){"use strict";return(n<<2*this.order)+(this.utab[255&t]|this.utab[255&t>>8]<<16|this.utab[255&t>>16]<<32|this.utab[255&t>>24]<<48|this.utab[255&e]<<1|this.utab[255&e>>8]<<17|this.utab[255&e>>16]<<33|this.utab[255&e>>24]<<49)},t.prototype.nest2xyf=function(t){"use strict";var e={};e.face_num=t>>2*this.order;var n=t&this.npface-1,r=(93823560581120&n)>>16|(614882086624428e4&n)>>31|21845&n|(1431633920&n)>>15;return e.ix=this.ctab[255&r]|this.ctab[255&r>>8]<<4|this.ctab[255&r>>16]<<16|this.ctab[255&r>>24]<<20,n>>=1,r=(93823560581120&n)>>16|(614882086624428e4&n)>>31|21845&n|(1431633920&n)>>15,e.iy=this.ctab[255&r]|this.ctab[255&r>>8]<<4|this.ctab[255&r>>16]<<16|this.ctab[255&r>>24]<<20,e},t.prototype.pix2ang_nest=function(e){"use strict";if(0>e||e>this.npix-1)throw{name:"Illegal argument",message:"ipix out of range"};var n,r,i,o=this.nest2xyf(e),a=o.ix,s=o.iy,l=o.face_num,u=(t.JRLL[l]<<this.order)-a-s-1;this.nside>u?(n=u,r=1-n*n*this.fact2,i=0):u>this.nl3?(n=this.nl4-u,r=n*n*this.fact2-1,i=0):(n=this.nside,r=(this.nl2-u)*this.fact1,i=1&u-this.nside);var c=Math.acos(r),h=(t.JPLL[l]*n+a-s+1+i)/2;h>this.nl4&&(h-=this.nl4),1>h&&(h+=this.nl4);var f=(h-.5*(i+1))*(Constants.PIOVER2/n);return{theta:c,phi:f}},t.nside2Npix=function(e){"use strict";if(0>e||(e&-e)!=e||e>t.NS_MAX)throw{name:"Illegal argument",message:"nside should be >0, power of 2, <"+t.NS_MAX};var n=12*e*e;return n},t.prototype.xyf2ring=function(e,n,r){"use strict";var i,o,a,s=t.JRLL[r]*this.nside-e-n-1;this.nside>s?(i=s,a=2*i*(i-1),o=0):s>3*this.nside?(i=this.nl4-s,a=this.npix-2*(i+1)*i,o=0):(i=this.nside,a=this.ncap+(s-this.nside)*this.nl4,o=1&s-this.nside);var l=(t.JPLL[r]*i+e-n+1+o)/2;return l>this.nl4?l-=this.nl4:1>l&&(l+=this.nl4),a+l-1},t.prototype.nest2ring=function(t){"use strict";var e=this.nest2xyf(t),n=this.xyf2ring(e.ix,e.iy,e.face_num);return n},t.prototype.corners_nest=function(t,e){"use strict";var n=this.nest2ring(t);return this.corners_ring(n,e)},t.prototype.pix2ang_ring=function(t){"use strict";var e,n,r,i,o,a,s,l,u;if(0>t||t>this.npix-1)throw{name:"Illegal argument",message:"ipix out of range"};return a=t+1,this.ncap>=a?(l=a/2,u=Utils.castToInt(l),r=Utils.castToInt(Math.sqrt(l-Math.sqrt(u)))+1,i=a-2*r*(r-1),e=Math.acos(1-r*r*this.fact2),n=(i-.5)*Constants.PI/(2*r)):this.npix-this.ncap>t?(o=t-this.ncap,r=o/this.nl4+this.nside,i=o%this.nl4+1,s=(1&r+this.nside)>0?1:.5,e=Math.acos((this.nl2-r)*this.fact1),n=(i-s)*Constants.PI/this.nl2):(o=this.npix-t,r=Utils.castToInt(.5*(1+Math.sqrt(2*o-1))),i=4*r+1-(o-2*r*(r-1)),e=Math.acos(-1+Math.pow(r,2)*this.fact2),n=(i-.5)*Constants.PI/(2*r)),[e,n]},t.prototype.ring=function(t){"use strict";var e,n,r=0,i=t+1,o=0;return this.ncap>=i?(n=i/2,o=Utils.castToInt(n),r=Utils.castToInt(Math.sqrt(n-Math.sqrt(o)))+1):this.nl2*(5*this.nside+1)>=i?(e=Utils.castToInt(i-this.ncap-1),r=Utils.castToInt(e/this.nl4+this.nside)):(e=this.npix-i+1,n=e/2,o=Utils.castToInt(n),r=Utils.castToInt(Math.sqrt(n-Math.sqrt(o)))+1,r=this.nl4-r),r},t.prototype.integration_limits_in_costh=function(t){"use strict";var e,n,r,i;return i=1*this.nside,this.nside>=t?(n=1-Math.pow(t,2)/3/this.npface,r=1-Math.pow(t-1,2)/3/this.npface,e=t==this.nside?2*(this.nside-1)/3/i:1-Math.pow(t+1,2)/3/this.npface):this.nl3>t?(n=2*(2*this.nside-t)/3/i,r=2*(2*this.nside-t+1)/3/i,e=2*(2*this.nside-t-1)/3/i):(r=t==this.nl3?2*(-this.nside+1)/3/i:-1+Math.pow(4*this.nside-t+1,2)/3/this.npface,e=-1+Math.pow(this.nl4-t-1,2)/3/this.npface,n=-1+Math.pow(this.nl4-t,2)/3/this.npface),[r,n,e]},t.prototype.pixel_boundaries=function(t,e,n,r){var i,o,a,s,l,u,c,h,f=1*this.nside;if(Math.abs(r)>=1-1/3/this.npface)return c=n*Constants.PIOVER2,h=(n+1)*Constants.PIOVER2,[c,h];if(1.5*r>=1)i=Math.sqrt(3*(1-r)),o=1/f/i,a=e,s=a-1,l=t-e,u=l+1,c=Constants.PIOVER2*(Math.max(s*o,1-u*o)+n),h=Constants.PIOVER2*(Math.min(1-l*o,a*o)+n);else if(1.5*r>-1){var d=.5*(1-1.5*r),p=d+1,g=this.nside+t%2;a=e-(g-t)/2,s=a-1,l=(g+t)/2-e,u=l+1,c=Constants.PIOVER2*(Math.max(p-u/f,-d+s/f)+n),h=Constants.PIOVER2*(Math.min(p-l/f,-d+a/f)+n)}else{i=Math.sqrt(3*(1+r)),o=1/f/i;var m=2*this.nside;a=t-m+e,s=a-1,l=m-e,u=l+1,c=Constants.PIOVER2*(Math.max(1-(m-s)*o,(m-u)*o)+n),h=Constants.PIOVER2*(Math.min(1-(m-a)*o,(m-l)*o)+n)}return[c,h]},t.vector=function(t,e){"use strict";var n=1*Math.sin(t)*Math.cos(e),r=1*Math.sin(t)*Math.sin(e),i=1*Math.cos(t);return new SpatialVector(n,r,i)},t.prototype.corners_ring=function(e,n){"use strict";var r=2*n+2,i=Array(r),o=this.pix2ang_ring(e),a=Math.cos(o[0]),s=o[0],l=o[1],u=Utils.castToInt(l/Constants.PIOVER2),c=this.ring(e),h=Math.min(c,Math.min(this.nside,this.nl4-c)),f=0,d=Constants.PIOVER2/h;f=c>=this.nside&&this.nl3>=c?Utils.castToInt(l/d+c%2/2)+1:Utils.castToInt(l/d)+1,f-=u*h;var p=r/2,g=this.integration_limits_in_costh(c),m=Math.acos(g[0]),v=Math.acos(g[2]),y=this.pixel_boundaries(c,f,u,g[0]);if(i[0]=f>h/2?t.vector(m,y[1]):t.vector(m,y[0]),y=this.pixel_boundaries(c,f,u,g[2]),i[p]=f>h/2?t.vector(v,y[1]):t.vector(v,y[0]),1==n){var x=Math.acos(g[1]);y=this.pixel_boundaries(c,f,u,g[1]),i[1]=t.vector(x,y[0]),i[3]=t.vector(x,y[1])}else for(var b=g[2]-g[0],w=b/(n+1),C=1;n>=C;C++)a=g[0]+w*C,s=Math.acos(a),y=this.pixel_boundaries(c,f,u,a),i[C]=t.vector(s,y[0]),i[r-C]=t.vector(s,y[1]);return i},t.vec2Ang=function(t){"use strict";var e=t.z/t.length(),n=Math.acos(e),r=0;return(0!=t.x||0!=t.y)&&(r=Math.atan2(t.y,t.x)),0>r&&(r+=2*Math.PI),[n,r]},t.prototype.queryDisc=function(e,n,r,i){"use strict";if(0>n||n>Constants.PI)throw{name:"Illegal argument",message:"angular radius is in RADIAN and should be in [0,pi]"};var o,a,s,l,u,c,h,f,d,p,g,m,v,y,x,b,w,C,M,S=new LongRangeSetBuilder,_=null,u=n;if(i&&(u+=Constants.PI/this.nl4),_=t.vec2Ang(e),c=_[0],h=_[1],g=this.fact2,m=this.fact1,l=Math.cos(c),M=1/Math.sqrt((1-l)*(1+l)),y=c-u,x=c+u,f=Math.cos(u),w=Math.cos(y),o=this.ringAbove(w)+1,b=Math.cos(x),a=this.ringAbove(b),o>a&&0==a&&(a=o),0>=y)for(var k=1;o>k;++k)this.inRing(k,0,Math.PI,S);for(s=o;a>=s;++s)C=this.nside>s?1-s*s*g:this.nl3>=s?(this.nl2-s)*m:-1+(this.nl4-s)*(this.nl4-s)*g,d=(f-C*l)*M,p=1-C*C-d*d,v=Math.atan2(Math.sqrt(p),d),isNaN(v)&&(v=u),this.inRing(s,h,v,S);if(x>=Math.PI)for(var k=a+1;this.nl4>k;++k)this.inRing(k,0,Math.PI,S,!1);var T;if(r){for(var N=S.items,A=[],E=0;N.length>E;E++){var R=this.ring2nest(N[E]);A.indexOf(R)>=0||A.push(R)}T=A}else T=S.items;return T},t.prototype.inRing=function(t,e,n,r,i){"use strict";var o,a,s,l,u=!1,c=!1,h=1e-12,f=0,d=0,p=0,g=0,m=(e-n)%Constants.TWOPI-h,v=e+n+h,y=(e+n)%Constants.TWOPI+h;if(h>Math.abs(n-Constants.PI)&&(u=!0),t>=this.nside&&this.nl3>=t?(d=t-this.nside+1,s=this.ncap+this.nl4*(d-1),l=s+this.nl4-1,o=d%2,a=this.nl4):(this.nside>t?(d=t,s=2*d*(d-1),l=s+4*d-1):(d=4*this.nside-t,s=this.npix-2*d*(d+1),l=s+4*d-1),a=4*d,o=1),u)return void r.appendRange(s,l);if(f=o/2,i)p=Math.round(a*m/Constants.TWOPI-f),g=Math.round(a*v/Constants.TWOPI-f),p%=a,g>a&&(g%=a);else{if(p=Math.ceil(a*m/Constants.TWOPI-f),g=Utils.castToInt(a*y/Constants.TWOPI-f),p>g&&1==t&&(g=Utils.castToInt(a*v/Constants.TWOPI-f)),p==g+1&&(p=g),1==p-g&&Constants.PI>n*a)return void console.log("the interval is too small and avay from center");p=Math.min(p,a-1),g=Math.max(g,0)}if(p>g&&(c=!0),c)p+=s,g+=s,r.appendRange(s,g),r.appendRange(p,l);else{if(0>p)return p=Math.abs(p),r.appendRange(s,s+g),void r.appendRange(l-p+1,l);p+=s,g+=s,r.appendRange(p,g)}},t.prototype.ringAbove=function(t){"use strict";var e=Math.abs(t);if(e>Constants.TWOTHIRD){var n=Utils.castToInt(this.nside*Math.sqrt(3*(1-e)));return t>0?n:4*this.nside-n-1}return Utils.castToInt(this.nside*(2-1.5*t))},t.prototype.ring2nest=function(t){"use strict";var e=this.ring2xyf(t);return this.xyf2nest(e.ix,e.iy,e.face_num)},t.prototype.ring2xyf=function(e){"use strict";var n,r,i,o,a={};if(this.ncap>e){n=Utils.castToInt(.5*(1+Math.sqrt(1+2*e))),r=e+1-2*n*(n-1),i=0,o=n,a.face_num=0;var s=r-1;s>=2*n&&(a.face_num=2,s-=2*n),s>=n&&++a.face_num}else if(this.npix-this.ncap>e){var l=e-this.ncap;this.order>=0?(n=(l>>this.order+2)+this.nside,r=(l&this.nl4-1)+1):(n=l/this.nl4+this.nside,r=l%this.nl4+1),i=1&n+this.nside,o=this.nside;var u,c,h=n-this.nside+1,f=this.nl2+2-h;this.order>=0?(u=r-Utils.castToInt(h/2)+this.nside-1>>this.order,c=r-Utils.castToInt(f/2)+this.nside-1>>this.order):(u=(r-Utils.castToInt(h/2)+this.nside-1)/this.nside,c=(r-Utils.castToInt(f/2)+this.nside-1)/this.nside),a.face_num=c==u?4==c?4:Utils.castToInt(c)+4:u>c?Utils.castToInt(c):Utils.castToInt(u)+8}else{var l=this.npix-e;n=Utils.castToInt(.5*(1+Math.sqrt(2*l-1))),r=4*n+1-(l-2*n*(n-1)),i=0,o=n,n=2*this.nl2-n,a.face_num=8;var s=r-1;s>=2*o&&(a.face_num=10,s-=2*o),s>=o&&++a.face_num}var d=n-t.JRLL[a.face_num]*this.nside+1,p=2*r-t.JPLL[a.face_num]*o-i-1;return p>=this.nl2&&(p-=8*this.nside),a.ix=p-d>>1,a.iy=-(p+d)>>1,a},t}(),Utils=function(){},Utils.radecToPolar=function(t,e){return{theta:Math.PI/2-e/180*Math.PI,phi:t/180*Math.PI}},Utils.polarToRadec=function(t,e){return{ra:180*e/Math.PI,dec:180*(Math.PI/2-t)/Math.PI}},Utils.castToInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},AstroMath.D2R=Math.PI/180,AstroMath.R2D=180/Math.PI,AstroMath.sign=function(t){return t>0?1:0>t?-1:0},AstroMath.cosd=function(t){if(t%90==0){var e=Math.abs(Math.floor(t/90+.5))%4;switch(e){case 0:return 1;case 1:return 0;case 2:return-1;case 3:return 0}}return Math.cos(t*AstroMath.D2R)},AstroMath.sind=function(t){if(t%90===0){var e=Math.abs(Math.floor(t/90-.5))%4;switch(e){case 0:return 1;case 1:return 0;case 2:return-1;case 3:return 0}}return Math.sin(t*AstroMath.D2R)},AstroMath.tand=function(t){var e;return e=t%360,0==e||180==Math.abs(e)?0:45==e||225==e?1:-135==e||-315==e?-1:Math.tan(t*AstroMath.D2R)},AstroMath.asind=function(t){return Math.asin(t)*AstroMath.R2D},AstroMath.acosd=function(t){return Math.acos(t)*AstroMath.R2D},AstroMath.atand=function(t){return Math.atan(t)*AstroMath.R2D},AstroMath.atan2=function(t,e){if(0==t)return e>0?0:0>e?Math.PI:NaN;var n=AstroMath.sign(t);if(0==e)return Math.PI/2*n;var r=Math.atan(Math.abs(t/e));return e>0?r*n:0>e?(Math.PI-r)*n:void 0},AstroMath.atan2d=function(t,e){return AstroMath.atan2(t,e)*AstroMath.R2D},AstroMath.cosh=function(t){return(Math.exp(t)+Math.exp(-t))/2},AstroMath.sinh=function(t){return(Math.exp(t)-Math.exp(-t))/2},AstroMath.tanh=function(t){return(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))},AstroMath.acosh=function(t){return Math.log(t+Math.sqrt(t*t-1))},AstroMath.asinh=function(t){return Math.log(t+Math.sqrt(t*t+1))},AstroMath.atanh=function(t){return.5*Math.log((1+t)/(1-t))},AstroMath.sinc=function(t){var e=Math.abs(t),n;return.001>=e?(e*=e,n=1-e*(1-e/20)/6):n=Math.sin(e)/e,n},AstroMath.asinc=function(t){var e=Math.abs(t),n;return.001>=e?(e*=e,n=1+e*(6+.45*e)/6):n=Math.asin(e)/e,n},AstroMath.hypot=function(t,e){return Math.sqrt(t*t+e*e)},AstroMath.eulerMatrix=function(t,e,n){var r=new Array(3);r[0]=new Array(3),r[1]=new Array(3),r[2]=new Array(3);var i=AstroMath.cosd(t),o=AstroMath.sind(t),a=AstroMath.cosd(e),s=AstroMath.sind(e),l=AstroMath.cosd(n),u=AstroMath.sind(n);return r[0][0]=l*a*i-u*o,r[0][1]=-u*a*i-l*o,r[0][2]=-s*i,r[1][0]=l*a*o+u*i,r[1][1]=-u*a*o+l*i,r[1][2]=-s*o,r[2][0]=-s*l,r[2][1]=-s*i,r[2][2]=a,r},AstroMath.displayMatrix=function(t){for(var e=t.length,n=0,r=0;e>r;r++)t[r].length>n&&(n=t[r].length);for(var i="<table>\n",r=0;e>r;r++){i+="<tr>";for(var o=0;e>o;o++)i+="<td>",r<t[r].length&&(i+=t[r][o].toString()),i+="</td>";i+="</td>\n"}return i+="</table>\n"},Projection.PROJ_TAN=1,Projection.PROJ_TAN2=2,Projection.PROJ_STG=2,Projection.PROJ_SIN=3,Projection.PROJ_SIN2=4,Projection.PROJ_ZEA=4,Projection.PROJ_ARC=5,Projection.PROJ_SCHMIDT=5,Projection.PROJ_AITOFF=6,Projection.PROJ_AIT=6,Projection.PROJ_GLS=7,Projection.PROJ_MERCATOR=8,Projection.PROJ_MER=8,Projection.PROJ_LAM=9,Projection.PROJ_LAMBERT=9,Projection.PROJ_TSC=10,Projection.PROJ_QSC=11,Projection.PROJ_LIST=["Mercator",Projection.PROJ_MERCATOR,"Gnomonic",Projection.PROJ_TAN,"Stereographic",Projection.PROJ_TAN2,"Orthographic",Projection.PROJ_SIN,"Zenithal",Projection.PROJ_ZEA,"Schmidt",Projection.PROJ_SCHMIDT,"Aitoff",Projection.PROJ_AITOFF,"Lambert",Projection.PROJ_LAMBERT],Projection.PROJ_NAME=["-","Gnomonic","Stereographic","Orthographic","Equal-area","Schmidt plates","Aitoff","Global sin","Mercator","Lambert"],Projection.prototype={setCenter:function(t,e){this.ROT=this.tr_oR(t,e)},setProjection:function(t){this.PROJECTION=t},project:function(t,e){var n=this.tr_ou(t,e),r=this.tr_uu(n,this.ROT),i=this.tr_up(this.PROJECTION,r);return null==i?null:{X:-i[0],Y:-i[1]}},unproject:function(t,e){t=-t,e=-e;var n=this.tr_pu(this.PROJECTION,t,e),r=this.tr_uu1(n,this.ROT),i=this.tr_uo(r);return{ra:i[0],dec:i[1]}},tr_up:function(t,e){var n=e[0],r=e[1],i=e[2],o,a,s,l,u;if(o=AstroMath.hypot(n,r),0==o&&0==i)return null;switch(t){default:s=null;break;case Projection.PROJ_AITOFF:a=Math.sqrt(o*(o+n)/2),l=Math.sqrt(2*o*(o-n)),a=Math.sqrt((1+a)/2),l/=a,u=i/a,0>r&&(l=-l),s=[l,u];break;case Projection.PROJ_GLS:u=Math.asin(i),l=0!=o?Math.atan2(r,n)*o:0,s=[l,u];break;case Projection.PROJ_MERCATOR:0!=o?(l=Math.atan2(r,n),u=AstroMath.atanh(i),s=[l,u]):s=null;break;case Projection.PROJ_TAN:n>0?(l=r/n,u=i/n,s=[l,u]):s=null;break;case Projection.PROJ_TAN2:a=(1+n)/2,a>0?(l=r/a,u=i/a,s=[l,u]):s=null;break;case Projection.PROJ_ARC:-1>=n?(l=Math.PI,u=0):(o=AstroMath.hypot(r,i),a=n>0?AstroMath.asinc(o):Math.acos(n)/o,l=r*a,u=i*a),s=[l,u];break;case Projection.PROJ_SIN:n>=0?(l=r,u=i,s=[l,u]):s=null;break;case Projection.PROJ_SIN2:a=Math.sqrt((1+n)/2),0!=a?(l=r/a,u=i/a):(l=2,u=0),s=[l,u];break;case Projection.PROJ_LAMBERT:u=i,l=0,0!=o&&(l=Math.atan2(r,n)),s=[l,u]}return s},tr_pu:function(t,e,n){var r,i,o,a,s;switch(t){default:return null;case Projection.PROJ_AITOFF:if(r=e*e/8+n*n/2,r>1)return null;o=1-r,i=Math.sqrt(1-r/2),a=e*i/2,s=n*i,r=AstroMath.hypot(o,a),0!=r&&(i=o,o=(i*i-a*a)/r,a=2*i*a/r);break;case Projection.PROJ_GLS:if(s=Math.sin(n),r=1-s*s,0>r)return null;r=Math.sqrt(r),i=0!=r?e/r:0,o=r*Math.cos(i),a=r*Math.sin(i);break;case Projection.PROJ_MERCATOR:s=AstroMath.tanh(n),r=1/AstroMath.cosh(n),o=r*Math.cos(e),a=r*Math.sin(e);break;case Projection.PROJ_LAMBERT:if(s=n,r=1-s*s,0>r)return null;r=Math.sqrt(r),o=r*Math.cos(e),a=r*Math.sin(e);break;case Projection.PROJ_TAN:o=1/Math.sqrt(1+e*e+n*n),a=e*o,s=n*o;break;case Projection.PROJ_TAN2:r=(e*e+n*n)/4,i=1+r,o=(1-r)/i,a=e/i,s=n/i;break;case Projection.PROJ_ARC:if(r=AstroMath.hypot(e,n),r>Math.PI)return null;i=AstroMath.sinc(r),o=Math.cos(r),a=i*e,s=i*n;break;case Projection.PROJ_SIN:if(i=1-e*e-n*n,0>i)return null;o=Math.sqrt(i),a=e,s=n;break;case Projection.PROJ_SIN2:if(r=(e*e+n*n)/4,r>1)return null;i=Math.sqrt(1-r),o=1-2*r,a=i*e,s=i*n}return[o,a,s]},tr_oR:function(t,e){var n=new Array(3);return n[0]=new Array(3),n[1]=new Array(3),n[2]=new Array(3),n[2][2]=AstroMath.cosd(e),n[0][2]=AstroMath.sind(e),n[1][1]=AstroMath.cosd(t),n[1][0]=-AstroMath.sind(t),n[1][2]=0,n[0][0]=n[2][2]*n[1][1],n[0][1]=-n[2][2]*n[1][0],n[2][0]=-n[0][2]*n[1][1],n[2][1]=n[0][2]*n[1][0],n},tr_ou:function(t,e){var n=new Array(3),r=AstroMath.cosd(e);return n[0]=r*AstroMath.cosd(t),n[1]=r*AstroMath.sind(t),n[2]=AstroMath.sind(e),n},tr_uu:function(t,e){var n=new Array(3),r=t[0],i=t[1],o=t[2];return n[0]=e[0][0]*r+e[0][1]*i+e[0][2]*o,n[1]=e[1][0]*r+e[1][1]*i+e[1][2]*o,n[2]=e[2][0]*r+e[2][1]*i+e[2][2]*o,n},tr_uu1:function(t,e){var n=new Array(3),r=t[0],i=t[1],o=t[2];return n[0]=e[0][0]*r+e[1][0]*i+e[2][0]*o,n[1]=e[0][1]*r+e[1][1]*i+e[2][1]*o,n[2]=e[0][2]*r+e[1][2]*i+e[2][2]*o,n},tr_uo:function(t){var e=t[0],n=t[1],r=t[2],i=e*e+n*n,o,a;if(0==i){if(0==r)return null;o=0,a=r>0?90:-90}else a=AstroMath.atand(r/Math.sqrt(i)),o=AstroMath.atan2d(n,e),0>o&&(o+=360);return[o,a]}},Coo.factor=[3600,60,1],Coo.prototype={setFrame:function(t){this.frame=t},computeDirCos:function(){var t=AstroMath.cosd(this.lat);this.x=t*AstroMath.cosd(this.lon),this.y=t*AstroMath.sind(this.lon),this.z=AstroMath.sind(this.lat)},computeLonLat:function(){var t=this.x*this.x+this.y*this.y;this.lon=0,0==t?0==this.z?(this.lon=NaN,this.lat=NaN):this.lat=this.z>0?90:-90:(this.lon=AstroMath.atan2d(this.y,this.x),this.lat=AstroMath.atan2d(this.z,Math.sqrt(t)),this.lon<0&&(this.lon+=360))},dist2:function(t){var e=t.x-this.x,n=e*e;return e=t.y-this.y,n+=e*e,e=t.z-this.z,n+=e*e},distance:function(t){return 0==t.x&&0==t.y&&0==t.z?NaN:0==this.x&&0==this.y&&0==this.z?NaN:2*AstroMath.asind(.5*Math.sqrt(this.dist2(t)))},convertTo:function(t){this.frame.equals(t)||(this.frame.toICRS(this.coo),t.fromICRS(this.coo),this.frame=t,this.lon=this.lat=NaN)},rotate:function(t){var e,n,r;t!=Umatrix3&&(e=t[0][0]*this.x+t[0][1]*this.y+t[0][2]*this.z,n=t[1][0]*this.x+t[1][1]*this.y+t[1][2]*this.z,r=t[2][0]*this.x+t[2][1]*this.y+t[2][2]*this.z,this.x=e,this.y=n,this.z=r,this.lon=this.lat=NaN)},rotate_1:function(t){var e,n,r;t!=Umatrix3&&(e=t[0][0]*this.x+t[1][0]*this.y+t[2][0]*this.z,n=t[0][1]*this.x+t[1][1]*this.y+t[2][1]*this.z,r=t[0][2]*this.x+t[1][2]*this.y+t[2][2]*this.z,this.x=e,this.y=n,this.z=r,this.lon=this.lat=NaN)},equals:function(t){return this.x==t.x&&this.y==t.y&&this.z==t.z},parse:function(t){var e=t.indexOf("+");if(0>e&&(e=t.indexOf("-")),0>e&&(e=t.indexOf(" ")),0>e)return this.lon=NaN,this.lat=NaN,this.prec=0,!1;var n=t.substring(0,e),r=t.substring(e);return this.lon=this.parseLon(n),this.lat=this.parseLat(r),!0},parseLon:function(t){var t=t.trim();if(t=t.replace(/:/g," "),t.indexOf(" ")<0){var e=t.indexOf(".");return this.prec=0>e?0:t.length-e-1,parseFloat(t)}for(var n=new Tokenizer(t," "),r=0,i=0,o=0;n.hasMore();){var a=n.nextToken(),s=a.indexOf(".");switch(i+=parseFloat(a)*Coo.factor[r],r){case 0:o=0>s?1:2;break;case 1:o=0>s?3:4;break;case 2:o=0>s?5:4+a.length-s}r++}return this.prec=o,15*i/3600},parseLat:function(t){var t=t.trim();t=t.replace(/:/g," ");var e;if("-"==t.charAt(0)?(e=-1,t=t.substring(1)):"-"==t.charAt(0)?(e=1,t=t.substring(1)):e=1,t.indexOf(" ")<0){var n=t.indexOf(".");return this.prec=0>n?0:t.length-n-1,parseFloat(t)*e}for(var r=new Tokenizer(t," "),i=0,o=0,a=0;r.hasMore();){var s=r.nextToken(),l=s.indexOf(".");switch(o+=parseFloat(s)*Coo.factor[i],i){case 0:a=0>l?1:2;break;case 1:a=0>l?3:4;break;case 2:a=0>l?5:4+s.length-l}i++}return this.prec=a,o*e/3600},format:function(t){isNaN(this.lon)&&this.computeLonLat();var e="",n="";if(t.indexOf("d")>=0)e=Numbers.format(this.lon,this.prec),n=Numbers.format(this.lat,this.prec);else var r=this.lon/15,e=Numbers.toSexagesimal(r,this.prec+1,!1),n=Numbers.toSexagesimal(this.lat,this.prec,!1);return this.lat>0&&(n="+"+n),t.indexOf("/")>=0?e+" "+n:t.indexOf("2")>=0?[e,n]:e+n}},Tokenizer.prototype={hasMore:function(){return this.pos<this.string.length},nextToken:function(){for(var t=this.pos;t<this.string.length&&this.string.charAt(t)==this.sep;)t++;for(var e=t;e<this.string.length&&this.string.charAt(e)!=this.sep;)e++;return this.pos=e,this.string.substring(t,e)}},Strings.trim=function(t,e){for(var n=0,r=t.length-1;n<t.length&&t.charAt(n)==e;)n++;if(n==t.length)return"";for(;r>n&&t.charAt(r)==e;)r--;return t.substring(n,r+1)},Numbers.pow10=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13,1e14],Numbers.rndval=[.5,.05,.005,5e-4,5e-5,5e-6,5e-7,5e-8,5e-9,5e-10,5e-11,5e-12,5e-13,5e-14,5e-14],Numbers.format=function(t,e){if(0>=e)return Math.round(t).toString();var n=t.toString(),r=n.indexOf("."),i=r>=0?n.length-r-1:0;if(e>=i){0>r&&(n+=".");for(var o=0;e-i>o;o++)n+="0";return n}return n=(t+Numbers.rndval[e]).toString(),n.substr(0,r+e+1)},Numbers.toSexagesimal=function(t,e,n){var r="",i=0>t?"-":n?"+":"",o=Math.abs(t);switch(e){case 1:var a=Math.round(o);return i+a.toString();case 2:return i+Numbers.format(o,1);case 3:var a=Math.floor(o),s=Math.round(60*(o-a));return i+a+" "+s;case 4:var a=Math.floor(o),s=60*(o-a);return i+a+" "+Numbers.format(s,1);case 5:var a=Math.floor(o),s=60*(o-a),l=Math.floor(s),u=Math.round(60*(s-l));return i+a+" "+l+" "+u;case 6:case 7:case 8:var a=Math.floor(o);10>a&&(a="0"+a);var s=60*(o-a),l=Math.floor(s);10>l&&(l="0"+l);var u=60*(s-l);return i+a+" "+l+" "+Numbers.format(u,e-5);default:return i+Numbers.format(o,1)}},CooConversion=function(){var t={};return t.GALACTIC_TO_J2000=[-.0548755604024359,.4941094279435681,-.867666148981161,-.8734370902479237,-.4448296299195045,-.1980763734646737,-.4838350155267381,.7469822444763707,.4559837762325372],t.J2000_TO_GALACTIC=[-.0548755604024359,-.873437090247923,-.4838350155267381,.4941094279435681,-.4448296299195045,.7469822444763707,-.867666148981161,-.1980763734646737,.4559837762325372],t.Transform=function(t,e){t[0]=t[0]*Math.PI/180,t[1]=t[1]*Math.PI/180;var n=new Array(Math.cos(t[0])*Math.cos(t[1]),Math.sin(t[0])*Math.cos(t[1]),Math.sin(t[1])),r=new Array(n[0]*e[0]+n[1]*e[1]+n[2]*e[2],n[0]*e[3]+n[1]*e[4]+n[2]*e[5],n[0]*e[6]+n[1]*e[7]+n[2]*e[8]),i=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]),o=new Array(0,0);o[1]=Math.asin(r[2]/i);var a=r[0]/i/Math.cos(o[1]),s=r[1]/i/Math.cos(o[1]);return o[0]=Math.atan2(s,a),o[0]<0&&(o[0]=o[0]+2*Math.PI),o[0]=180*o[0]/Math.PI,o[1]=180*o[1]/Math.PI,o},t.GalacticToJ2000=function(e){return t.Transform(e,t.GALACTIC_TO_J2000)},t.J2000ToGalactic=function(e){return t.Transform(e,t.J2000_TO_GALACTIC)},t}(),Sesame=function(){return Sesame={},Sesame.cache={},Sesame.resolve=function(t,e,n){var r="http://cds.u-strasbg.fr/cgi-bin/nph-sesame.jsonp?";$.ajax({url:r,data:{object:t},method:"GET",dataType:"jsonp",success:function(t){t.Target&&t.Target.Resolver&&t.Target.Resolver?e(t):n(t)},error:n})},Sesame}(),HealpixCache=function(){var t={};return t.staticCache={corners:{nside8:[]}},t.dynamicCache={},t.lastNside=8,t.hpxIdxCache=null,t.init=function(){var e=new HealpixIndex(8);e.init();for(var n=HealpixIndex.nside2Npix(8),r=0;n>r;r++)t.staticCache.corners.nside8[r]=e.corners_nest(r,1);t.hpxIdxCache=e},t.corners_nest=function(e,n){return 8==n?t.staticCache.corners.nside8[e]:(n!=t.lastNside&&(t.hpxIdxCache=new HealpixIndex(n),t.hpxIdxCache.init(),t.lastNside=n),t.hpxIdxCache.corners_nest(e,1))},t}(),Utils=Utils||{},Utils.cssScale=void 0,HTMLCanvasElement.prototype.relMouseCoords=relMouseCoords,Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=[].slice,n=e.call(arguments,1),r=this,i=function(){},o=function(){return r.apply(this instanceof i?this:t||{},n.concat(e.call(arguments)))};return o.prototype=this.prototype,o}),$=$||jQuery,$.urlParam=function(t,e){return void 0===e&&(e=location.search),decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(e)||[,""])[1].replace(/\+/g,"%20"))||null},Utils.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},Utils.debounce=function(t,e){var n=null;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout(function(){t.apply(r,i)},e)}},Utils.LRUCache=function(t){this._keys=[],this._items={},this._expires={},this._size=0,this._maxsize=t||1024},Utils.LRUCache.prototype={set:function(t,e){var n=this._keys,r=this._items,i=this._expires,o=this._size,a=this._maxsize;o>=a&&(n.sort(function(t,e){return i[t]>i[e]?-1:i[t]<i[e]?1:0}),o--,delete i[n[o]],delete r[n[o]]),n[o]=t,r[t]=e,i[t]=Date.now(),o++,this._keys=n,this._items=r,this._expires=i,this._size=o},get:function(t){var e=this._items[t];return e&&(this._expires[t]=Date.now()),e},keys:function(){return this._keys}},Color={},Color.curIdx=0,Color.colors=["#ff0000","#0000ff","#99cc00","#ffff00","#000066","#00ffff","#9900cc","#0099cc","#cc9900","#cc0099","#00cc99","#663333","#ffcc9a","#ff9acc","#ccff33","#660000","#ffcc33","#ff00ff","#00ff00","#ffffff"],Color.getNextColor=function(){var t=Color.colors[Color.curIdx%Color.colors.length];return Color.curIdx++,t},AladinUtils=function(){return{xyToView:function(t,e,n,r,i,o,a){return void 0==a&&(a=!1),a?{vx:i/2*(1+o*t)-(i-n)/2,vy:i/2*(1+o*e)-(i-r)/2}:{vx:AladinUtils.myRound(i/2*(1+o*t)-(i-n)/2),vy:AladinUtils.myRound(i/2*(1+o*e)-(i-r)/2)}},viewToXy:function(t,e,n,r,i,o){return{x:((2*t+(i-n))/i-1)/o,y:((2*e+(i-r))/i-1)/o}},radecToViewXy:function(t,e,n,r,i,o,a,s){var l;if(r!=CooFrameEnum.J2000){var u=CooConversion.J2000ToGalactic([t,e]);l=n.project(u[0],u[1])}else l=n.project(t,e);return l?AladinUtils.xyToView(l.X,l.Y,i,o,a,s,!0):null},myRound:function(t){return 0>t?-1*(0|-t):0|t},isHpxPixVisible:function(t,e,n){for(var r=0;r<t.length;r++)if(t[r].vx>=-20&&t[r].vx<e+20&&t[r].vy>=-20&&t[r].vy<n+20)return!0;return!1},ipixToIpix:function(t,e,n){var r=[]},getZoomFactorForAngle:function(t,e){var n={ra:0,dec:0},r={ra:t,dec:0},i=new Projection(t/2,0);i.setProjection(e);var o=i.project(n.ra,n.dec),a=i.project(r.ra,r.dec),s=1/(o.X-a.Y);return s}}}(),ProjectionEnum={SIN:Projection.PROJ_SIN,AITOFF:Projection.PROJ_AITOFF},CooFrameEnum=function(){return{J2000:"J2000",GAL:"Galactic"}}(),CooFrameEnum.fromString=function(t,e){return t?(t=t.toLowerCase().replace(/^\s+|\s+$/g,""),0==t.indexOf("j2000")||0==t.indexOf("icrs")?CooFrameEnum.J2000:0==t.indexOf("gal")?CooFrameEnum.GAL:e?e:null):e?e:null},CooFrameEnum.shortName=function(t){return t==CooFrameEnum.J2000?"J2000":t==CooFrameEnum.GAL?"GAL":null},Downloader=function(){var t=4,e=!1,n=700,r=function(t){this.view=t,this.nbDownloads=0,this.dlQueue=[],this.urlsInQueue={}};return r.prototype.requestDownload=function(t,e,n){e in this.urlsInQueue||(this.dlQueue.push({img:t,url:e,cors:n}),this.urlsInQueue[e]=1,this.tryDownload())},r.prototype.tryDownload=function(){for(;this.dlQueue.length>0&&this.nbDownloads<t;)this.startDownloadNext()},r.prototype.startDownloadNext=function(){var t=this.dlQueue.shift();if(t){this.nbDownloads++;var e=this;t.img.onload=function(){e.completeDownload(this,!0)},t.img.onerror=function(t){
e.completeDownload(this,!1)},t.cors?t.img.crossOrigin="anonymous":void 0!==t.img.crossOrigin&&delete t.img.crossOrigin,t.img.src=t.url}},r.prototype.completeDownload=function(t,r){if(delete this.urlsInQueue[t.src],t.onerror=null,t.onload=null,this.nbDownloads--,r){if(e){var i=(new Date).getTime();t.fadingStart=i,t.fadingEnd=i+n}this.view.requestRedraw()}else t.dlError=!0;this.tryDownload()},r}(),CooGrid=function(){function t(t,e,n,r,i,o,a){var s=AladinUtils.viewToXy(e,n,r,i,o,a),l;try{l=t.unproject(s.x,s.y)}catch(u){return null}return{lon:l.ra,lat:l.dec}}var e=function(){},n=10,r=10;return e.prototype.redraw=function(e,n,r,i,o,a,s,l){if(!(l>60)){var u=0,c=359.9999,h=-90,f=90,d=t(n,0,0,i,o,a,s),p=t(n,i-1,o-1,i,o,a,s);c=Math.min(d.lon,p.lon),u=Math.max(d.lon,p.lon),f=Math.min(d.lat,p.lat),h=Math.max(d.lat,p.lat);var g=t(n,0,o-1,i,o,a,s);c=Math.min(c,g.lon),u=Math.max(u,g.lon),f=Math.min(f,g.lat),h=Math.max(h,g.lat);var m=t(n,i-1,0,i,o,a,s);c=Math.min(c,m.lon),u=Math.max(u,m.lon),f=Math.min(f,m.lat),h=Math.max(h,m.lat);var v=u-c,y=h-f,x,b;l>10?(x=4,b=4):l>1?(x=1,b=1):l>.1?(x=.1,b=.1):(x=.01,b=.01);var w=Math.round(c%x)*x,C=Math.round(f%b)*b;e.lineWidth=1,e.strokeStyle="rgb(120,120,255)";for(var M=C;h+b>M;M+=b){e.beginPath();var S;if(S=AladinUtils.radecToViewXy(c,M,n,CooFrameEnum.J2000,i,o,a,s)){e.moveTo(S.vx,S.vy);for(var _=0,k=c;u+x>k;k+=v/10)_++,S=AladinUtils.radecToViewXy(k,M,n,CooFrameEnum.J2000,i,o,a,s),e.lineTo(S.vx,S.vy),3==_&&e.strokeText(M.toFixed(2),S.vx,S.vy-2);e.stroke()}}for(var k=w;u+x>k;k+=x){e.beginPath();var S;if(S=AladinUtils.radecToViewXy(k,f,n,CooFrameEnum.J2000,i,o,a,s)){e.moveTo(S.vx,S.vy);for(var _=0,M=f;h+b>M;M+=y/10)_++,S=AladinUtils.radecToViewXy(k,M,n,CooFrameEnum.J2000,i,o,a,s),e.lineTo(S.vx,S.vy),3==_&&e.strokeText(k.toFixed(2),S.vx,S.vy-2);e.stroke()}}}},e}(),Footprint=function(){return Footprint=function(t){this.polygons=t,this.overlay=null,this.isShowing=!0,this.isSelected=!1},Footprint.prototype.setOverlay=function(t){this.overlay=t},Footprint.prototype.show=function(){this.isShowing||(this.isShowing=!0,this.overlay&&this.overlay.reportChange())},Footprint.prototype.hide=function(){this.isShowing&&(this.isShowing=!1,this.overlay&&this.overlay.reportChange())},Footprint.prototype.select=function(){this.isSelected||(this.isSelected=!0,this.overlay&&this.overlay.reportChange())},Footprint.prototype.deselect=function(){this.isSelected&&(this.isSelected=!1,this.overlay&&this.overlay.reportChange())},Footprint}(),Popup=function(){return Popup=function(t){this.domEl=$('<div class="aladin-popup-container"><div class="aladin-popup"><div class="aladin-popupTitle"></div><div class="aladin-popupText"></div></div><div class="aladin-popup-arrow"></div></div>'),this.domEl.appendTo(t);var e=this;this.domEl.find(".aladin-closeBtn").click(function(){e.hide()})},Popup.prototype.hide=function(){this.domEl.hide()},Popup.prototype.show=function(){this.domEl.show()},Popup.prototype.setTitle=function(t){this.domEl.find(".aladin-popupTitle").html(t)},Popup.prototype.setText=function(t){this.domEl.find(".aladin-popupText").html(t),this.w=this.domEl.outerWidth(),this.h=this.domEl.outerHeight()},Popup.prototype.setSource=function(t){this.source&&(this.source.popup=null),t.popup=this,this.source=t,this.setPosition(t.x,t.y)},Popup.prototype.setPosition=function(t,e){var n=t-this.w/2,r=e-this.h+this.source.catalog.sourceSize/2;this.domEl[0].style.left=n+"px",this.domEl[0].style.top=r+"px"},Popup}(),Circle=function(){return Circle=function(t,e,n){n=n||{},this.color=n.color||void 0,this.fillOpacity=n.fillOpacity||void 0,this.setCenter(t),this.setRadius(e),this.overlay=null,this.isShowing=!0,this.isSelected=!1},Circle.prototype.setOverlay=function(t){this.overlay=t},Circle.prototype.show=function(){this.isShowing||(this.isShowing=!0,this.overlay&&this.overlay.reportChange())},Circle.prototype.hide=function(){this.isShowing&&(this.isShowing=!1,this.overlay&&this.overlay.reportChange())},Circle.prototype.select=function(){this.isSelected||(this.isSelected=!0,this.overlay&&this.overlay.reportChange())},Circle.prototype.deselect=function(){this.isSelected&&(this.isSelected=!1,this.overlay&&this.overlay.reportChange())},Circle.prototype.setCenter=function(t){this.centerRaDec=t,this.overlay&&this.overlay.reportChange()},Circle.prototype.setRadius=function(t){this.radiusDegrees=t,this.overlay&&this.overlay.reportChange()},Circle.prototype.draw=function(t,e,n,r,i,o,a){if(this.isShowing){var s;if(n!=CooFrameEnum.J2000){var l=CooConversion.J2000ToGalactic([this.centerRaDec[0],this.centerRaDec[1]]);s=e.project(l[0],l[1])}else s=e.project(this.centerRaDec[0],this.centerRaDec[1]);if(s){var u=AladinUtils.xyToView(s.X,s.Y,r,i,o,a,!0),c,h=this.centerRaDec[0],f=this.centerRaDec[1]+(h>0?-this.radiusDegrees:this.radiusDegrees);if(n!=CooFrameEnum.J2000){var l=CooConversion.J2000ToGalactic([h,f]);c=e.project(l[0],l[1])}else c=e.project(h,f);if(c){var d=AladinUtils.xyToView(c.X,c.Y,r,i,o,a,!0),p=d.vx-u.vx,g=d.vy-u.vy,m=Math.sqrt(p*p+g*g);this.color&&(t.strokeStyle=this.color,this.fillOpacity&&(t.fillStyle=ColorOpacity(this.color,this.fillOpacity))),t.beginPath(),t.arc(u.vx,u.vy,m,0,2*Math.PI,!1),t.stroke(),this.fillOpacity&&t.fill()}}}},Circle}(),Polyline=function(){return Polyline=function(t,e){e=e||{},this.color=e.color||void 0,this.radecArray=t,this.overlay=null,this.isShowing=!0,this.isSelected=!1},Polyline.prototype.setOverlay=function(t){this.overlay=t},Polyline.prototype.show=function(){this.isShowing||(this.isShowing=!0,this.overlay&&this.overlay.reportChange())},Polyline.prototype.hide=function(){this.isShowing&&(this.isShowing=!1,this.overlay&&this.overlay.reportChange())},Polyline.prototype.select=function(){this.isSelected||(this.isSelected=!0,this.overlay&&this.overlay.reportChange())},Polyline.prototype.deselect=function(){this.isSelected&&(this.isSelected=!1,this.overlay&&this.overlay.reportChange())},Polyline.prototype.draw=function(t,e,n,r,i,o,a){if(this.isShowing&&this.radecArray&&!(this.radecArray.length<2)){this.color&&(t.strokeStyle=this.color);var s=AladinUtils.radecToViewXy(this.radecArray[0][0],this.radecArray[0][1],e,n,r,i,o,a);if(s){t.moveTo(s.vx,s.vy);for(var l,u=1;u<this.radecArray.length&&(l=AladinUtils.radecToViewXy(this.radecArray[u][0],this.radecArray[u][1],e,n,r,i,o,a),l);u++)t.lineTo(l.vx,l.vy);t.stroke()}}},Polyline}(),Overlay=function(){return Overlay=function(t){t=t||{},this.name=t.name||"overlay",this.color=t.color||Color.getNextColor(),this.lineWidth=t.lineWidth||2,this.overlays=[],this.overlay_items=[],this.isShowing=!0},Overlay.prototype.show=function(){this.isShowing||(this.isShowing=!0,this.reportChange())},Overlay.prototype.hide=function(){this.isShowing&&(this.isShowing=!1,this.reportChange())},Overlay.parseSTCS=function(t){for(var e=[],n=t.match(/\S+/g),r=0,i=n.length,o;i>r;){var a=n[r].toLowerCase();if("polygon"==a&&(o=[],r++,frame=n[r].toLowerCase(),"icrs"==frame||"j2000"==frame)){for(;i>r+2;){var s=parseFloat(n[r+1]);if(isNaN(s))break;var l=parseFloat(n[r+2]);o.push([s,l]),r+=2}o.push(o[0]),e.push(o)}r++}return e},Overlay.prototype.addFootprints=function(t){this.overlays=this.overlays.concat(t);for(var e=0,n=t.length;n>e;e++)t[e].setOverlay(this);this.view.requestRedraw()},Overlay.prototype.add=function(t){this.overlay_items.push(t),t.setOverlay(this),this.view.requestRedraw()},Overlay.prototype.getFootprint=function(t){return t<this.footprints.length?this.footprints[t]:null},Overlay.prototype.setView=function(t){this.view=t},Overlay.prototype.removeAll=function(){this.overlays=[],this.overlay_items=[]},Overlay.prototype.draw=function(t,e,n,r,i,o,a){if(this.isShowing){t.strokeStyle=this.color,t.lineWidth=this.lineWidth,t.beginPath(),xyviews=[];for(var s=0,l=this.overlays.length;l>s;s++)xyviews.push(this.drawFootprint(this.overlays[s],t,e,n,r,i,o,a));t.stroke(),t.strokeStyle=Overlay.increase_brightness(this.color,80),t.beginPath();for(var s=0,l=this.overlays.length;l>s;s++)this.overlays[s].isSelected&&this.drawFootprintSelected(t,xyviews[s]);t.stroke();for(var s=0;s<this.overlay_items.length;s++)this.overlay_items[s].draw(t,e,n,r,i,o,a)}},Overlay.increase_brightness=function(t,e){t=t.replace(/^\s*#|\s*$/g,""),3==t.length&&(t=t.replace(/(.)/g,"$1$1"));var n=parseInt(t.substr(0,2),16),r=parseInt(t.substr(2,2),16),i=parseInt(t.substr(4,2),16);return"#"+(0|256+n+(256-n)*e/100).toString(16).substr(1)+(0|256+r+(256-r)*e/100).toString(16).substr(1)+(0|256+i+(256-i)*e/100).toString(16).substr(1)},Overlay.prototype.drawFootprint=function(t,e,n,r,i,o,a,s){if(!t.isShowing)return null;for(var l=[],u=!1,c=t.polygons,h=0,f=c.length;f>h;h++){var d;if(r!=CooFrameEnum.J2000){var p=CooConversion.J2000ToGalactic([c[h][0],c[h][1]]);d=n.project(p[0],p[1])}else d=n.project(c[h][0],c[h][1]);if(!d)return null;var g=AladinUtils.xyToView(d.X,d.Y,i,o,a,s);l.push(g),!u&&g.vx<i&&g.vx>=0&&g.vy<=o&&g.vy>=0&&(u=!0)}if(u){e.moveTo(l[0].vx,l[0].vy);for(var h=1,f=l.length;f>h;h++)e.lineTo(l[h].vx,l[h].vy)}return l},Overlay.prototype.drawFootprintSelected=function(t,e){if(e){var n=e;t.moveTo(n[0].vx,n[0].vy);for(var r=1,i=n.length;i>r;r++)t.lineTo(n[r].vx,n[r].vy)}},Overlay.prototype.reportChange=function(){this.view.requestRedraw()},Overlay}(),cds.Source=function(){return cds.Source=function(t,e,n,r){this.ra=t,this.dec=e,this.data=n,this.catalog=null,this.marker=r&&r.marker||!1,this.marker&&(this.popupTitle=r&&r.popupTitle?r.popupTitle:"",this.popupDesc=r&&r.popupDesc?r.popupDesc:""),this.isShowing=!0,this.isSelected=!1},cds.Source.prototype.setCatalog=function(t){this.catalog=t},cds.Source.prototype.show=function(){this.isShowing||(this.isShowing=!0,this.catalog&&this.catalog.reportChange())},cds.Source.prototype.hide=function(){this.isShowing&&(this.isShowing=!1,this.catalog&&this.catalog.reportChange())},cds.Source.prototype.select=function(){this.isSelected||(this.isSelected=!0,this.catalog&&this.catalog.reportChange())},cds.Source.prototype.deselect=function(){this.isSelected&&(this.isSelected=!1,this.catalog&&this.catalog.reportChange())},cds.Source}(),ProgressiveCat=function(){function t(t,e){var n=["name","ID","ucd","utype","unit","datatype","arraysize","width","precision"],r=[],i=0;return t.keyRa=t.keyDec=null,$(e).find("FIELD").each(function(){for(var e={},o=0;o<n.length;o++){var a=n[o];$(this).attr(a)&&(e[a]=$(this).attr(a))}e.ID||(e.ID="col_"+i),t.keyRa||!e.ucd||0!=e.ucd.indexOf("pos.eq.ra")&&0!=e.ucd.indexOf("POS_EQ_RA")||(e.name?t.keyRa=e.name:t.keyRa=e.ID),t.keyDec||!e.ucd||0!=e.ucd.indexOf("pos.eq.dec")&&0!=e.ucd.indexOf("POS_EQ_DEC")||(e.name?t.keyDec=e.name:t.keyDec=e.ID),r.push(e),i++}),r}function e(t,e,n){if(!t.keyRa||!t.keyDec)return[];lines=e.split("\n");for(var r=[],i=0;i<n.length;i++)n[i].name?r.push(n[i].name):r.push(n[i].ID);for(var o=[],a=new Coo,s=2;s<lines.length;s++){var l={},u=lines[s].split("	");if(!(u.length<r.length)){for(var c=0;c<r.length;c++)l[r[c]]=u[c];var h,f;Utils.isNumber(l[t.keyRa])&&Utils.isNumber(l[t.keyDec])?(h=parseFloat(l[t.keyRa]),f=parseFloat(l[t.keyDec])):(a.parse(l[t.keyRa]+" "+l[t.keyDec]),h=a.lon,f=a.lat),o.push(new cds.Source(h,f,l))}}return o}return ProgressiveCat=function(t,e,n,r){r=r||{},this.type="progressivecat",this.rootUrl=t,this.frame=CooFrameEnum.fromString(e)||CooFrameEnum.J2000,this.maxOrder=n,this.isShowing=!0,this.name=r.name||"progressive-cat",this.color=r.color||Color.getNextColor(),this.sourceSize=r.sourceSize||10,this.sourcesCache=new Utils.LRUCache(100),this.cacheCanvas=document.createElement("canvas"),this.cacheCanvas.width=this.sourceSize,this.cacheCanvas.height=this.sourceSize;var i=this.cacheCanvas.getContext("2d");i.beginPath(),i.strokeStyle=this.color,i.lineWidth=2,i.moveTo(0,0),i.lineTo(0,this.sourceSize),i.lineTo(this.sourceSize,this.sourceSize),i.lineTo(this.sourceSize,0),i.lineTo(0,0),i.stroke()},ProgressiveCat.prototype={init:function(t){this.view=t,this.level3Sources||this.loadLevel2Sources()},loadLevel2Sources:function(){var n=this;$.ajax({url:n.rootUrl+"/Norder2/Allsky.xml",method:"GET",success:function(r){n.fields=t(n,r),n.level2Sources=e(n,$(r).find("CSV").text(),n.fields),n.loadLevel3Sources()},error:function(t){console.log("Something went wrong: "+t)}})},loadLevel3Sources:function(){var t=this;$.ajax({url:t.rootUrl+"/Norder3/Allsky.xml",method:"GET",success:function(n){t.level3Sources=e(t,$(n).find("CSV").text(),t.fields),t.view.requestRedraw()},error:function(t){console.log("Something went wrong: "+t)}})},draw:function(t,e,n,r,i,o,a){if(this.isShowing&&this.level3Sources&&(this.drawSources(this.level2Sources,t,e,n,r,i,o,a),this.drawSources(this.level3Sources,t,e,n,r,i,o,a),this.tilesInView))for(var s,l,u,c=0;c<this.tilesInView.length;c++)u=this.tilesInView[c],l=u[0]+"-"+u[1],s=this.sourcesCache.get(l),s&&this.drawSources(s,t,e,n,r,i,o,a)},drawSources:function(t,e,n,r,i,o,a,s){for(var l=0,u=t.length;u>l;l++)this.drawSource(t[l],e,n,r,i,o,a,s)},getSources:function(){var t=[];if(this.level2Sources&&(t=t.concat(this.level2Sources)),this.level3Sources&&(t=t.concat(this.level3Sources)),this.tilesInView)for(var e,n,r,i=0;i<this.tilesInView.length;i++)r=this.tilesInView[i],n=r[0]+"-"+r[1],e=this.sourcesCache.get(n),e&&(t=t.concat(e));return t},drawSource:function(t,e,n,r,i,o,a,s){if(t.isShowing){var l=this.sourceSize,u;if(r!=CooFrameEnum.J2000){var c=CooConversion.J2000ToGalactic([t.ra,t.dec]);u=n.project(c[0],c[1])}else u=n.project(t.ra,t.dec);if(u){var h=AladinUtils.xyToView(u.X,u.Y,i,o,a,s);if(h){if(h.vx>i+l||h.vx<0-l||h.vy>o+l||h.vy<0-l)return void(t.x=t.y=void 0);t.x=h.vx,t.y=h.vy,e.drawImage(this.cacheCanvas,t.x-l/2,t.y-l/2)}}}},deselectAll:function(){for(var t=0;t<this.level2Sources.length;t++)this.level2Sources[t].deselect();for(var t=0;t<this.level3Sources.length;t++)this.level3Sources[t].deselect();var e=this.sourcesCache.keys();for(key in e)if(this.sourcesCache[key])for(var n=this.sourcesCache[key],t=0;t<n.length;t++)n[t].deselect()},show:function(){this.isShowing||(this.isShowing=!0,this.reportChange())},hide:function(){this.isShowing&&(this.isShowing=!1,this.reportChange())},reportChange:function(){this.view.requestRedraw()},getTileURL:function(t,e){var n=1e4*Math.floor(e/1e4);return this.rootUrl+"/Norder"+t+"/Dir"+n+"/Npix"+e+".tsv"},loadNeededTiles:function(){this.tilesInView=[],this.otherSources=[];var t=this.view.realNorder;if(t>this.maxOrder&&(t=this.maxOrder),!(3>=t)){for(var n=this.view.getVisibleCells(t,this.frame),r,i,o=4;t>=o;o++){r=[];for(var a=0;a<n.length;a++)i=Math.floor(n[a].ipix/Math.pow(4,t-o)),r.indexOf(i)<0&&r.push(i);for(var s=0;s<r.length;s++)this.tilesInView.push([o,r[s]])}for(var l,u,c=this,a=0;a<this.tilesInView.length;a++)l=this.tilesInView[a],u=l[0]+"-"+l[1],this.sourcesCache.get(u)||!function(t,n,r){var i=n+"-"+r;$.ajax({url:t.getTileURL(n,r),method:"GET",success:function(n){t.sourcesCache.set(i,e(t,n,t.fields)),t.view.requestRedraw()},error:function(){t.sourcesCache.set(i,[])}})}(this,l[0],l[1])}}},ProgressiveCat}(),cds.Catalog=function(){return cds.Catalog=function(t){t=t||{},this.type="catalog",this.name=t.name||"catalog",this.color=t.color||Color.getNextColor(),0!==t.sourceSize?(this.sourceSize=t.sourceSize||6,this.markerSize=t.sourceSize||12):(this.sourceSize=0,this.markerSize=0),this.shape=t.shape||"square",this.displayLabel=t.displayLabel||!1,this.labelColor=t.labelColor||this.color,this.labelFont=t.labelFont||"10px sans-serif",this.displayLabel&&(this.labelColumn=t.labelColumn,this.labelColumn||(this.displayLabel=!1),this.colorColumn=t.colorColumn,this.colorColumn||(this.colorColumn=!1)),this.shape instanceof Image&&(this.sourceSize=this.shape.width),this.selectSize=this.sourceSize+2,this.isShowing=!0,this.indexationNorder=5,this.sources=[],this.hpxIdx=new HealpixIndex(this.indexationNorder),this.hpxIdx.init(),this.selectionColor="#00ff00",this.cacheCanvas=cds.Catalog.createShape(this.shape,this.color,this.sourceSize),this.cacheMarkerCanvas=document.createElement("canvas"),this.cacheMarkerCanvas.width=this.markerSize,this.cacheMarkerCanvas.height=this.markerSize;var e=this.cacheMarkerCanvas.getContext("2d");e.fillStyle=this.color,e.beginPath();var n=this.markerSize/2;0==this.markerSize?e.arc(0,0,0,0,2*Math.PI,!1):e.arc(n,n,n-2,0,2*Math.PI,!1),e.fill(),e.lineWidth=2,e.strokeStyle="#ccc",e.stroke(),this.cacheSelectCanvas=document.createElement("canvas"),this.cacheSelectCanvas.width=this.selectSize,this.cacheSelectCanvas.height=this.selectSize;var r=this.cacheSelectCanvas.getContext("2d");r.beginPath(),r.strokeStyle=this.selectionColor,r.lineWidth=2,r.moveTo(0,0),r.lineTo(0,this.selectSize),r.lineTo(this.selectSize,this.selectSize),r.lineTo(this.selectSize,0),r.lineTo(0,0),r.stroke()},cds.Catalog.createShape=function(t,e,n){if(t instanceof Image)return t;var r=document.createElement("canvas");r.width=r.height=n;var i=r.getContext("2d");return i.beginPath(),i.strokeStyle=e,i.lineWidth=2,0!==n&&("plus"==t?(i.moveTo(n/2,0),i.lineTo(n/2,n),i.stroke(),i.moveTo(0,n/2),i.lineTo(n,n/2),i.stroke()):"cross"==t?(i.moveTo(0,0),i.lineTo(n-1,n-1),i.stroke(),i.moveTo(n-1,0),i.lineTo(0,n-1),i.stroke()):"rhomb"==t?(i.moveTo(n/2,0),i.lineTo(0,n/2),i.lineTo(n/2,n),i.lineTo(n,n/2),i.lineTo(n/2,0),i.stroke()):"triangle"==t?(i.moveTo(n/2,0),i.lineTo(0,n-1),i.lineTo(n-1,n-1),i.lineTo(n/2,0),i.stroke()):(i.moveTo(0,0),i.lineTo(0,n),i.lineTo(n,n),i.lineTo(n,0),i.lineTo(0,0),i.stroke())),r},cds.Catalog.parseVOTable=function(t,e){function n(t,e){t=t.replace(/^\s+/g,"");var n=["name","ID","ucd","utype","unit","datatype","arraysize","width","precision"],r=[],i=0;$(t).find("FIELD").each(function(){for(var t={},e=0;e<n.length;e++){var o=n[e];$(this).attr(o)&&(t[o]=$(this).attr(o))}t.ID||(t.ID="col_"+i),r.push(t),i++});var o,a;o=a=null;for(var s=0,l=r.length;l>s;s++){var u=r[s];if(!o&&u.ucd){var c=u.ucd.toLowerCase();if(c.indexOf("pos.eq.ra")>=0||c.indexOf("pos_eq_ra")>=0){o=s;continue}}if(!a&&u.ucd){var c=u.ucd.toLowerCase();if(c.indexOf("pos.eq.dec")>=0||c.indexOf("pos_eq_dec")>=0){a=s;continue}}}var h=[],f=new Coo,d,p;$(t).find("TR").each(function(){var t={},e=0;$(this).find("TD").each(function(){var n=r[e].name?r[e].name:r[e].id;t[n]=$(this).text(),e++});var n=r[o].name?r[o].name:r[o].id,i=r[a].name?r[a].name:r[a].id;Utils.isNumber(t[n])&&Utils.isNumber(t[i])?(d=parseFloat(t[n]),p=parseFloat(t[i])):(f.parse(t[n]+" "+t[i]),d=f.lon,p=f.lat),h.push(new cds.Source(d,p,t))}),e&&e(h)}$.ajax({url:Aladin.JSONP_PROXY,data:{url:t},method:"GET",dataType:"text",success:function(t){n(t,e)}})},cds.Catalog.prototype.addSources=function(t){this.sources=this.sources.concat(t);for(var e=0,n=t.length;n>e;e++)t[e].setCatalog(this);this.view.requestRedraw()},cds.Catalog.prototype.getSources=function(){return this.sources},cds.Catalog.prototype.selectAll=function(){if(this.sources)for(var t=0;t<this.sources.length;t++)this.sources[t].select()},cds.Catalog.prototype.deselectAll=function(){if(this.sources)for(var t=0;t<this.sources.length;t++)this.sources[t].deselect()},cds.Catalog.prototype.getSource=function(t){return t<this.sources.length?this.sources[t]:null},cds.Catalog.prototype.setView=function(t){this.view=t},cds.Catalog.prototype.removeAll=cds.Catalog.prototype.clear=function(){this.sources=[]},cds.Catalog.prototype.draw=function(t,e,n,r,i,o,a){if(this.isShowing){for(var s=0,l=this.sources.length;l>s;s++)this.drawSource(this.sources[s],t,e,n,r,i,o,a);t.strokeStyle=this.selectionColor;for(var s=0,l=this.sources.length;l>s;s++)this.sources[s].isSelected&&this.drawSourceSelection(this.sources[s],t);if(this.displayLabel){t.font=this.labelFont;for(var s=0,l=this.sources.length;l>s;s++)this.drawSourceLabel(this.sources[s],t)}}},cds.Catalog.prototype.drawSource=function(t,e,n,r,i,o,a,s){if(t.isShowing){var l=this.sourceSize,u;if(r!=CooFrameEnum.J2000){var c=CooConversion.J2000ToGalactic([t.ra,t.dec]);u=n.project(c[0],c[1])}else u=n.project(t.ra,t.dec);if(u){var h=AladinUtils.xyToView(u.X,u.Y,i,o,a,s),f=t.popup?100:t.sourceSize;if(h){if(h.vx>i+f||h.vx<0-f||h.vy>o+f||h.vy<0-f)return void(t.x=t.y=void 0);t.x=h.vx,t.y=h.vy,t.marker?e.drawImage(this.cacheMarkerCanvas,t.x-l/2,t.y-l/2):e.drawImage(this.cacheCanvas,t.x-this.cacheCanvas.width/2,t.y-this.cacheCanvas.height/2),t.popup&&t.popup.setPosition(t.x,t.y)}}}},cds.Catalog.prototype.drawSourceSelection=function(t,e){if(t&&t.isShowing&&t.x&&t.y){var n=this.selectSize;e.drawImage(this.cacheSelectCanvas,t.x-n/2,t.y-n/2)}},cds.Catalog.prototype.drawSourceLabel=function(t,e){if(t&&t.isShowing&&t.x&&t.y){var n=t.data[this.labelColumn];if(n){var r=t.data[this.colorColumn];if(!r)var r=this.color;e.fillStyle=r,e.fillText(n,t.x-10,t.y+10)}}},cds.Catalog.prototype.reportChange=function(){this.view.requestRedraw()},cds.Catalog.prototype.show=function(){this.isShowing||(this.isShowing=!0,this.reportChange())},cds.Catalog.prototype.hide=function(){this.isShowing&&(this.isShowing=!1,this.view&&this.view.popup&&this.view.popup.source&&this.view.popup.source.catalog==this&&this.view.popup.hide(),this.reportChange())},cds.Catalog}(),Tile=function(){function t(t,e){this.img=t,this.url=e}return t.isImageOk=function(t){return t.allSkyTexture?!0:t.src&&t.complete?"undefined"!=typeof t.naturalWidth&&0==t.naturalWidth?!1:!0:!1},t}(),TileBuffer=function(){function t(){this.pointer=0,this.tilesMap={},this.tilesArray=new Array(e);for(var t=0;e>t;t++)this.tilesArray[t]=new Tile(new Image,null)}var e=800;return t.prototype.addTile=function(t){if(this.getTile(t))return null;var n=this.tilesArray[this.pointer];return null!=n.url&&(n.img.src=null,delete this.tilesMap[n.url]),this.tilesArray[this.pointer].url=t,this.tilesMap[t]=this.tilesArray[this.pointer],this.pointer++,this.pointer>=e&&(this.pointer=0),this.tilesMap[t]},t.prototype.getTile=function(t){return this.tilesMap[t]},t}(),ColorMap=function(){return ColorMap=function(t){this.view=t,this.reversed=!1,this.map="native",this.sig=this.signature()},ColorMap.MAPS={},ColorMap.MAPS.eosb={name:"Eos B",r:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,18,27,36,45,49,57,72,81,91,100,109,118,127,136,131,139,163,173,182,191,200,209,218,227,213,221,255,255,255,255,255,255,255,255,229,229,255,255,255,255,255,255,255,255,229,229,255,255,255,255,255,255,255,255,229,229,255,255,255,255,255,255,255,255,229,229,255,255,255,255,255,255,255,255,229,229,255,255,255,255,255,255,255,255,229,229,255,255,255,255,255,255,255,255,229,229,255,255,255,255,255,255,255,255,229,229,255,255,255,255,255,255,255,255,229,229,255,253,251,249,247,245,243,241,215,214,235,234,232,230,228,226,224,222,198,196,216,215,213,211,209,207,205,203,181,179,197,196,194,192,190,188,186,184,164,162,178,176,175,173,171,169,167,165,147,145,159,157,156,154,152,150,148,146,130,128,140,138,137,135,133,131,129,127,113,111,121,119,117,117],g:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,15,23,31,39,47,55,57,64,79,87,95,103,111,119,127,135,129,136,159,167,175,183,191,199,207,215,200,207,239,247,255,255,255,255,255,255,229,229,255,255,255,255,255,255,255,255,229,229,255,255,255,255,255,255,255,255,229,229,255,250,246,242,238,233,229,225,198,195,212,208,204,199,195,191,187,182,160,156,169,165,161,157,153,148,144,140,122,118,127,125,123,121,119,116,114,112,99,97,106,104,102,99,97,95,93,91,80,78,84,82,80,78,76,74,72,70,61,59,63,61,59,57,55,53,50,48,42,40,42,40,38,36,33,31,29,27,22,21,21,19,16,14,12,13,8,6,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b:[116,121,127,131,136,140,144,148,153,157,145,149,170,174,178,182,187,191,195,199,183,187,212,216,221,225,229,233,238,242,221,225,255,247,239,231,223,215,207,199,172,164,175,167,159,151,143,135,127,119,100,93,95,87,79,71,63,55,47,39,28,21,15,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},ColorMap.MAPS.rainbow={name:"Rainbow",r:[0,4,9,13,18,22,27,31,36,40,45,50,54,58,61,64,68,69,72,74,77,79,80,82,83,85,84,86,87,88,86,87,87,87,85,84,84,84,83,79,78,77,76,71,70,68,66,60,58,55,53,46,43,40,36,33,25,21,16,12,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,8,12,21,25,29,33,42,46,51,55,63,67,72,76,80,89,93,97,101,110,114,119,123,131,135,140,144,153,157,161,165,169,178,182,187,191,199,203,208,212,221,225,229,233,242,246,250,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],g:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,8,16,21,25,29,38,42,46,51,55,63,67,72,76,84,89,93,97,106,110,114,119,127,131,135,140,144,152,157,161,165,174,178,182,187,195,199,203,208,216,220,225,229,233,242,246,250,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,250,242,238,233,229,221,216,212,208,199,195,191,187,178,174,170,165,161,153,148,144,140,131,127,123,119,110,106,102,97,89,85,80,76,72,63,59,55,51,42,38,34,29,21,17,12,8,0],b:[0,3,7,10,14,19,23,28,32,38,43,48,53,59,63,68,72,77,81,86,91,95,100,104,109,113,118,122,127,132,136,141,145,150,154,159,163,168,173,177,182,186,191,195,200,204,209,214,218,223,227,232,236,241,245,250,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,246,242,238,233,225,220,216,212,203,199,195,191,187,178,174,170,165,157,152,148,144,135,131,127,123,114,110,106,102,97,89,84,80,76,67,63,59,55,46,42,38,34,25,21,16,12,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},ColorMap.MAPS_CUSTOM=["rainbow","eosb"],ColorMap.MAPS_NAMES=["native","grayscale"].concat(ColorMap.MAPS_CUSTOM),ColorMap.prototype.reverse=function(t){t?this.reversed=t:this.reversed=!this.reversed,this.sig=this.signature(),this.view.requestRedraw()},ColorMap.prototype.signature=function(){var t=this.map;return this.reversed&&(t+=" reversed"),t},ColorMap.prototype.update=function(t){this.map=t,this.sig=this.signature(),this.view.requestRedraw()},ColorMap.prototype.apply=function(t){if("native"==this.sig)return t;if(t.cmSig==this.sig)return t.cmImg;var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");n.drawImage(t,0,0);var r=n.getImageData(0,0,e.width,e.height),i=r.data,o=i.length,a,s,l,u=3;"grayscale"==this.map?u=1:ColorMap.MAPS_CUSTOM.indexOf(this.map)>=0&&(u=2);for(var c=0;o>c;c+=4){switch(u){case 1:a=s=l=AladinUtils.myRound((i[c]+i[c+1]+i[c+2])/3);break;case 2:this.reversed?(a=ColorMap.MAPS[this.map].r[255-i[c]],s=ColorMap.MAPS[this.map].g[255-i[c+1]],l=ColorMap.MAPS[this.map].b[255-i[c+2]]):(a=ColorMap.MAPS[this.map].r[i[c]],s=ColorMap.MAPS[this.map].g[i[c+1]],l=ColorMap.MAPS[this.map].b[i[c+2]]);break;default:a=i[c],s=i[c+1],l=i[c+2]}2!=u&&this.reversed&&(a=255-a,s=255-s,l=255-l),i[c]=a,i[c+1]=s,i[c+2]=l}return r.data=i,n.putImageData(r,0,0),t.cmSig=this.sig,t.cmImg=e,t.cmImg},ColorMap}(),HpxImageSurvey=function(){function t(t,e,n,r){return Math.pow(n-t,2)+Math.pow(r-e,2)}function e(t,e,n,r,i,o,a,s,l,u,c,h,f,d,p,g,m,v){g=g||0,m=m||0,v||(v=!1),l+=g,c+=g,f+=g,u+=m,h+=m,d+=m;var y=(n+i+a)/3,x=(r+o+s)/3,y=(n+i+a)/3,x=(r+o+s)/3;t.save(),p&&(t.globalAlpha=p);var b=.01;v&&(b=.01),t.beginPath(),t.moveTo((1+b)*n-y*b,(1+b)*r-x*b),t.lineTo((1+b)*i-y*b,(1+b)*o-x*b),t.lineTo((1+b)*a-y*b,(1+b)*s-x*b),t.closePath(),t.clip(),v&&(b=.03,n=(1+b)*n-y*b,r=(1+b)*r-x*b,i=(1+b)*i-y*b,o=(1+b)*o-x*b,a=(1+b)*a-y*b,s=(1+b)*s-x*b);var w=1/(l*(d-h)-c*d+f*h+(c-f)*u);t.transform(-(u*(a-i)-h*a+d*i+(h-d)*n)*w,(h*s+u*(o-s)-d*o+(d-h)*r)*w,(l*(a-i)-c*a+f*i+(c-f)*n)*w,-(c*s+l*(o-s)-f*o+(f-c)*r)*w,(l*(d*i-h*a)+u*(c*a-f*i)+(f*h-c*d)*n)*w,(l*(d*o-h*s)+u*(c*s-f*o)+(f*h-c*d)*r)*w),t.drawImage(e,0,0),t.restore()}function n(t,e){for(var n=new Array(t.length),r=0;4>r;r++)n[r]={vx:t[r].vx,vy:t[r].vy};for(var r=0;2>r;r++){var i=1==r?1:0,o=1==r?2:3,a=Math.atan2(n[o].vy-n[i].vy,n[o].vx-n[i].vx),s=e*Math.cos(a);n[i].vx-=s,n[o].vx+=s,s=e*Math.sin(a),n[i].vy-=s,n[o].vy+=s}return n}var r=function(t,e,n,i,o,a){this.id=t,this.name=e,"/"===n.slice(-1)?this.rootUrl=n.substr(0,n.length-1):this.rootUrl=n,a=a||{},this.imgFormat=a.imgFormat||"jpg",this.minOrder=a.minOrder||null,this.cooFrame=CooFrameEnum.fromString(i,CooFrameEnum.J2000),this.rootUrl.indexOf("/glimpse360/aladin/data")>=0&&(this.cooFrame=CooFrameEnum.J2000),this.maxOrder=o,this.allskyTexture=null,this.alpha=0,this.allskyTextureSize=0,this.lastUpdateDateNeededTiles=0;for(var s=!1,l=0;l<r.SURVEYS.length;l++)r.SURVEYS[l].id==this.id&&(s=!0);s||r.SURVEYS.push({id:this.id,url:this.rootUrl,name:this.name,maxOrder:this.maxOrder,frame:this.cooFrame}),r.SURVEYS_OBJECTS[this.id]=this};r.UPDATE_NEEDED_TILES_DELAY=1e3,r.prototype.init=function(t,e){this.view=t,this.cm||(this.cm=new ColorMap(this.view)),this.tileBuffer=this.view.tileBuffer,this.useCors=!1;var n=this;$.support.cors?$.ajax({type:"GET",url:this.rootUrl+"/properties",contentType:"text/plain",xhrFields:{},headers:{},success:function(){n.useCors=!0,n.retrieveAllskyTextures(),e&&e()},error:function(){n.retrieveAllskyTextures(),e&&e()}}):(this.retrieveAllskyTextures(),e())},r.DEFAULT_SURVEY_ID="P/DSS2/color",r.SURVEYS_OBJECTS={},r.SURVEYS=[{id:"P/2MASS/color",url:"http://alasky.u-strasbg.fr/2MASS/Color",name:"2MASS colored",maxOrder:9,frame:"equatorial",format:"jpeg"},{id:"P/DSS2/color",url:"http://alasky.u-strasbg.fr/DSS/DSSColor",name:"DSS colored",maxOrder:9,frame:"equatorial",format:"jpeg"},{id:"P/DSS2/red",url:"http://alasky.u-strasbg.fr/DSS/DSS2Merged",name:"DSS2 Red (F+R)",maxOrder:9,frame:"equatorial",format:"jpeg fits"},{id:"P/Fermi/color",url:"http://alasky.u-strasbg.fr/Fermi/Color",name:"Fermi color",maxOrder:3,frame:"equatorial",format:"jpeg"},{id:"P/Finkbeiner",url:"http://alasky.u-strasbg.fr/FinkbeinerHalpha",maxOrder:3,frame:"galactic",format:"jpeg fits",name:"Halpha"},{id:"P/GALEXGR6/AIS/color",url:"http://alasky.u-strasbg.fr/GALEX/GR6-02-Color",name:"GALEX Allsky Imaging Survey colored",maxOrder:8,frame:"equatorial",format:"jpeg"},{id:"P/IRIS/color",url:"http://alasky.u-strasbg.fr/IRISColor",name:"IRIS colored",maxOrder:3,frame:"galactic",format:"jpeg"},{id:"P/Mellinger/color",url:"http://alasky.u-strasbg.fr/MellingerRGB",name:"Mellinger colored",maxOrder:4,frame:"galactic",format:"jpeg"},{id:"P/SDSS9/color",url:"http://alasky.u-strasbg.fr/SDSS/DR9/color",name:"SDSS9 colored",maxOrder:10,frame:"equatorial",format:"jpeg"},{id:"P/SPITZER/color",url:"http://alasky.u-strasbg.fr/SpitzerI1I2I4color",name:"IRAC color I1,I2,I4 - (GLIMPSE, SAGE, SAGE-SMC, SINGS)",maxOrder:9,frame:"galactic",format:"jpeg"},{id:"P/VTSS/Ha",url:"http://alasky.u-strasbg.fr/VTSS/Ha",maxOrder:3,frame:"galactic",format:"png jpeg fits",name:"VTSS-Ha"},{id:"P/XMM/EPIC",url:"http://saada.u-strasbg.fr/xmmallsky",name:"XMM-Newton stacked EPIC images (no phot. normalization)",maxOrder:7,frame:"equatorial",format:"png jpeg fits"},{id:"P/XMM/PN/color",url:"http://saada.unistra.fr/xmmpnsky",name:"XMM PN colored",maxOrder:7,frame:"equatorial",format:"png jpeg"},{id:"P/allWISE/color",
url:"http://alasky.u-strasbg.fr/AllWISE/RGB-W4-W2-W1/",name:"AllWISE color",maxOrder:8,frame:"equatorial",format:"jpeg"},{id:"P/GLIMPSE360",url:"http://www.spitzer.caltech.edu/glimpse360/aladin/data",name:"GLIMPSE360",maxOrder:9,frame:"equatorial",format:"jpeg"}],r.getAvailableSurveys=function(){return r.SURVEYS},r.getSurveyInfoFromId=function(t){for(var e=r.getAvailableSurveys(),n=0;n<e.length;n++)if(e[n].id==t)return e[n];return null},r.getSurveyFromId=function(t){if(r.SURVEYS_OBJECTS[t])return r.SURVEYS_OBJECTS[t];var e=r.getSurveyInfoFromId(t);return e?new r(e.id,e.name,e.url,e.frame,e.maxOrder):null},r.prototype.getTileURL=function(t,e){var n=1e4*Math.floor(e/1e4);return this.rootUrl+"/Norder"+t+"/Dir"+n+"/Npix"+e+"."+this.imgFormat},r.prototype.retrieveAllskyTextures=function(){var t=new Image;this.useCors&&(t.crossOrigin="anonymous");var e=this;t.onload=function(){e.allskyTextureSize=t.width/27,e.allskyTexture=t,e.view.requestRedraw()},t.src=this.rootUrl+"/Norder3/Allsky."+this.imgFormat},r.prototype.redrawAllsky=function(t,e,n,r){if(!(this.view.curNorder>6)&&this.allskyTexture)for(var i,o=0,a,s,l=0,u=e.length;u>l;l++)if(i=e[l],s=i.ipix,this.allskyTexture&&Tile.isImageOk(this.allskyTexture)){var c=this.allskyTextureSize*Math.floor(s/27),h=this.allskyTextureSize*(s-27*Math.floor(s/27));if(n>40){o=.02,o=0,a={x:(i[0].vx+i[2].vx)/2,y:(i[0].vy+i[2].vy)/2};for(var f=0;4>f;f++){var d={x:i[f].vx-a.x,y:i[f].vy-a.y};i[f].vx+=o*d.x,i[f].vy+=o*d.y}}this.drawOneTile(t,this.allskyTexture,i,this.allskyTextureSize,null,h,c,!0)}},r.prototype.getColorMap=function(){return this.cm};var i=!0;return r.prototype.redrawHighres=function(t,e,n){if(0!=e.length){i=!i;var o=(new Date).getTime(),a=o-this.lastUpdateDateNeededTiles>r.UPDATE_NEEDED_TILES_DELAY,s,l,u,c,h=n-1,f,d,p=[],g=[],m={},v=!1,y=[],x=[],b,w;if(a){var C=[(e[0][0].vx+e[0][1].vx)/2,(e[0][0].vy+e[0][1].vy)/2],M=e.sort(function(t,e){var n=[(t[0].vx+t[2].vx)/2,(t[0].vy+t[2].vy)/2],r=[(e[0].vx+e[2].vx)/2,(e[0].vy+e[2].vy)/2],i=(n[0]-C[0])*(n[0]-C[0])+(n[1]-C[1])*(n[1]-C[1]),o=(r[0]-C[0])*(r[0]-C[0])+(r[1]-C[1])*(r[1]-C[1]);return i-o});e=M}for(var S=0,_=e.length;_>S;S++)if(f=e[S],w=f.ipix,b=~~(w/4),c=this.getTileURL(h,b),a&&h>=3&&(u=this.tileBuffer.addTile(c),u&&x.push({img:u.img,url:c})),l=this.getTileURL(n,w),s=this.tileBuffer.getTile(l))Tile.isImageOk(s.img)?p.push({img:s.img,corners:f}):(v=!0,a&&!s.img.dlError&&y.push({img:s.img,url:l}),h>=3&&!m[b]&&(u=this.tileBuffer.getTile(c),u&&Tile.isImageOk(u.img)&&(d=this.view.getPositionsInView(b,h),d&&g.push({img:u.img,corners:d,ipix:b})),m[b]=1));else{if(v=!0,a){var s=this.tileBuffer.addTile(l);s&&y.push({img:s.img,url:l})}h>=3&&!m[b]&&(u=this.tileBuffer.getTile(c),u&&Tile.isImageOk(u.img)&&(d=this.view.getPositionsInView(b,h),d&&g.push({img:u.img,corners:d,ipix:b})),m[b]=1)}for(var S=0,_=g.length;_>S;S++)this.drawOneTile(t,g[S].img,g[S].corners,g[S].img.width);for(var S=0,_=p.length;_>S;S++){var k=null,T=p[S].img;T.fadingStart&&T.fadingEnd&&o<T.fadingEnd&&(k=.2+(o-T.fadingStart)/(T.fadingEnd-T.fadingStart)*.8),this.drawOneTile(t,T,p[S].corners,T.width,k)}if(a){for(var S=0,_=y.length;_>S;S++)this.view.downloader.requestDownload(y[S].img,y[S].url,this.useCors);for(var S=0,_=x.length;_>S;S++)this.view.downloader.requestDownload(x[S].img,x[S].url,this.useCors);this.lastUpdateDateNeededTiles=o}v&&this.view.requestRedrawAtDate(o+r.UPDATE_NEEDED_TILES_DELAY+10)}},r.prototype.drawOneTile=function(t,n,r,i,o,a,s,l){var u=this.useCors?this.cm.apply(n):n;e(t,u,r[0].vx,r[0].vy,r[1].vx,r[1].vy,r[3].vx,r[3].vy,i-1,i-1,i-1,0,0,i-1,o,a,s,l),e(t,u,r[1].vx,r[1].vy,r[3].vx,r[3].vy,r[2].vx,r[2].vy,i-1,0,0,i-1,0,0,o,a,s,l)},r.prototype.setAlpha=function(t){t=+t,this.alpha=Math.max(0,Math.min(t,1)),this.view.requestRedraw()},r.prototype.getAlpha=function(){return this.alpha},r}(),HealpixGrid=function(){var t=function(){};return t.prototype.redraw=function(t,e,n,r){t.lineWidth=1,t.strokeStyle="rgb(150,150,220)",t.beginPath();for(var i,o=0,a=e.length;a>o;o++)i=e[o],ipix=i.ipix,t.moveTo(i[0].vx,i[0].vy),t.lineTo(i[1].vx,i[1].vy),t.lineTo(i[2].vx,i[2].vy);t.stroke(),t.strokeStyle="#FFDDDD",t.beginPath();for(var o=0,a=e.length;a>o;o++)i=e[o],ipix=i.ipix,t.strokeText(r+"/"+ipix,(i[0].vx+i[2].vx)/2,(i[0].vy+i[2].vy)/2);t.stroke()},t}(),Location=function(){return Location=function(t){this.div=$(t)},Location.prototype.update=function(t,e,n){var r=new Coo(t,e,7);n==CooFrameEnum.J2000?this.div.html(r.format("s/")):this.div.html(r.format("d/"))},Location}(),View=function(){function t(e,n,r,i,o){this.aladin=e,this.options=e.options,this.aladinDiv=this.aladin.aladinDiv,this.popup=new Popup(this.aladinDiv),this.createCanvases(),this.location=n,this.fovDiv=r,this.mustClearCatalog=!0,this.mustRedrawReticle=!0,this.mode=t.PAN,this.minFOV=this.maxFOV=null,this.healpixGrid=new HealpixGrid(this.imageCanvas),i?this.cooFrame=i:this.cooFrame=CooFrameEnum.GAL;var a,s;a=s=0,this.projectionMethod=ProjectionEnum.SIN,this.projection=new Projection(a,s),this.projection.setProjection(this.projectionMethod),this.zoomLevel=0,this.zoomFactor=this.computeZoomFactor(this.zoomLevel),this.viewCenter={lon:a,lat:s},o&&this.setZoom(o),this.imageSurvey=null,this.catalogs=[],this.overlays=[],this.tileBuffer=new TileBuffer,this.fixLayoutDimensions(),this.curNorder=1,this.realNorder=1,this.curOverlayNorder=1,this.dragging=!1,this.dragx=null,this.dragy=null,this.needRedraw=!0,this.downloader=new Downloader(this),this.flagForceRedraw=!1,this.fadingLatestUpdate=null,this.dateRequestRedraw=null,this.showGrid=!1,init(this),this.resizeTimer=null;var l=this;$(window).resize(function(){clearTimeout(l.resizeTimer),l.resizeTimer=setTimeout(function(){l.fixLayoutDimensions(l)},100)})}function e(t,e,n,r){if(t.projection){var i=AladinUtils.viewToXy(e,n,t.width,t.height,t.largestDim,t.zoomFactor),o;try{o=t.projection.unproject(i.x,i.y)}catch(a){}o&&t.location.update(o.ra,o.dec,t.cooFrame,r)}}t.PAN=0,t.SELECT=1,t.DRAW_SOURCES_WHILE_DRAGGING=!0,t.prototype.createCanvases=function(){var t=$(this.aladinDiv);t.find(".aladin-imageCanvas").remove(),t.find(".aladin-catalogCanvas").remove(),t.find(".aladin-reticleCanvas").remove(),this.imageCanvas=$("<canvas class='aladin-imageCanvas'></canvas>").appendTo(this.aladinDiv)[0],this.catalogCanvas=$("<canvas class='aladin-catalogCanvas'></canvas>").appendTo(this.aladinDiv)[0],this.reticleCanvas=$("<canvas class='aladin-reticleCanvas'></canvas>").appendTo(this.aladinDiv)[0]},t.prototype.fixLayoutDimensions=function(){Utils.cssScale=void 0,this.width=$(this.aladinDiv).width(),this.height=$(this.aladinDiv).height(),this.width=Math.max(this.width,1),this.height=Math.max(this.height,1),this.cx=this.width/2,this.cy=this.height/2,this.largestDim=Math.max(this.width,this.height),this.smallestDim=Math.min(this.width,this.height),this.ratio=this.largestDim/this.smallestDim,this.mouseMoveIncrement=160/this.largestDim,this.imageCtx=this.imageCanvas.getContext("2d"),this.catalogCtx=this.catalogCanvas.getContext("2d"),this.reticleCtx=this.reticleCanvas.getContext("2d"),this.imageCtx.canvas.width=this.width,this.catalogCtx.canvas.width=this.width,this.reticleCtx.canvas.width=this.width,this.imageCtx.canvas.height=this.height,this.catalogCtx.canvas.height=this.height,this.reticleCtx.canvas.height=this.height,this.computeNorder(),this.requestRedraw()},t.prototype.setMode=function(e){this.mode=e,this.mode==t.SELECT?this.setCursor("crosshair"):this.setCursor("default")},t.prototype.setCursor=function(t){this.reticleCanvas.style.cursor!=t&&(this.reticleCanvas.style.cursor=t)},t.prototype.getCanvasDataURL=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height;var e=t.getContext("2d");return e.drawImage(this.imageCanvas,0,0),e.drawImage(this.catalogCanvas,0,0),e.drawImage(this.reticleCanvas,0,0),t.toDataURL("image/png")},computeFov=function(t){var e=doComputeFov(t,t.zoomFactor);return t.mouseMoveIncrement=e/t.imageCanvas.width,e},doComputeFov=function(t,e){if(t.zoomFactor<1)fov=180;else{var n=AladinUtils.viewToXy(0,t.cy,t.width,t.height,t.largestDim,e),r=t.projection.unproject(n.x,n.y),i=AladinUtils.viewToXy(t.imageCanvas.width-1,t.cy,t.width,t.height,t.largestDim,e),o=t.projection.unproject(i.x,i.y);fov=new Coo(r.ra,r.dec).distance(new Coo(o.ra,o.dec))}return fov},updateFovDiv=function(t){if(isNaN(t.fov))return void t.fovDiv.html("FoV:");var e;e=t.fov>1?Math.round(100*t.fov)/100+"°":60*t.fov>1?Math.round(60*t.fov*100)/100+"'":Math.round(3600*t.fov*100)/100+'"',t.fovDiv.html("FoV: "+e)},createListeners=function(n){var r=!1;"ontouchstart"in window&&(r=!0),onDblClick=function(t){var e=n.imageCanvas.relMouseCoords(t),r=AladinUtils.viewToXy(e.x,e.y,n.width,n.height,n.largestDim,n.zoomFactor);try{var i=n.projection.unproject(r.x,r.y)}catch(o){return}radec=[],n.cooFrame==CooFrameEnum.GAL?radec=CooConversion.GalacticToJ2000([i.ra,i.dec]):radec=[i.ra,i.dec],n.pointTo(radec[0],radec[1])},r||$(n.reticleCanvas).dblclick(onDblClick),$(n.reticleCanvas).bind("mousedown touchstart",function(e){var r=n.imageCanvas.relMouseCoords(e);return e.originalEvent&&e.originalEvent.targetTouches?(n.dragx=e.originalEvent.targetTouches[0].clientX,n.dragy=e.originalEvent.targetTouches[0].clientY):(n.dragx=r.x,n.dragy=r.y),n.dragging=!0,n.mode==t.PAN?n.setCursor("move"):n.mode==t.SELECT&&(n.selectStartCoo={x:n.dragx,y:n.dragy}),!1});var i;$(n.reticleCanvas).bind("mouseup mouseout touchend",function(e){if(n.mode==t.SELECT&&n.dragging&&n.aladin.fire("selectend",n.getObjectsInBBox(n.selectStartCoo.x,n.selectStartCoo.y,n.dragx-n.selectStartCoo.x,n.dragy-n.selectStartCoo.y)),n.dragging&&(n.setCursor("default"),n.dragging=!1),n.mustClearCatalog=!0,n.mustRedrawReticle=!0,n.dragx=n.dragy=null,"mouseout"===e.type)return void n.requestRedraw();var r=n.imageCanvas.relMouseCoords(e),o=n.closestObjects(r.x,r.y,5);if(o){for(var a=o[0],s=1;!a.marker&&o.length>=s;){var a=o[s];s++}if(a.marker)n.popup.setTitle(a.popupTitle),n.popup.setText(a.popupDesc),n.popup.setSource(a),n.popup.show();else{if(n.aladin.objClickedFunction)var l=n.aladin.objClickedFunction(a);i=a}}else if(n.aladin.objClickedFunction&&i){i=null;var l=n.aladin.objClickedFunction(null)}n.refreshProgressiveCats(),n.requestRedraw()});var o;$(n.reticleCanvas).bind("mousemove touchmove",function(i){i.preventDefault();var a=n.imageCanvas.relMouseCoords(i);if(!n.dragging||r){if(e(n,a.x,a.y,!0),!n.dragging&&!n.mode==t.SELECT){var s=n.closestObjects(a.x,a.y,5);if(s){if(n.setCursor("pointer"),n.aladin.objHoveredFunction&&s[0]!=o)var l=n.aladin.objHoveredFunction(s[0]);o=s[0];for(var u=s[0],c=1;!u.marker&&s.length>=c;){var u=s[c];o=s[c],c++}u.marker?(n.popup.setTitle(u.popupTitle),n.popup.setText(u.popupDesc),n.popup.setSource(u),n.popup.show()):o&&o.marker&&(n.popup.setSource(o),n.popup.hide())}else if(n.setCursor("default"),o&&o.marker&&(n.popup.setSource(o),n.popup.hide()),n.aladin.objHoveredFunction&&o){o=null;var l=n.aladin.objHoveredFunction(null)}}if(!r)return}var h,f,d,p;if(i.originalEvent&&i.originalEvent.targetTouches){h=i.originalEvent.targetTouches[0].clientX-n.dragx,f=i.originalEvent.targetTouches[0].clientY-n.dragy;var g=AladinUtils.viewToXy(i.originalEvent.targetTouches[0].clientX,i.originalEvent.targetTouches[0].clientY,n.width,n.height,n.largestDim,n.zoomFactor),m=AladinUtils.viewToXy(n.dragx,n.dragy,n.width,n.height,n.largestDim,n.zoomFactor);d=n.projection.unproject(g.x,g.y),p=n.projection.unproject(m.x,m.y)}else{h=a.x-n.dragx,f=a.y-n.dragy;var g=AladinUtils.viewToXy(a.x,a.y,n.width,n.height,n.largestDim,n.zoomFactor),m=AladinUtils.viewToXy(n.dragx,n.dragy,n.width,n.height,n.largestDim,n.zoomFactor);d=n.projection.unproject(g.x,g.y),p=n.projection.unproject(m.x,m.y)}return i.originalEvent&&i.originalEvent.targetTouches?(n.dragx=i.originalEvent.targetTouches[0].clientX,n.dragy=i.originalEvent.targetTouches[0].clientY):(n.dragx=a.x,n.dragy=a.y),n.mode==t.SELECT?void n.requestRedraw():(n.viewCenter.lon+=p.ra-d.ra,n.viewCenter.lat+=p.dec-d.dec,n.viewCenter.lat>90?n.viewCenter.lat=90:n.viewCenter.lat<-90&&(n.viewCenter.lat=-90),n.viewCenter.lon<0?n.viewCenter.lon=360+n.viewCenter.lon:n.viewCenter.lon>360&&(n.viewCenter.lon=n.viewCenter.lon%360),void n.requestRedraw())}),$(n.aladinDiv).onselectstart=function(){return!1},$(n.reticleCanvas).bind("mousewheel",function(t,e){t.preventDefault(),t.stopPropagation();var r=n.zoomLevel;return e>0?r+=1:r-=1,n.setZoomLevel(r),!1})},init=function(t){var e=new Stats;e.domElement.style.top="50px",$("#aladin-statsDiv").length>0&&$("#aladin-statsDiv")[0].appendChild(e.domElement),t.stats=e,createListeners(t),t.displayHpxGrid=!1,t.displaySurvey=!0,t.displayCatalog=!1,t.displayReticle=!0,t.fov=computeFov(t),updateFovDiv(t),t.redraw()},t.prototype.requestRedrawAtDate=function(t){this.dateRequestDraw=t},t.prototype.redraw=function(){var e=this.needRedraw;requestAnimFrame(this.redraw.bind(this));var n=(new Date).getTime();if(this.dateRequestDraw&&n>this.dateRequestDraw)this.dateRequestDraw=null;else if(!this.needRedraw){if(!this.flagForceRedraw)return;this.flagForceRedraw=!1}this.stats.update();var r=this.imageCtx;r.clearRect(0,0,this.imageCanvas.width,this.imageCanvas.height),this.projectionMethod==ProjectionEnum.SIN&&(this.fov>80?(r.fillStyle="rgb(0,0,0)",r.beginPath(),r.arc(this.cx,this.cy,this.cx*this.zoomFactor,0,2*Math.PI,!0),r.fill()):this.fov<60&&(r.fillStyle="rgb(0,0,0)",r.fillRect(0,0,this.imageCanvas.width,this.imageCanvas.height))),this.projection?this.projection.setCenter(this.viewCenter.lon,this.viewCenter.lat):this.projection=new Projection(this.viewCenter.lon,this.viewCenter.lat),this.projection.setProjection(this.projectionMethod);var i=this.getVisibleCells(3),o=null;if(this.curNorder>=3&&(o=3==this.curNorder?i:this.getVisibleCells(this.curNorder)),this.imageSurvey&&this.imageSurvey.isReady&&this.displaySurvey&&(this.imageSurvey.redrawAllsky(r,i,this.fov,this.curNorder),this.curNorder>=3&&this.imageSurvey.redrawHighres(r,o,this.curNorder)),this.overlayImageSurvey&&this.overlayImageSurvey.isReady){if(r.globalAlpha=this.overlayImageSurvey.getAlpha(),this.fov>50&&this.overlayImageSurvey.redrawAllsky(r,i,this.fov,this.curOverlayNorder),this.curOverlayNorder>=3){var a=Math.min(this.curOverlayNorder,this.overlayImageSurvey.maxOrder);a!=this.curNorder&&(o=this.getVisibleCells(a)),this.overlayImageSurvey.redrawHighres(r,o,a)}r.globalAlpha=1}this.displayHpxGrid&&(o&&this.curNorder>3?this.healpixGrid.redraw(r,o,this.fov,this.curNorder):this.healpixGrid.redraw(r,i,this.fov,3)),this.showGrid&&(null==this.cooGrid&&(this.cooGrid=new CooGrid),this.cooGrid.redraw(r,this.projection,this.cooFrame,this.width,this.height,this.largestDim,this.zoomFactor,this.fov));var s=this.catalogCtx,l=!1;this.mustClearCatalog&&(s.clearRect(0,0,this.width,this.height),l=!0,this.mustClearCatalog=!1);var u=this.catalogCtx;if(this.overlays&&this.overlays.length>0&&(!this.dragging||t.DRAW_SOURCES_WHILE_DRAGGING)){l||(s.clearRect(0,0,this.width,this.height),l=!0);for(var c=0;c<this.overlays.length;c++)this.overlays[c].draw(u,this.projection,this.cooFrame,this.width,this.height,this.largestDim,this.zoomFactor,this.cooFrame)}if(this.catalogs&&this.catalogs.length>0&&this.displayCatalog&&(!this.dragging||t.DRAW_SOURCES_WHILE_DRAGGING)){l||(s.clearRect(0,0,this.width,this.height),l=!0);for(var c=0;c<this.catalogs.length;c++)this.catalogs[c].draw(s,this.projection,this.cooFrame,this.width,this.height,this.largestDim,this.zoomFactor,this.cooFrame)}this.mode==t.SELECT&&(mustRedrawReticle=!0);var h=this.reticleCtx;if((this.mustRedrawReticle||this.mode==t.SELECT)&&h.clearRect(0,0,this.width,this.height),this.displayReticle){if(!this.reticleCache){var f=document.createElement("canvas"),d=this.options.reticleSize;f.width=d,f.height=d;var p=f.getContext("2d");p.lineWidth=2,p.strokeStyle=this.options.reticleColor,p.beginPath(),p.moveTo(d/2,d/2+(d/2-1)),p.lineTo(d/2,d/2+2),p.moveTo(d/2,d/2-(d/2-1)),p.lineTo(d/2,d/2-2),p.moveTo(d/2+(d/2-1),d/2),p.lineTo(d/2+2,d/2),p.moveTo(d/2-(d/2-1),d/2),p.lineTo(d/2-2,d/2),p.stroke(),this.reticleCache=f}h.drawImage(this.reticleCache,this.width/2-this.reticleCache.width/2,this.height/2-this.reticleCache.height/2),this.mustRedrawReticle=!1}if(this.mode==t.SELECT&&this.dragging){h.fillStyle="rgba(100, 240, 110, 0.25)";var g=this.dragx-this.selectStartCoo.x,m=this.dragy-this.selectStartCoo.y;h.fillRect(this.selectStartCoo.x,this.selectStartCoo.y,g,m)}e==this.needRedraw&&(this.needRedraw=!1),this.dragging||this.updateObjectsLookup()},t.prototype.forceRedraw=function(){this.flagForceRedraw=!0},t.prototype.refreshProgressiveCats=function(){if(this.catalogs)for(var t=0;t<this.catalogs.length;t++)"progressivecat"==this.catalogs[t].type&&this.catalogs[t].loadNeededTiles()},t.prototype.getVisibleCells=function(t,e){!e&&this.imageSurvey&&(e=this.imageSurvey.cooFrame);var n=[],r=[],i=new SpatialVector,o=Math.pow(2,t),a=HealpixIndex.nside2Npix(o),s=null,l;if(this.fov>80){l=[];for(var u=0;a>u;u++)l.push(u)}else{var c=new HealpixIndex(o);c.init();var h=new SpatialVector,f=AladinUtils.viewToXy(this.cx,this.cy,this.width,this.height,this.largestDim,this.zoomFactor),d=this.projection.unproject(f.x,f.y),p=[];e&&e!=this.cooFrame?e==CooFrameEnum.J2000?p=CooConversion.GalacticToJ2000([d.ra,d.dec]):e==CooFrameEnum.GAL&&(p=CooConversion.J2000ToGalactic([d.ra,d.dec])):p=[d.ra,d.dec],h.set(p[0],p[1]);var g=.5*this.fov*this.ratio;g*=this.fov>60?1.6:this.fov>12?1.45:1.1,l=c.queryDisc(h,g*Math.PI/180,!0,!0);var m=Utils.radecToPolar(p[0],p[1]);s=c.ang2pix_nest(m.theta,m.phi),l.unshift(s)}for(var u,v,y,x=0,b=l.length;b>x;x++)if(u=l[x],!(u==s&&x>0)){var w=[];corners=HealpixCache.corners_nest(u,o);for(var C=0;4>C;C++){if(i.setXYZ(corners[C].x,corners[C].y,corners[C].z),e&&e!=this.cooFrame){if(e==CooFrameEnum.J2000){var d=CooConversion.J2000ToGalactic([i.ra(),i.dec()]);v=d[0],y=d[1]}else if(e==CooFrameEnum.GAL){var d=CooConversion.GalacticToJ2000([i.ra(),i.dec()]);v=d[0],y=d[1]}}else v=i.ra(),y=i.dec();r[C]=this.projection.project(v,y)}if(null!=r[0]&&null!=r[1]&&null!=r[2]&&null!=r[3]){for(var C=0;4>C;C++)w[C]=AladinUtils.xyToView(r[C].X,r[C].Y,this.width,this.height,this.largestDim,this.zoomFactor);var M=10;if(!(w[0].vx<0&&w[1].vx<0&&w[2].vx<0&&w[3].vx<0||w[0].vy<0&&w[1].vy<0&&w[2].vy<0&&w[3].vy<0||w[0].vx>=this.width&&w[1].vx>=this.width&&w[2].vx>=this.width&&w[3].vx>=this.width||w[0].vy>=this.height&&w[1].vy>=this.height&&w[2].vy>=this.height&&w[3].vy>=this.height)){if(this.projection.PROJECTION==ProjectionEnum.AITOFF){var S=w[0].vx-w[2].vx,_=w[0].vy-w[2].vy,k=Math.sqrt(S*S+_*_);if(k>this.largestDim/5)continue;if(S=w[1].vx-w[3].vx,_=w[1].vy-w[3].vy,k=Math.sqrt(S*S+_*_),k>this.largestDim/5)continue}w.ipix=u,n.push(w)}}}return n},t.prototype.getPositionsInView=function(t,e){for(var n=[],r,i,o=new SpatialVector,a=Math.pow(2,e),s=[],l=HealpixCache.corners_nest(t,a),u=0;4>u;u++){if(o.setXYZ(l[u].x,l[u].y,l[u].z),this.imageSurvey&&this.imageSurvey.cooFrame!=this.cooFrame){if(this.imageSurvey.cooFrame==CooFrameEnum.J2000){var c=CooConversion.J2000ToGalactic([o.ra(),o.dec()]);r=c[0],i=c[1]}else if(this.imageSurvey.cooFrame==CooFrameEnum.GAL){var c=CooConversion.GalacticToJ2000([o.ra(),o.dec()]);r=c[0],i=c[1]}}else r=o.ra(),i=o.dec();n[u]=this.projection.project(r,i)}if(null==n[0]||null==n[1]||null==n[2]||null==n[3])return null;for(var u=0;4>u;u++)s[u]=AladinUtils.xyToView(n[u].X,n[u].Y,this.width,this.height,this.largestDim,this.zoomFactor);return s},t.prototype.computeZoomFactor=function(t){return t>0?AladinUtils.getZoomFactorForAngle(180/Math.pow(1.15,t),this.projectionMethod):1+.1*t},t.prototype.setZoom=function(t){if(!(0>t||t>180)){var e=Math.log(180/t)/Math.log(1.15);this.setZoomLevel(e)}},t.prototype.setShowGrid=function(t){this.showGrid=t,this.requestRedraw()},t.prototype.setZoomLevel=function(t){if(this.minFOV||this.maxFOV){var e=doComputeFov(this,this.computeZoomFactor(Math.max(-2,t)));if(this.maxFOV&&e>this.maxFOV||this.minFOV&&e<this.minFOV)return}if(this.projectionMethod==ProjectionEnum.SIN?this.zoomLevel=Math.max(-2,t):this.zoomLevel=Math.max(-7,t),this.zoomFactor=this.computeZoomFactor(this.zoomLevel),this.fov=computeFov(this),updateFovDiv(this),this.computeNorder(),this.forceRedraw(),this.requestRedraw(),!this.debounceProgCatOnZoom){var n=this;this.debounceProgCatOnZoom=Utils.debounce(function(){n.refreshProgressiveCats()},300)}this.debounceProgCatOnZoom()},t.prototype.computeNorder=function(){var t=this.fov/this.largestDim,e=512,n=HealpixIndex.calculateNSide(3600*e*t),r=Math.log(n)/Math.log(2);r=Math.max(r,1),this.realNorder=r,this.fov<=50&&2>=r&&(r=3),this.imageSurvey&&2>=r&&this.imageSurvey.minOrder>2&&(r=this.imageSurvey.minOrder);var i=r;this.imageSurvey&&r>this.imageSurvey.maxOrder&&(r=this.imageSurvey.maxOrder),this.overlayImageSurvey&&i>this.overlayImageSurvey.maxOrder&&(i=this.overlayImageSurvey.maxOrder),r>HealpixIndex.ORDER_MAX&&(r=HealpixIndex.ORDER_MAX),i>HealpixIndex.ORDER_MAX&&(i=HealpixIndex.ORDER_MAX),this.curNorder=r,this.curOverlayNorder=i},t.prototype.untaintCanvases=function(){this.createCanvases(),createListeners(this),this.fixLayoutDimensions()},t.prototype.setOverlayImageSurvey=function(t,e){if(!t)return this.overlayImageSurvey=null,void this.requestRedraw();$.support.cors&&this.overlayImageSurvey&&!this.overlayImageSurvey.useCors&&this.untaintCanvases();var n;"string"==typeof t?(n=HpxImageSurvey.getSurveyFromId(t),n||(n=HpxImageSurvey.getSurveyFromId(HpxImageSurvey.DEFAULT_SURVEY_ID))):n=t,n.isReady=!1,this.overlayImageSurvey=n;var r=this;n.init(this,function(){r.computeNorder(),n.isReady=!0,r.requestRedraw(),r.updateObjectsLookup(),e&&e()})},t.prototype.setUnknownSurveyIfNeeded=function(){n&&(this.setImageSurvey(n),n=void 0)};var n=void 0;return t.prototype.setImageSurvey=function(t,e){if(t){$.support.cors&&this.imageSurvey&&!this.imageSurvey.useCors&&this.untaintCanvases();var r;"string"==typeof t?(r=HpxImageSurvey.getSurveyFromId(t),r||(r=HpxImageSurvey.getSurveyFromId(HpxImageSurvey.DEFAULT_SURVEY_ID),n=t,console.log(n))):r=t,this.tileBuffer=new TileBuffer,r.isReady=!1,this.imageSurvey=r;var i=this;r.init(this,function(){i.computeNorder(),r.isReady=!0,i.requestRedraw(),i.updateObjectsLookup(),e&&e()})}},t.prototype.requestRedraw=function(){this.needRedraw=!0},t.prototype.changeProjection=function(t){this.projectionMethod=t,this.requestRedraw()},t.prototype.changeFrame=function(t){if(this.cooFrame=t,this.cooFrame==CooFrameEnum.GAL){var e=CooConversion.J2000ToGalactic([this.viewCenter.lon,this.viewCenter.lat]);this.viewCenter.lon=e[0],this.viewCenter.lat=e[1]}else if(this.cooFrame==CooFrameEnum.J2000){var n=CooConversion.GalacticToJ2000([this.viewCenter.lon,this.viewCenter.lat]);this.viewCenter.lon=n[0],this.viewCenter.lat=n[1]}this.requestRedraw()},t.prototype.showHealpixGrid=function(t){this.displayHpxGrid=t,this.requestRedraw()},t.prototype.showSurvey=function(t){this.displaySurvey=t,this.requestRedraw()},t.prototype.showCatalog=function(t){this.displayCatalog=t,this.displayCatalog||(this.mustClearCatalog=!0),this.requestRedraw()},t.prototype.showReticle=function(t){this.displayReticle=t,this.mustRedrawReticle=!0,this.requestRedraw()},t.prototype.pointTo=function(t,e){if(t=parseFloat(t),e=parseFloat(e),!isNaN(t)&&!isNaN(e)){if(this.cooFrame==CooFrameEnum.J2000)this.viewCenter.lon=t,this.viewCenter.lat=e;else if(this.cooFrame==CooFrameEnum.GAL){var n=CooConversion.J2000ToGalactic([t,e]);this.viewCenter.lon=n[0],this.viewCenter.lat=n[1]}this.forceRedraw(),this.requestRedraw();var r=this;setTimeout(function(){r.refreshProgressiveCats()},1e3)}},t.prototype.makeUniqLayerName=function(t){if(!this.layerNameExists(t))return t;for(var e=1;;++e){var n=t+"_"+e;if(!this.layerNameExists(n))return n}},t.prototype.layerNameExists=function(t){for(var e=this.catalogs,n=0;n<e.length;n++)if(t==e[n].name)return!0;return!1},t.prototype.removeLayers=function(){this.catalogs=[],this.overlays=[],this.requestRedraw()},t.prototype.addCatalog=function(t){t.name=this.makeUniqLayerName(t.name),this.catalogs.push(t),"catalog"==t.type?t.setView(this):"progressivecat"==t.type&&t.init(this)},t.prototype.addOverlay=function(t){this.overlays.push(t),t.setView(this)},t.prototype.getObjectsInBBox=function(t,e,n,r){0>n&&(t+=n,n=-n),0>r&&(e+=r,r=-r);var i=[],o,a,s;if(this.catalogs)for(var l=0;l<this.catalogs.length;l++)if(o=this.catalogs[l],o.isShowing){a=o.getSources();for(var u=0;u<a.length;u++)s=a[u],s.isShowing&&s.x&&s.y&&s.x>=t&&s.x<=t+n&&s.y>=e&&s.y<=e+r&&i.push(s)}return i},t.prototype.updateObjectsLookup=function(){this.objLookup=[];var t,e,n,r,i;if(this.catalogs)for(var o=0;o<this.catalogs.length;o++)if(t=this.catalogs[o],t.isShowing){e=t.getSources();for(var a=0;a<e.length;a++)n=e[a],n.isShowing&&n.x&&n.y&&(r=n.x,i=n.y,this.objLookup[r]||(this.objLookup[r]=[]),this.objLookup[r][i]||(this.objLookup[r][i]=[]),this.objLookup[r][i].push(n))}},t.prototype.closestObjects=function(t,e,n){if(!this.objLookup)return null;for(var r,i,o=0;n>=o;o++){r=i=null;for(var a=-n;n>=a;a++)if(this.objLookup[t+a])for(var s=-n;n>=s;s++)if(this.objLookup[t+a][e+s])if(r){var l=a*a+s*s;i>l&&(i=l,r=this.objLookup[t+a][e+s])}else r=this.objLookup[t+a][e+s];if(r)return r}return null},t}(),Aladin=function(){var t=function(e,n){if(0==$(e).length)return void console.log("Could not find div "+e+". Aborting creation of Aladin Lite instance");HealpixCache.init();var r=this;if(void 0===n&&(n=this.getOptionsFromQueryString()),n=n||{},"zoom"in n){var i=n.zoom;delete n.zoom,n.fov=i}var o={};for(var a in t.DEFAULT_OPTIONS)void 0!==n[a]?o[a]=n[a]:o[a]=t.DEFAULT_OPTIONS[a];for(var a in n)void 0===t.DEFAULT_OPTIONS[a]&&(o[a]=n[a]);this.options=o,this.aladinDiv=e,$(e).addClass("aladin-container");var s=CooFrameEnum.fromString(o.cooFrame,CooFrameEnum.J2000),l=s==CooFrameEnum.J2000,u=$('<div class="aladin-location">'+(o.showFrame?'<select class="aladin-frameChoice"><option value="'+CooFrameEnum.J2000+'" '+(l?'selected="selected"':"")+'>J2000</option><option value="'+CooFrameEnum.GAL+'" '+(l?"":'selected="selected"')+">GAL</option></select>":"")+'<span class="aladin-location-text"></span></div>').appendTo(e),c=$('<div class="aladin-fov"></div>').appendTo(e);o.showZoomControl&&$('<div class="aladin-zoomControl"><a href="#" class="zoomPlus" title="Zoom in">+</a><a href="#" class="zoomMinus" title="Zoom out">&ndash;</a></div>').appendTo(e),o.showFullscreenControl&&$('<div class="aladin-fullscreenControl aladin-maximize" title="Full screen"><i class="icon-resize-enlarge"></i></div>').appendTo(e),this.fullScreenBtn=$(e).find(".aladin-fullscreenControl"),this.fullScreenBtn.click(function(){r.toggleFullscreen()}),$("<div class='aladin-logo-container'><a href='http://aladin.u-strasbg.fr/' title='Powered by Aladin Lite' target='_blank'><div class='aladin-logo'></div></a></div>").appendTo(e),this.boxes=[];var h=new Location(u.find(".aladin-location-text"));if(this.view=new View(this,h,c,s,o.fov),this.view.setShowGrid(o.showCooGrid),$.ajax({url:"http://aladin.u-strasbg.fr/java/nph-aladin.pl",data:{frame:"aladinLiteDic"},method:"GET",dataType:"jsonp",success:function(t){for(var e={},n=0;n<t.length;n++)e[t[n].id]=!0;for(var n=0;n<HpxImageSurvey.SURVEYS.length;n++)e[HpxImageSurvey.SURVEYS[n].id]||t.push(HpxImageSurvey.SURVEYS[n]);HpxImageSurvey.SURVEYS=t,r.view.setUnknownSurveyIfNeeded()},error:function(){}}),o.showLayersControl){var f=$('<div class="aladin-layersControl-container" title="Manage layers"><div class="aladin-layersControl"></div></div>');f.appendTo(e);var d=$('<div class="aladin-box aladin-layerBox aladin-cb-list"></div>');d.appendTo(e),this.boxes.push(d),f.click(function(){return r.hideBoxes(),r.showLayerBox(),!1})}if(o.showGotoControl){var f=$('<div class="aladin-gotoControl-container" title="Go to position"><div class="aladin-gotoControl"></div></div>');f.appendTo(e);var p=$('<div class="aladin-box aladin-gotoBox"><a class="aladin-closeBtn">&times;</a><div style="clear: both;"></div><form class="aladin-target-form">Go to: <input type="text" placeholder="Object name/position" /></form></div>');p.appendTo(e),this.boxes.push(p);var g=p.find(".aladin-target-form input");g.on("paste keydown",function(){$(this).removeClass("aladin-unknownObject")}),f.click(function(){return r.hideBoxes(),g.val(""),g.removeClass("aladin-unknownObject"),p.show(),g.focus(),!1}),p.find(".aladin-closeBtn").click(function(){return r.hideBoxes(),!1})}if(o.showShareControl){var f=$('<div class="aladin-shareControl-container" title="Share current view"><div class="aladin-shareControl"></div></div>');f.appendTo(e);var m=$('<div class="aladin-box aladin-shareBox"><a class="aladin-closeBtn">&times;</a><div style="clear: both;"></div><b>Share</b><input type="text" class="aladin-shareInput" /></div>');m.appendTo(e),this.boxes.push(m),f.click(function(){return r.hideBoxes(),m.show(),!1}),m.find(".aladin-closeBtn").click(function(){return r.hideBoxes(),!1})}if(this.gotoObject(o.target),o.log){var v=n;v.version=t.VERSION,Logger.log("startup",v)}if(this.showReticle(o.showReticle),o.catalogUrls)for(var y=0,x=o.catalogUrls.length;x>y;y++)this.createCatalogFromVOTable(o.catalogUrls[y]);this.setImageSurvey(o.survey),this.view.showCatalog(o.showCatalog);var b=this;$(e).find(".aladin-frameChoice").change(function(){b.setFrame($(this).val())}),$("#projectionChoice").change(function(){b.setProjection($(this).val())}),$(e).find(".aladin-target-form").submit(function(){return b.gotoObject($(this).find("input").val(),function(){$(e).find(".aladin-target-form input").addClass("aladin-unknownObject")}),!1});var w=$(e).find(".zoomPlus");w.click(function(){return b.increaseZoom(),!1}),w.bind("mousedown",function(t){t.preventDefault()});var C=$(e).find(".zoomMinus");C.click(function(){return b.decreaseZoom(),!1}),C.bind("mousedown",function(t){t.preventDefault()}),o.fullScreen&&window.setTimeout(function(){r.toggleFullscreen()},1e3)};t.VERSION="{ALADIN-LITE-VERSION-NUMBER}",t.JSONP_PROXY="http://alasky.u-strasbg.fr/cgi/JSONProxy",t.DEFAULT_OPTIONS={target:"0 +0",cooFrame:"J2000",survey:"P/DSS2/color",fov:60,showReticle:!0,showZoomControl:!0,showFullscreenControl:!0,showLayersControl:!0,showGotoControl:!0,showShareControl:!1,showCatalog:!0,showFrame:!0,showCooGrid:!1,fullScreen:!1,reticleColor:"rgb(178, 50, 178)",reticleSize:22,log:!0},t.prototype.toggleFullscreen=function(){this.fullScreenBtn.toggleClass("aladin-maximize aladin-restore");var t=this.fullScreenBtn.hasClass("aladin-restore");this.fullScreenBtn.attr("title",t?"Restore original size":"Full screen"),$(this.aladinDiv).toggleClass("aladin-fullscreen"),t?this.fullScreenBtn.html('<i class="icon-resize-shrink"></i>'):this.fullScreenBtn.html('<i class="icon-resize-enlarge"></i>'),this.view.fixLayoutDimensions()},t.prototype.updateSurveysDropdownList=function(t){t=t.sort(function(t,e){return t.order?t.order&&t.order>e.order?1:-1:t.id>e.id});var e=$(this.aladinDiv).find(".aladin-surveySelection");e.empty();for(var n=0;n<t.length;n++){var r=this.view.imageSurvey.id==t[n].id;e.append($("<option />").attr("selected",r).val(t[n].id).text(t[n].name))}},t.prototype.getOptionsFromQueryString=function(){var t={},e=$.urlParam("target");e&&(t.target=e);var n=$.urlParam("frame");n&&CooFrameEnum[n]&&(t.frame=n);var r=$.urlParam("survey");r&&HpxImageSurvey.getSurveyInfoFromId(r)&&(t.survey=r);var i=$.urlParam("zoom");i&&i>0&&180>i&&(t.zoom=i);var o=$.urlParam("showReticle");o&&(t.showReticle="true"==o.toLowerCase());var a=$.urlParam("cooFrame");a&&(t.cooFrame=a);var s=$.urlParam("fullScreen");return void 0!==s&&(t.fullScreen=s),t},t.prototype.setZoom=function(t){this.view.setZoom(t)},t.prototype.setFoV=function(t){this.view.setZoom(t)},t.prototype.setFrame=function(t){if(t){var e=CooFrameEnum.fromString(t,CooFrameEnum.J2000);e!=this.view.cooFrame&&(this.view.changeFrame(e),$(this.aladinDiv).find(".aladin-frameChoice").val(e))}},t.prototype.setProjection=function(t){if(t)switch(t=t.toLowerCase()){case"aitoff":this.view.changeProjection(ProjectionEnum.AITOFF);break;case"sinus":default:this.view.changeProjection(ProjectionEnum.SIN)}},t.prototype.gotoObject=function(t,e){
var n=/[a-zA-Z]/.test(t);if(n){var r=this;Sesame.resolve(t,function(t){var e=t.Target.Resolver.jradeg,n=t.Target.Resolver.jdedeg;r.view.pointTo(e,n)},function(n){console&&(console.log("Could not resolve object name "+t),console.log(n)),e&&e()})}else{var i=new Coo;i.parse(t);var o=[i.lon,i.lat];this.view.cooFrame==CooFrameEnum.GAL&&(o=CooConversion.GalacticToJ2000(o)),this.view.pointTo(o[0],o[1])}},t.prototype.gotoPosition=function(t,e){var n;n=this.view.cooFrame==CooFrameEnum.GAL?CooConversion.GalacticToJ2000([t,e]):[t,e],this.view.pointTo(n[0],n[1])};var e=function(t){var n=t.animationParams;if(null!=n){var r=(new Date).getTime();if(r>n.end)return t.gotoRaDec(n.raEnd,n.decEnd),void(n.complete&&n.complete());var i=n.raStart+(n.raEnd-n.raStart)*(r-n.start)/(n.end-n.start),o=n.decStart+(n.decEnd-n.decStart)*(r-n.start)/(n.end-n.start);t.gotoRaDec(i,o),setTimeout(function(){e(t)},50)}};return t.prototype.animateToRaDec=function(t,n,r,i){r=r||5,this.animationParams=null,e(this);var o={};o.start=(new Date).getTime(),o.end=(new Date).getTime()+1e3*r;var a=this.getRaDec();o.raStart=a[0],o.decStart=a[1],o.raEnd=t,o.decEnd=n,o.complete=i,this.animationParams=o,e(this)},t.prototype.getRaDec=function(){if(this.view.cooFrame==CooFrameEnum.J2000)return[this.view.viewCenter.lon,this.view.viewCenter.lat];var t=CooConversion.GalacticToJ2000([this.view.viewCenter.lon,this.view.viewCenter.lat]);return t},t.prototype.gotoRaDec=function(t,e){this.view.pointTo(t,e)},t.prototype.showHealpixGrid=function(t){this.view.showHealpixGrid(t)},t.prototype.showSurvey=function(t){this.view.showSurvey(t)},t.prototype.showCatalog=function(t){this.view.showCatalog(t)},t.prototype.showReticle=function(t){this.view.showReticle(t),$("#displayReticle").attr("checked",t)},t.prototype.removeLayers=function(){this.view.removeLayers()},t.prototype.addCatalog=function(t){this.view.addCatalog(t)},t.prototype.addOverlay=function(t){this.view.addOverlay(t)},t.prototype.createImageSurvey=function(t,e,n,r,i,o){return new HpxImageSurvey(t,e,n,r,i,o)},t.prototype.getBaseImageLayer=function(){return this.view.imageSurvey},t.prototype.setImageSurvey=function(t,e){if(this.view.setImageSurvey(t,e),this.updateSurveysDropdownList(HpxImageSurvey.getAvailableSurveys()),this.options.log){var n=t;"string"!=typeof t&&(n=t.rootUrl),Logger.log("changeImageSurvey",n)}},t.prototype.setBaseImageLayer=t.prototype.setImageSurvey,t.prototype.getOverlayImageLayer=function(){return this.view.overlayImageSurvey},t.prototype.setOverlayImageLayer=function(t,e){this.view.setOverlayImageSurvey(t,e)},t.prototype.increaseZoom=function(t){t||(t=5),this.view.setZoomLevel(this.view.zoomLevel+t)},t.prototype.decreaseZoom=function(t){t||(t=5),this.view.setZoomLevel(this.view.zoomLevel-t)},t.prototype.createCatalog=function(t){return A.catalog(t)},t.prototype.createProgressiveCatalog=function(t,e,n,r){return new ProgressiveCat(t,e,n,r)},t.prototype.createSource=function(t,e,n){return new cds.Source(t,e,n)},t.prototype.createMarker=function(t,e,n,r){return n=n||{},n.marker=!0,new cds.Source(t,e,r,n)},t.prototype.createOverlay=function(t){return new Overlay(t)},t.prototype.createFootprintsFromSTCS=function(t){for(var e=Overlay.parseSTCS(t),n=[],r=0,i=e.length;i>r;r++)n.push(new Footprint(e[r]));return n},t.prototype.createCatalogFromVOTable=function(t,e){return A.catalogFromURL(t,e)},A.catalogFromURL=function(t,e,n){var r=A.catalog(e);return cds.Catalog.parseVOTable(t,function(t){r.addSources(t),n&&n(t)}),r},t.prototype.on=function(t,e){"select"===t?this.selectFunction=e:"objectClicked"==t?this.objClickedFunction=e:"objectHovered"==t&&(this.objHoveredFunction=e)},t.prototype.select=function(){this.fire("selectstart")},t.prototype.fire=function(t,e){"selectstart"===t?this.view.setMode(View.SELECT):"selectend"===t&&(this.view.setMode(View.PAN),this.selectFunction&&this.selectFunction(e))},t.prototype.hideBoxes=function(){if(this.boxes)for(var t=0;t<this.boxes.length;t++)this.boxes[t].hide()},t.prototype.updateCM=function(){},t.prototype.showLayerBox=function(){var t=this,e=$(this.aladinDiv).find(".aladin-layerBox");e.empty(),e.append('<a class="aladin-closeBtn">&times;</a><div style="clear: both;"></div><div class="aladin-label">Base image layer</div><select class="aladin-surveySelection"></select><div class="aladin-cmap">Color map:<div><select class="aladin-cmSelection"></select><button class="aladin-btn aladin-btn-small aladin-reverseCm" type="button">Reverse</button></div></div><div class="aladin-box-separator"></div><div class="aladin-label">Overlay layers</div>');for(var n=e.find(".aladin-cmap"),r=e.find(".aladin-cmSelection"),i=0;i<ColorMap.MAPS_NAMES.length;i++)r.append($("<option />").text(ColorMap.MAPS_NAMES[i]));r.val(t.getBaseImageLayer().getColorMap().map);for(var o=this.view.catalogs,a="<ul>",i=o.length-1;i>=0;i--){var s=o[i].name,l="";o[i].isShowing&&(l='checked="checked"');var u=o[i].getSources().length,c=u+" source"+(u>1?"s":"");a+='<li><div class="aladin-layerIcon" style="background: '+o[i].color+';"></div><input type="checkbox" '+l+' id="aladin_lite_'+s+'"></input><label for="aladin_lite_'+s+'" class="aladin-layer-label" style="background: '+o[i].color+';" title="'+c+'">'+s+"</label></li>"}a+="</ul>",e.append(a),e.append('<div class="aladin-blank-separator"></div>');var l="";this.view.displayReticle&&(l='checked="checked"');var h=$('<input type="checkbox" '+l+' id="displayReticle" />');e.append(h).append('<label for="displayReticle">Reticle</label><br/>'),h.change(function(){t.showReticle($(this).is(":checked"))}),l="",this.view.displayHpxGrid&&(l='checked="checked"');var f=$('<input type="checkbox" '+l+' id="displayHpxGrid"/>');e.append(f).append('<label for="displayHpxGrid">HEALPix grid</label><br/>'),f.change(function(){t.showHealpixGrid($(this).is(":checked"))}),e.append('<div class="aladin-box-separator"></div><div class="aladin-label">Tools</div>');var d=$('<button class="aladin-btn" type="button">Export view as PNG</button>');e.append(d),d.click(function(){t.exportAsPNG()}),e.find(".aladin-closeBtn").click(function(){return t.hideBoxes(),!1}),this.updateSurveysDropdownList(HpxImageSurvey.getAvailableSurveys());var p=$(this.aladinDiv).find(".aladin-surveySelection");p.change(function(){var e=HpxImageSurvey.getAvailableSurveys()[$(this)[0].selectedIndex];t.setImageSurvey(e.id,function(){var e=t.getBaseImageLayer();e.useCors?(r.val(e.getColorMap().map),n.show(),d.show()):(n.hide(),d.hide())})}),n.find(".aladin-cmSelection").change(function(){var e=$(this).find(":selected").val();t.getBaseImageLayer().getColorMap().update(e)}),n.find(".aladin-reverseCm").click(function(){t.getBaseImageLayer().getColorMap().reverse()}),this.getBaseImageLayer().useCors?(n.show(),d.show()):(n.hide(),d.hide()),e.find(".aladin-reverseCm").parent().attr("disabled",!0),$(this.aladinDiv).find(".aladin-layerBox ul input").change(function(){var e=$(this).attr("id").substr(12),n=t.layerByName(e);$(this).is(":checked")?n.show():n.hide()}),e.show()},t.prototype.layerByName=function(t){for(var e=this.view.catalogs,n=0;n<this.view.catalogs.length;n++)if(t==e[n].name)return e[n];return null},t.prototype.exportAsPNG=function(){var t=this.view.getCanvasDataURL();window.open(t,"Aladin Lite snapshot")},t.prototype.setFOVRange=function(t,e){if(t>e){var n=t;t=e,e=n}this.view.minFOV=t,this.view.maxFOV=e},t.prototype.pix2world=function(t,e){var n=AladinUtils.viewToXy(t,e,this.view.width,this.view.height,this.view.largestDim,this.view.zoomFactor),r=this.view.projection.unproject(n.x,n.y),i;return i=this.view.cooFrame==CooFrameEnum.GAL?CooConversion.GalacticToJ2000([r.ra,r.dec]):[r.ra,r.dec]},t.prototype.world2pix=function(t,e){var n;if(this.view.cooFrame==CooFrameEnum.GAL){var r=CooConversion.J2000ToGalactic([t,e]);n=this.view.projection.project(r[0],r[1])}else n=this.view.projection.project(t,e);if(n){var i=AladinUtils.xyToView(n.X,n.Y,this.view.width,this.view.height,this.view.largestDim,this.view.zoomFactor);return[i.vx,i.vy]}return null},t.prototype.getFovCorners=function(t){(!t||1>t)&&(t=1);for(var e=[],n,r,i,o,a=0;4>a;a++){n=0==a||3==a?0:this.view.width-1,r=2>a?0:this.view.height-1,i=2>a?this.view.width-1:0,o=1==a||2==a?this.view.height-1:0;for(var s=0;t>s;s++)e.push(this.pix2world(n+s/t*(i-n),r+s/t*(o-r)))}return e},t.prototype.getFov=function(){var t=this.view.fov,e=this.getSize(),n=e[1]/e[0]*t;return t=Math.min(t,180),n=Math.min(n,180),[t,n]},t.prototype.getSize=function(){return[this.view.width,this.view.height]},t.prototype.getParentDiv=function(){return $(this.aladinDiv)},t}(),A.aladin=function(t,e){return new Aladin($(t)[0],e)},A.imageLayer=function(t,e,n,r){return new HpxImageSurvey(t,e,n,null,null,r)},A.source=function(t,e,n,r){return new cds.Source(t,e,n,r)},A.marker=function(t,e,n,r){return n=n||{},n.marker=!0,A.source(t,e,r,n)},A.polygon=function(t){var e=t.length;return e>0&&(t[0][0]!=t[e-1][0]||t[0][1]!=t[e-1][1])&&t.push([t[0][0],t[0][1]]),new Footprint(t)},A.polyline=function(t,e){return new Polyline(t,e)},A.circle=function(t,e,n,r){return new Circle([t,e],n,r)},A.graphicOverlay=function(t){return new Overlay(t)},A.catalog=function(t){return new cds.Catalog(t)},Aladin.prototype.displayFITS=function(t,e){e=e||{};var n={url:t};e.color&&(n.color=!0),e.outputFormat&&(n.format=e.outputFormat),e.order&&(n.order=e.order),e.nocache&&(n.nocache=e.nocache),$.ajax({url:"http://alasky.u-strasbg.fr/cgi/fits2HiPS",data:n,method:"GET",dataType:"json",success:function(t){if("success"!=t.status)return void alert("An error occured: "+t.message);var n=e.label||"FITS image";aladin.setOverlayImageLayer(aladin.createImageSurvey(n,n,t.data.url,"equatorial",t.data.meta.max_norder,{imgFormat:"png"})),aladin.setFoV(t.data.meta.fov),aladin.gotoRaDec(t.data.meta.ra,t.data.meta.dec);var r=e&&e.transparency||1;aladin.getOverlayImageLayer().setAlpha(r)}})},Aladin.prototype.displayJPG=Aladin.prototype.displayPNG=function(t,e){e=e||{},e.color=!0,e.label="JPG/PNG image",e.outputFormat="png",this.displayFITS(t,e)},$&&($.aladin=A.aladin),!function($){var t='[data-dismiss="alert"]',e=function(e){$(e).on("click",t,this.close)};e.prototype.close=function(t){function e(){i.trigger("closed").remove()}var n=$(this),r=n.attr("data-target"),i;r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=$(r),t&&t.preventDefault(),i.length||(i=n.hasClass("alert")?n:n.parent()),i.trigger(t=$.Event("close")),t.isDefaultPrevented()||(i.removeClass("in"),$.support.transition&&i.hasClass("fade")?i.on($.support.transition.end,e):e())};var n=$.fn.alert;$.fn.alert=function(t){return this.each(function(){var n=$(this),r=n.data("alert");r||n.data("alert",r=new e(this)),"string"==typeof t&&r[t].call(n)})},$.fn.alert.Constructor=e,$.fn.alert.noConflict=function(){return $.fn.alert=n,this},$(document).on("click.alert.data-api",t,e.prototype.close)}(window.jQuery);var post_to_url_in_background=function(t){t.preventDefault();var e=$(this).attr("href"),n=$(this).attr("action");"undefined"!=typeof e&&e!==!1&&$.get(e,function(t,e){});var r=$(this).attr("notification");if("undefined"!=typeof r&&r!==!1){var r=decodeURIComponent(r),i=$("span#dynamicNotification");i.html(r)}},multi_link_exploder=function(){var t=$(this).siblings("ul.dropdown-menu").children("li");t.each(function(t){var e=$(this).children("a").attr("href");window.open(e,"_blank")})};$(function(){$(document.body).on("click","a.postInBackground",post_to_url_in_background),$("div.objectLinkExploder").on("click","button:first",multi_link_exploder)});var ra_sex2degrees=function(t){t=t.replace(/ /g,":"),t=t.replace(/h/g,":"),t=t.replace(/m/g,":"),t=t.replace(/s/g,"");var e=t.split(":"),n=15*parseInt(e[0],10),r=15*parseInt(e[1],10),i=15*parseFloat(e[2],10),o=n+r/60+i/3600;return o},dec_sex2degrees=function(t){var e;t=t.replace(/ /g,":"),t=t.replace(/d/g,":"),t=t.replace(/m/g,":"),t=t.replace(/s/g,"");var n=t.split(":");e="-"==n[0][0]?-1:1;var r=parseInt(n[0],10),i=parseInt(n[1],10),o=parseFloat(n[2],10);r=Math.abs(r);var a=(r+i/60+o/3600)*e;return a},date_to_mjd=function(t){var e=t/864e5-t.getTimezoneOffset()/1440+2440587.5-2400000.5;return e},fade_and_hide=function(t){t.animate({opacity:.25},150),t.delay(600).slideUp(300)},show_and_unfade=function(t){t.animate({opacity:1},150),t.delay(600).slideDown(300)};!function($){var t=function(t,e){this.$element=$(t),this.options=$.extend({},$.fn.collapse.defaults,e),this.options.parent&&(this.$parent=$(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var t=this.$element.hasClass("width");return t?"width":"height"},show:function(){var t,e,n,r;if(!this.transitioning&&!this.$element.hasClass("in")){if(t=this.dimension(),e=$.camelCase(["scroll",t].join("-")),n=this.$parent&&this.$parent.find("> .accordion-group > .in"),n&&n.length){if(r=n.data("collapse"),r&&r.transitioning)return;n.collapse("hide"),r||n.data("collapse",null)}this.$element[t](0),this.transition("addClass",$.Event("show"),"shown"),$.support.transition&&this.$element[t](this.$element[0][e])}},hide:function(){var t;!this.transitioning&&this.$element.hasClass("in")&&(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",$.Event("hide"),"hidden"),this.$element[t](0))},reset:function(t){var e=this.dimension();return this.$element.removeClass("collapse")[e](t||"auto")[0].offsetWidth,this.$element[null!==t?"addClass":"removeClass"]("collapse"),this},transition:function(t,e,n){var r=this,i=function(){"show"==e.type&&r.reset(),r.transitioning=0,r.$element.trigger(n)};this.$element.trigger(e),e.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),$.support.transition&&this.$element.hasClass("collapse")?this.$element.one($.support.transition.end,i):i())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var e=$.fn.collapse;$.fn.collapse=function(e){return this.each(function(){var n=$(this),r=n.data("collapse"),i=$.extend({},$.fn.collapse.defaults,n.data(),"object"==typeof e&&e);r||n.data("collapse",r=new t(this,i)),"string"==typeof e&&r[e]()})},$.fn.collapse.defaults={toggle:!0},$.fn.collapse.Constructor=t,$.fn.collapse.noConflict=function(){return $.fn.collapse=e,this},$(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var e=$(this),n,r=e.attr("data-target")||t.preventDefault()||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),i=$(r).data("collapse")?"toggle":e.data();e[$(r).hasClass("in")?"addClass":"removeClass"]("collapsed"),$(r).collapse(i)})}(window.jQuery),!function($){$(function(){$.support.transition=function(){var t=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in e)if(void 0!==t.style[n])return e[n]}();return t&&{end:t}}()})}(window.jQuery),!function($){var t=function(t,e){this.$element=$(t),this.options=$.extend({},$.fn.button.defaults,e)};t.prototype.setState=function(t){var e="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";t+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},t.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")};var e=$.fn.button;$.fn.button=function(e){return this.each(function(){var n=$(this),r=n.data("button"),i="object"==typeof e&&e;r||n.data("button",r=new t(this,i)),"toggle"==e?r.toggle():e&&r.setState(e)})},$.fn.button.defaults={loadingText:"loading..."},$.fn.button.Constructor=t,$.fn.button.noConflict=function(){return $.fn.button=e,this},$(document).on("click.button.data-api","[data-toggle^=button]",function(t){var e=$(t.target);e.hasClass("btn")||(e=e.closest(".btn")),e.button("toggle")})}(window.jQuery),!function($){function t(){$(n).each(function(){e($(this)).removeClass("open")})}function e(t){var e=t.attr("data-target"),n;return e||(e=t.attr("href"),e=e&&/#/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,"")),n=e&&$(e),n&&n.length||(n=t.parent()),n}var n="[data-toggle=dropdown]",r=function(t){var e=$(t).on("click.dropdown.data-api",this.toggle);$("html").on("click.dropdown.data-api",function(){e.closest(":not(span)").removeClass("open")})};r.prototype={constructor:r,toggle:function(n){var r=$(this),i,o;if(!r.is(".disabled, :disabled"))return i=e(r),o=i.hasClass("open"),t(),o||i.toggleClass("open"),r.focus(),!1},keydown:function(t){var r,i,o,a,s,l;if(/(38|40|27)/.test(t.keyCode)&&(r=$(this),t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled"))){if(a=e(r),s=a.hasClass("open"),!s||s&&27==t.keyCode)return 27==t.which&&a.find(n).focus(),r.click();i=$("[role=menu] li:not(.divider):visible a",a),i.length&&(l=i.index(i.filter(":focus")),38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<i.length-1&&l++,~l||(l=0),i.eq(l).focus())}}};var i=$.fn.dropdown;$.fn.dropdown=function(t){return this.each(function(){var e=$(this),n=e.data("dropdown");n||e.data("dropdown",n=new r(this)),"string"==typeof t&&n[t].call(e)})},$.fn.dropdown.Constructor=r,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=i,this},$(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.dropdown-menu",function(t){t.stopPropagation()}).on("click.dropdown.data-api",n,r.prototype.toggle).on("keydown.dropdown.data-api",n+", [role=menu]",r.prototype.keydown)}(window.jQuery);var _markdownwiki_move_page_form=function(){var t=$("form[action*='change_parent_id_of_md_page']"),e=t.find("select[branch=0]"),n=e.closest("div.control-group"),r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=void 0,c=void 0,h=new Array,f="";t.on("change","select[branch]",function(){r=$(this).attr("branch"),$(this).attr("name","parentId"),parentId=$(this).find("option:selected").attr("value"),l=$(this).find("option:selected").text(),$("select[branch]").each(function(t){$(this).attr("branch")>r&&$(this).closest(".controls").fadeOut(200,function(){$(this).remove()})}),$("p.textAlert").fadeOut(200,function(){$("p.textAlert").remove()}),o="select distinct title, pageId from base_md_pages where pageId in (select * from (select distinct pageId from base_md_pages where parentPageId = "+parentId+") as alais) order by pageId, revisionNumber desc;",o=encodeURIComponent(o),f=window.location.toString();var n=f.split("/apollo/");f=n.length>1?"/apollo/assets/scripts/dryxScripts/sql_to_json.py?sqlQuery=":"/assets/scripts/dryxScripts/sql_to_json.py?sqlQuery=",a=$.ajax({url:f+o,success:function(n){0===n.length?(text='<p class="textAlert text-center text-info"><em>`'+l+"`</em> has no sub-pages</p>",t.append(text),$("p.textAlert").hide().fadeIn(200)):(u=e.closest(".control-group").clone(),u.find(".control-label").remove(),i=u.find("select[branch]"),i.html(""),i.attr("branch",r+1).hide().fadeIn(200),i.attr("name","unselected"),thisOption='<option value="none">select a sub-page</option>',i.append(thisOption),h=[],$.each(n,function(t,e){-1===$.inArray(n[t].pageId,h)&&(thisOption='<option value="'+n[t].pageId+'">'+n[t].title+"</option>",i.append(thisOption),h.push(n[t].pageId))}),t.append(u))}})})}(),_no_project_status_selection_form=function(){var t=$("a.projectStatus");return t.bind("click",function(t){var e=$(this).closest("tr");fade_and_hide(e)}),{}}();!function($){var t=function(t,e){this.$element=$(t),this.options=$.extend({},$.fn.typeahead.defaults,e),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=$(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var t=$.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source,e?this.process(e):this)},process:function(t){var e=this;return t=$.grep(t,function(t){return e.matcher(t)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e=[],n=[],r=[],i;i=t.shift();)i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(i):r.push(i):e.push(i);return e.concat(n,r)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(t){var e=this;return t=$(t).map(function(t,n){return t=$(e.options.item).attr("data-value",n),t.find("a").html(e.highlighter(n)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var e=this.$menu.find(".active").removeClass("active"),n=e.next();n.length||(n=$(this.$menu.find("li")[0])),n.addClass("active")},prev:function(t){var e=this.$menu.find(".active").removeClass("active"),n=e.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("focus",$.proxy(this.focus,this)).on("blur",$.proxy(this.blur,this)).on("keypress",$.proxy(this.keypress,this)).on("keyup",$.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",$.proxy(this.keydown,this)),this.$menu.on("click",$.proxy(this.click,this)).on("mouseenter","li",$.proxy(this.mouseenter,this)).on("mouseleave","li",$.proxy(this.mouseleave,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~$.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},focus:function(t){this.focused=!0},blur:function(t){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),$(t.currentTarget).addClass("active")},mouseleave:function(t){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var e=$.fn.typeahead;$.fn.typeahead=function(e){return this.each(function(){var n=$(this),r=n.data("typeahead"),i="object"==typeof e&&e;r||n.data("typeahead",r=new t(this,i)),"string"==typeof e&&r[e]()})},$.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},$.fn.typeahead.Constructor=t,$.fn.typeahead.noConflict=function(){return $.fn.typeahead=e,this},$(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var e=$(this);e.data("typeahead")||e.typeahead(e.data())})}(window.jQuery),!function($){var t=function(t,e){this.$element=$(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,"hover"==this.options.pause&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var e=this.getActiveIndex(),n=this;if(!(t>this.$items.length-1||0>t))return this.sliding?this.$element.one("slid",function(){n.to(t)}):e==t?this.pause().cycle():this.slide(t>e?"next":"prev",$(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&$.support.transition.end&&(this.$element.trigger($.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(t,e){var n=this.$element.find(".item.active"),r=e||n[t](),i=this.interval,o="next"==t?"left":"right",a="next"==t?"first":"last",s=this,l;if(this.sliding=!0,i&&this.pause(),r=r.length?r:this.$element.find(".item")[a](),l=$.Event("slide",{relatedTarget:r[0],direction:o}),!r.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=$(s.$indicators.children()[s.getActiveIndex()]);t&&t.addClass("active")})),$.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(l),l.isDefaultPrevented())return;r.addClass(t),r[0].offsetWidth,n.addClass(o),r.addClass(o),this.$element.one($.support.transition.end,function(){r.removeClass([t,o].join(" ")).addClass("active"),n.removeClass(["active",o].join(" ")),s.sliding=!1,setTimeout(function(){s.$element.trigger("slid")},0)})}else{if(this.$element.trigger(l),l.isDefaultPrevented())return;n.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return i&&this.cycle(),this}}};var e=$.fn.carousel;$.fn.carousel=function(e){return this.each(function(){var n=$(this),r=n.data("carousel"),i=$.extend({},$.fn.carousel.defaults,"object"==typeof e&&e),o="string"==typeof e?e:i.slide;r||n.data("carousel",r=new t(this,i)),"number"==typeof e?r.to(e):o?r[o]():i.interval&&r.pause().cycle()})},$.fn.carousel.defaults={interval:5e3,pause:"hover"},$.fn.carousel.Constructor=t,$.fn.carousel.noConflict=function(){return $.fn.carousel=e,this},$(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var e=$(this),n,r=$(e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),i=$.extend({},r.data(),e.data()),o;r.carousel(i),(o=e.attr("data-slide-to"))&&r.data("carousel").pause().to(o).cycle(),t.preventDefault()})}(window.jQuery),!function($){var t=function(t,e){this.options=$.extend({},$.fn.affix.defaults,e),this.$window=$(window).on("scroll.affix.data-api",$.proxy(this.checkPosition,this)).on("click.affix.data-api",$.proxy(function(){setTimeout($.proxy(this.checkPosition,this),1)},this)),this.$element=$(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=$(document).height(),e=this.$window.scrollTop(),n=this.$element.offset(),r=this.options.offset,i=r.bottom,o=r.top,a="affix affix-top affix-bottom",s;"object"!=typeof r&&(i=o=r),"function"==typeof o&&(o=r.top()),"function"==typeof i&&(i=r.bottom()),s=null!=this.unpin&&e+this.unpin<=n.top?!1:null!=i&&n.top+this.$element.height()>=t-i?"bottom":null!=o&&o>=e?"top":!1,this.affixed!==s&&(this.affixed=s,this.unpin="bottom"==s?n.top-e:null,this.$element.removeClass(a).addClass("affix"+(s?"-"+s:"")))}};var e=$.fn.affix;$.fn.affix=function(e){return this.each(function(){var n=$(this),r=n.data("affix"),i="object"==typeof e&&e;r||n.data("affix",r=new t(this,i)),"string"==typeof e&&r[e]()})},$.fn.affix.Constructor=t,$.fn.affix.defaults={offset:0},$.fn.affix.noConflict=function(){return $.fn.affix=e,this},$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var t=$(this),e=t.data();e.offset=e.offset||{},e.offsetBottom&&(e.offset.bottom=e.offsetBottom),e.offsetTop&&(e.offset.top=e.offsetTop),t.affix(e)})})}(window.jQuery),!function($){function t(t,e){var n=$.proxy(this.process,this),r=$($(t).is("body")?window:t),i;this.options=$.extend({},$.fn.scrollspy.defaults,e),this.$scrollElement=r.on("scroll.scroll-spy.data-api",n),this.selector=(this.options.target||(i=$(t).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=$("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t=this,e;this.offsets=$([]),this.targets=$([]),e=this.$body.find(this.selector).map(function(){var e=$(this),n=e.data("target")||e.attr("href"),r=/^#\w/.test(n)&&$(n);return r&&r.length&&[[r.position().top+(!$.isWindow(t.$scrollElement.get(0))&&t.$scrollElement.scrollTop()),n]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},process:function(){var t=this.$scrollElement.scrollTop()+this.options.offset,e=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=e-this.$scrollElement.height(),r=this.offsets,i=this.targets,o=this.activeTarget,a;if(t>=n)return o!=(a=i.last()[0])&&this.activate(a);for(a=r.length;a--;)o!=i[a]&&t>=r[a]&&(!r[a+1]||t<=r[a+1])&&this.activate(i[a])},activate:function(t){var e,n;this.activeTarget=t,$(this.selector).parent(".active").removeClass("active"),n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',e=$(n).parent("li").addClass("active"),e.parent(".dropdown-menu").length&&(e=e.closest("li.dropdown").addClass("active")),e.trigger("activate")}};var e=$.fn.scrollspy;$.fn.scrollspy=function(e){return this.each(function(){var n=$(this),r=n.data("scrollspy"),i="object"==typeof e&&e;r||n.data("scrollspy",r=new t(this,i)),"string"==typeof e&&r[e]()})},$.fn.scrollspy.Constructor=t,$.fn.scrollspy.defaults={offset:10},$.fn.scrollspy.noConflict=function(){return $.fn.scrollspy=e,this},$(window).on("load",function(){$('[data-spy="scroll"]').each(function(){var t=$(this);t.scrollspy(t.data())})})}(window.jQuery),!function($){var t=function(t){this.element=$(t)};t.prototype={constructor:t,show:function(){var t=this.element,e=t.closest("ul:not(.dropdown-menu)"),n=t.attr("data-target"),r,i,o;n||(n=t.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),t.parent("li").hasClass("active")||(r=e.find(".active:last a")[0],o=$.Event("show",{relatedTarget:r}),t.trigger(o),o.isDefaultPrevented()||(i=$(n),this.activate(t.parent("li"),e),this.activate(i,i.parent(),function(){t.trigger({type:"shown",relatedTarget:r})})))},activate:function(t,e,n){function r(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),n&&n()}var i=e.find("> .active"),o=n&&$.support.transition&&i.hasClass("fade");o?i.one($.support.transition.end,r):r(),i.removeClass("in")}};var e=$.fn.tab;$.fn.tab=function(e){return this.each(function(){var n=$(this),r=n.data("tab");r||n.data("tab",r=new t(this)),"string"==typeof e&&r[e]()})},$.fn.tab.Constructor=t,$.fn.tab.noConflict=function(){return $.fn.tab=e,this},$(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),$(this).tab("show")})}(window.jQuery),$(function(){var t=$("div#leftSidebar");$(window).innerWidth()>1040&&$(window).innerHeight()>1.2*t.height()&&$("div#leftSidebar").affix({offset:{top:170,bottom:100}})});var submit_modal_forms=function(){var t=$("button[formId]"),e=void 0,n=void 0;return t.bind("click",function(t){n=$(this).attr("formId"),e=$("#"+n),e.submit()}),{}}();!function($){var t=function(t,e){this.options=e,
this.$element=$(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",$.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,e=$.Event("show");this.$element.trigger(e),this.isShown&&console.log("this is shown already"),e.isDefaultPrevented()&&console.log("event prevented"),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var e=$.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),e&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),e?t.$element.one($.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault();var e=this;t=$.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),$(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),$.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;$(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,e=setTimeout(function(){t.$element.off($.support.transition.end),t.hideModal()},500);this.$element.one($.support.transition.end,function(){clearTimeout(e),t.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var e=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=$.support.transition&&n;if(this.$backdrop=$('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?$.proxy(this.$element[0].focus,this.$element[0]):$.proxy(this.hide,this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;r?this.$backdrop.one($.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,t):t()):t&&t()}};var e=$.fn.modal;$.fn.modal=function(e){return this.each(function(){var n=$(this),r=n.data("modal"),i=$.extend({},$.fn.modal.defaults,n.data(),"object"==typeof e&&e);r||n.data("modal",r=new t(this,i)),"string"==typeof e?r[e]():i.show&&r.show()})},$.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},$.fn.modal.Constructor=t,$.fn.modal.noConflict=function(){return $.fn.modal=e,this},$(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var e=$(this),n=e.attr("href"),r=$(e.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),i=r.data("modal")?"toggle":$.extend({remote:!/#/.test(n)&&n},r.data(),e.data());t.preventDefault(),r.modal(i).one("hide",function(){e.focus()})})}(window.jQuery),!function($){var t=function(t,e){this.init("tooltip",t,e)};t.prototype={constructor:t,init:function(t,e,n){var r,i,o,a,s;for(this.type=t,this.$element=$(e),this.options=this.getOptions(n),this.enabled=!0,o=this.options.trigger.split(" "),s=o.length;s--;)a=o[s],"click"==a?this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this)):"manual"!=a&&(r="hover"==a?"mouseenter":"focus",i="hover"==a?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,$.proxy(this.leave,this)));this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=$.extend({},$.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var e=$.fn[this.type].defaults,n={},r;return this._options&&$.each(this._options,function(t,r){e[t]!=r&&(n[t]=r)},this),r=$(t.currentTarget)[this.type](n).data(this.type),r.options.delay&&r.options.delay.show?(clearTimeout(this.timeout),r.hoverState="in",void(this.timeout=setTimeout(function(){"in"==r.hoverState&&r.show()},r.options.delay.show))):r.show()},leave:function(t){var e=$(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),e.options.delay&&e.options.delay.hide?(e.hoverState="out",void(this.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide))):e.hide()},show:function(){var t,e,n,r,i,o,a=$.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),i="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertBefore(this.$element),e=this.getPosition(),n=t[0].offsetWidth,r=t[0].offsetHeight,i){case"bottom":o={top:e.top+e.height,left:e.left+e.width/2-n/2};break;case"top":o={top:e.top-r,left:e.left+e.width/2-n/2};break;case"left":o={top:e.top+e.height/2-r/2,left:e.left-n};break;case"right":o={top:e.top+e.height/2-r/2,left:e.left+e.width}}this.applyPlacement(o,i),this.$element.trigger("shown")}},applyPlacement:function(t,e){var n=this.tip(),r=n[0].offsetWidth,i=n[0].offsetHeight,o,a,s,l;n.offset(t).addClass(e).addClass("in"),o=n[0].offsetWidth,a=n[0].offsetHeight,"top"==e&&a!=i&&(t.top=t.top+i-a,l=!0),"bottom"==e||"top"==e?(s=0,t.left<0&&(s=-2*t.left,t.left=0,n.offset(t),o=n[0].offsetWidth,a=n[0].offsetHeight),this.replaceArrow(s-r+o,o,"left")):this.replaceArrow(a-i,a,"top"),l&&n.offset(t)},replaceArrow:function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){n.off($.support.transition.end).detach()},500);n.one($.support.transition.end,function(){clearTimeout(t),n.detach()})}var e=this,n=this.tip(),r=$.Event("hide");return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(n.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?t():n.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return $.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},tip:function(){return this.$tip=this.$tip||$(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var e=t?$(t.currentTarget)[this.type](this._options).data(this.type):this;e.tip().hasClass("in")?e.hide():e.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var e=$.fn.tooltip;$.fn.tooltip=function(e){return this.each(function(){var n=$(this),r=n.data("tooltip"),i="object"==typeof e&&e;r||n.data("tooltip",r=new t(this,i)),"string"==typeof e&&r[e]()})},$.fn.tooltip.Constructor=t;var n=$.fn.tooltip.Constructor.prototype.leave;$.fn.tooltip.Constructor.prototype.leave=function(t){var e,r;return r=$(t.currentTarget)[this.type](this._options).data(this.type),t.currentTarget?(e=$(".tooltip"),this.timeout=setTimeout(function(){r.hide()},100),e.one("mouseenter",function(){return clearTimeout(r.timeout),e.one("mouseleave",function(){return n.call(r,t)})})):void 0},$.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},$.fn.tooltip.noConflict=function(){return $.fn.tooltip=e,this}}(window.jQuery),$("[rel='tooltip']").tooltip(),!function($){var t=function(t,e){this.init("popover",t,e)};t.prototype=$.extend({},$.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t,e=this.$element,n=this.options;return t=("function"==typeof n.content?n.content.call(e[0]):n.content)||e.attr("data-content")},tip:function(){return this.$tip||(this.$tip=$(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var e=$.fn.popover;$.fn.popover=function(e){return this.each(function(){var n=$(this),r=n.data("popover"),i="object"==typeof e&&e;r||n.data("popover",r=new t(this,i)),"string"==typeof e&&r[e]()})},$.fn.popover.Constructor=t;var n=$.fn.popover.Constructor.prototype.leave;$.fn.popover.Constructor.prototype.leave=function(t){var e,r;return r=$(t.currentTarget)[this.type](this._options).data(this.type),n.call(this,t),t.currentTarget?(e=$(".popover"),e.one("mouseenter",function(){return clearTimeout(r.timeout),e.one("mouseleave",function(){return n.call(r,t)})})):void 0},$.fn.popover.defaults=$.extend({},$.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),$.fn.popover.noConflict=function(){return $.fn.popover=e,this}}(window.jQuery),$("[rel='popover']").popover(),!function($){$(document.body).on("click","th.link",function(t){href=$(this).attr("href"),window.location=href}),$(document.body).on("click","tr.link > td",function(t){t.target===this&&(href=$(this).closest("tr.link").attr("href"),window.location=href)})}(window.jQuery),function(){for(var t,e=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],r=n.length,i=window.console=window.console||{};r--;)t=n[r],i[t]||(i[t]=e)}();var pause=function(t){var e=new Date,n=null;do n=new Date;while(t>n-e)},update_chart_element=function(){var t=!0,e=void 0,n=void 0,r=void 0,i=function(r){e=r.parent_element,o(e,r,t),a(n,t,r),s(n,r),c(n,r),l(n,r),u(r),void 0!==r.transform&&n.attr("transform",r.transform),void 0!==r.element_call&&n.call(r.element_call)},o=function(t,e,r){n="datapoint"==e.element_selector||"tooltips"==e.element_selector?t.selectAll(e.element_selector):t.select(e.elemet_selector),n.empty()||void 0!==e.remove_if&&(n.remove(),n=t.select(e.element_selector)),n.empty()?e.element_type&&(n=t.append(e.element_type).attr("class",e.element_class)):(t=e.parent_element.transition(),n="datapoint"==e.element_selector||"tooltips"==e.element_selector?t.selectAll(e.element_selector).duration(750):t.select(e.element_selector).duration(750),r=!1)},a=function(t,e,n){void 0!=n.element_data&&void 0!=n.element_data.data&&"datapoint"!=n.element_selector&&"tooltips"!=n.element_selector&&(e&&t.data([n.element_data.data]),void 0!==n.element_data.attr&&t.attr("d",n.element_data.attr))},s=function(t,e){if("datapoint"===e.element_selector)var n=t.data(e.element_data.datapoints.data).enter().append(e.element_data.datapoints.shape).attr("r",e.element_data.datapoints.attrs.radius).attr("cx",e.element_data.datapoints.datapoints.x).attr("cy",e.element_data.datapoints.datapoints.y)},l=function(t,e){void 0!==e.element_id&&t.attr("id",e.element_id),void 0!==e.element_class&&t.attr("class",e.element_class)},u=function(t){if(void 0!=t.extras){if(void 0!==t.extras.attr){var e=t.extras.attr;for(aa=0;aa<e.length;aa++){var r=e[aa];n.attr(r.attr,r.value)}}if(void 0!==t.extras.text){var i=t.extras.text;for(ta=0;ta<i.length;ta++){var o=i[ta];n.text(o)}}}},c=function(t,e){if("tooltips"===e.element_selector){var n=t.data(e.element_data.tooltips.data).enter().append(e.element_data.tooltips.shape).attr("r",e.element_data.tooltips.attrs.radius).attr("cx",e.element_data.tooltips.datapoints.x).attr("cy",e.element_data.tooltips.datapoints.y).attr("rel","tooltip").attr("title",e.element_data.tooltips.datapoints.tooltip).attr("data-container","body").attr("data-placement","top").attr("data-trigger","hover").attr("data-html",!0);$('[rel="tooltip"]').tooltip()}};return{update:i}}(),chartCanvas=function(){var t=null,e=null,n=null,r=null,o=null,a=null,s=null,l=null,u=null,c={top:null,right:null,bottom:null,left:null},h=null,f=function(t){return l=t,h=$(l),n=d3.select(l),M(n,h),n=n.append("g").attr("transform","translate("+c.left+","+c.top+")"),{canvas:n,width:a,height:s,update_settings:d}},d=function(t){return void 0!==t.axes&&(y(t.axes.x1Gridlines),x(t.axes.y1Gridlines)),void 0!==t.axes&&(p(t.axes),m(t.axes),g(t.axes),v(t.axes)),void 0!==t.dataline&&void 0!==t.dataline.dataline&&void 0!==t.dataline.dataline.line&&b(t.dataline),void 0!==t.dataline&&void 0!==t.dataline.dataline&&void 0!==t.dataline.dataline.area&&w(t.dataline),void 0!==t.chartTitle&&C(t.chartTitle),void 0!==t.datapoints&&T(t.datapoints),void 0!==t.errorBars&&N(t.errorBars),void 0!==t.tooltips&&A(t.tooltips),{canvas:n,width:a,height:s,update_settings:d}},p=function(t){update_chart_element.update({element_type:"g",element_selector:"g.x1axis",element_class:"x1axis axis",element_call:t.x1Axis,parent_element:n,transform:"translate(0,"+_()+")"}),void 0!==t.x1LabelsRotate?n.select("g.x1axis").selectAll("text").style("text-anchor","end").attr("dx","-.5em").attr("dy",".2em").attr("transform",function(e){return"rotate("+t.x1LabelsRotate+")"}):n.select("g.x1axis").selectAll("text").attr("dy","1em")},g=function(t){void 0!=t.x2Axis&&(update_chart_element.update({element_type:"g",element_selector:"g.x2axis",element_class:"x2axis axis",element_call:t.x2Axis,parent_element:n,transform:"translate(0,0)"}),void 0!==t.x2LabelsRotate?n.select("g.x2axis").selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform",function(e){return"rotate("+t.x2LabelsRotate+")"}):n.select("g.x2axis").selectAll("text").attr("dy","-.4em"))},m=function(t){update_chart_element.update({element_type:"g",element_selector:"g.y1axis",element_class:"y1axis axis",element_call:t.y1Axis,parent_element:n,update_if:void 0!==t.dataline}),void 0!==t.y1LabelsRotate&&0!==t.y1LabelsRotate?n.select("g.y1axis").selectAll("text").style("text-anchor","end").attr("dx","-.1em").attr("dy",".7em").attr("transform",function(e){return"rotate("+t.y1LabelsRotate+")"}):n.select("g.y1axis").selectAll("text").attr("dx","-.1em")},v=function(t){void 0!=t.y2Axis&&(update_chart_element.update({element_type:"g",element_selector:"g.y2axis",element_class:"y2axis axis",element_call:t.y2Axis,parent_element:n,update_if:void 0!==t.dataline,transform:"translate("+S()+",0)"}),void 0!==t.y2LabelsRotate&&0!==t.y1LabelsRotate?n.select("g.y2axis").selectAll("text").style("text-anchor","end").attr("dx","-.1em").attr("dy",".7em").attr("transform",function(e){return"rotate("+t.y2LabelsRotate+")"}):n.select("g.y2axis").selectAll("text").attr("dx","+.1em"))},y=function(t){update_chart_element.update({element_type:"g",element_selector:"g.x1grid",element_class:"grid x1grid",element_call:t,parent_element:n,transform:"translate(0,"+_()+")",update_if:!0})},x=function(t){update_chart_element.update({element_type:"g",element_selector:"g.y1grid",element_class:"grid y1grid",element_call:t,parent_element:n,transform:void 0,update_if:!0})},b=function(t){update_chart_element.update({element_type:"path",element_selector:"path#line"+t.dataline.id,element_class:"line "+t.dataline.color,element_id:"line"+t.dataline.id,element_call:void 0,element_data:{data:t.data,attr:t.dataline.line},parent_element:n,transform:void 0})},w=function(t){update_chart_element.update({element_type:"path",element_selector:"path#area"+t.dataline.id,element_class:"area "+t.dataline.color,element_id:"area"+t.dataline.id,element_call:void 0,element_data:{data:t.data,attr:t.dataline.area},parent_element:n,transform:void 0})},C=function(t){update_chart_element.update({element_type:"text",element_selector:"text.chartTitle",element_class:"text chartTitle",extras:{attr:[{attr:"x",value:r/3},{attr:"y",value:0-c.top/2}],text:[t]},parent_element:n,transform:void 0})},M=function(t,e){r=e.width(),t.attr("width",r),o=t.classed("square",!0)?r:e.height(),t.attr("height",o),c.top=.1*o,c.bottom=.2*o,c.left=.1*r,c.right=.1*r,a=S(),s=_()},S=function(){return a=r-c.left-c.right},_=function(){return s=o-c.top-c.bottom},k=function(t){p(t.x1Axis),m(t.y1Axis),y(t.x1Gridlines),x(t.y1Gridlines)},T=function(t){t=t.datapoints,update_chart_element.update({element_selector:"datapoint",element_class:"datapoint "+t.color,element_id:"datapoint"+t.id,element_data:{datapoints:t},element_call:void 0,parent_element:n,transform:void 0,parent_element:n,transform:void 0})},N=function(t){var e=t.data;for(i=0;i<e.length;i++){var r=e[i];update_chart_element.update({element_type:"path",element_selector:"path#line"+t.line.id,element_class:"line "+t.line.color+" "+t.line.htmlclass,element_id:"line"+t.line.id,element_call:void 0,element_data:{data:r,attr:t.line.line},parent_element:n,transform:void 0})}},A=function(t){update_chart_element.update({element_selector:"tooltips",element_class:"tooltips "+t.color,element_id:"tooltips"+t.id,element_data:{tooltips:t},element_call:void 0,parent_element:n,transform:void 0,parent_element:n,transform:void 0})};return{set_canvas_element:f}},chartAxes=function(){var t=void 0,e=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=void 0,c=void 0,h=void 0,f=void 0,d=void 0,p=void 0,g=void 0,m=void 0,v=1,y=1,x=1,b=1,w=3,C=3,M=3,S=3,_=function(e){return t=e,{y1:T(),x1:k(),y1Axis:q(),x1Axis:z(),y1Gridlines:V(w),x1Gridlines:B(M),x1LabelsRotate:o,y1LabelsRotate:a,y2:A(),x2:N(),y2Axis:H(),x2Axis:U(),y2Gridlines:G(C),x2Gridlines:J(S),x2LabelsRotate:h,y2LabelsRotate:f,update_settings:E}},k=function(){return u=d3.scale.linear().range([0,t.width])},T=function(){return c=d3.scale.linear().range([t.height,0])},N=function(){return g=d3.time.scale().range([0,t.width])},A=function(){return m=d3.scale.linear().range([t.height,0])},E=function(t){void 0!==t.x1Range&&R(t.x1Range),void 0!==t.y1Range&&L(t.y1Range),void 0!==t.x1Title&&O(t.x1Title),void 0!==t.y1Title&&D(t.y1Title),void 0!==t.x1LabelsRotate&&(t.axes.x1LabelsRotate=+t.x1LabelsRotate),void 0!==t.y1LabelsRotate&&(t.axes.y1LabelsRotate=+t.y1LabelsRotate),void 0!==t.y1TickFormat&&t.axes.y1Axis.tickFormat(t.y1TickFormat),void 0!==t.x1TickFormat&&t.axes.x1Axis.tickFormat(t.x1TickFormat),void 0!==t.x2Range&&I(t.x2Range),void 0!==t.y2Range&&P(t.y2Range),void 0!==t.x2Title&&j(t.x2Title),void 0!==t.y2Title&&F(t.y2Title),void 0!==t.x2LabelsRotate&&(t.axes.x2LabelsRotate=+t.x2LabelsRotate),void 0!==t.y2LabelsRotate&&(t.axes.y2LabelsRotate=+t.y2LabelsRotate),void 0!==t.y2TickFormat&&t.axes.y2Axis.tickFormat(t.y2TickFormat),void 0!==t.x2TickFormat&&t.axes.x2Axis.tickFormat(t.x2TickFormat),void 0!==t.x1TickSize&&t.axes.x1Axis.tickSize(-t.x1TickSize),void 0!==t.x2TickSize&&t.axes.x2Axis.tickSize(-t.x2TickSize),void 0!==t.y1TickSize&&t.axes.y1Axis.tickSize(-t.y1TickSize),void 0!==t.y2TickSize&&t.axes.y2Axis.tickSize(-t.y2TickSize),void 0!==t.y1NumberOfTicks&&(t.axes.y1Axis.ticks(t.y1NumberOfTicks),t.axes.y1Gridlines.ticks(t.y1NumberOfTicks)),void 0!==t.y2NumberOfTicks&&(t.axes.y2Axis.ticks(t.y2NumberOfTicks),t.axes.y2Gridlines.ticks(t.y2NumberOfTicks)),void 0!==t.x1NumberOfTicks&&(t.axes.x1Axis.ticks(t.x1NumberOfTicks),t.axes.x1Gridlines.ticks(t.x1NumberOfTicks)),void 0!==t.x2NumberOfTicks&&(t.axes.x2Axis.ticks(t.x2NumberOfTicks),t.axes.x2Gridlines.ticks(t.x2NumberOfTicks))},R=function(t){u.domain(t)},L=function(t){c.domain(t)},I=function(t){g.domain(t)},P=function(t){m.domain(t)},O=function(e){update_chart_element.update({element_type:"text",element_selector:"text.x1Title",element_class:"text x1Title",extras:{attr:[{attr:"x",value:t.width/2},{attr:"y",value:1.07*t.height}],text:[e]},parent_element:t.canvas,transform:void 0})},D=function(e){update_chart_element.update({element_type:"text",element_selector:"text.y1Title",element_class:"text y1Title",extras:{attr:[{attr:"x",value:0-t.height/2},{attr:"y",value:0-.07*t.width},{attr:"dy",value:"0em"},{attr:"dx",value:"-3em"}],text:[e]},parent_element:t.canvas,transform:"rotate(-90)"})},j=function(e){update_chart_element.update({element_type:"text",element_selector:"text.x2Title",element_class:"text x2Title",extras:{attr:[{attr:"x",value:t.width/2},{attr:"y",value:1.15*t.height}],text:[x1Title]},parent_element:t.canvas,transform:void 0})},F=function(e){update_chart_element.update({element_type:"text",element_selector:"text.y2Title",element_class:"text y2Title",extras:{attr:[{attr:"x",value:0-t.height/2},{attr:"y",value:0-.07*t.width},{attr:"dy",value:"1em"}],text:[y1Title]},parent_element:t.canvas,transform:"rotate(-90)"})},z=function(){return x1Axis=d3.svg.axis().scale(u).orient("bottom").ticks(M),x1Axis},q=function(){return y1Axis=d3.svg.axis().scale(c).orient("left").ticks(w),y1Axis},U=function(){return x2Axis=d3.svg.axis().scale(g).orient("top").ticks(S),x2Axis},H=function(){return y2Axis=d3.svg.axis().scale(m).orient("right").ticks(C),y2Axis},B=function(e){return r=d3.svg.axis().scale(u).orient("bottom").ticks(e).tickSize(-t.height,0,0).tickFormat("")},V=function(e){return i=d3.svg.axis().scale(c).orient("left").ticks(e).tickSize(-t.width,0,0).tickFormat("")},J=function(e){return x2GridLines=d3.svg.axis().scale(g).orient("top").ticks(e).tickSize(-t.height,0,0).tickFormat(""),x2GridLines},G=function(e){return y2GridLines=d3.svg.axis().scale(m).orient("right").ticks(e).tickSize(-t.width,0,0).tickFormat(""),y2GridLines};return{initialise_axes_for_chart:_}},chartPath=function(){var t=null,e=null,n=function(t){return e=t.area?o(t):void 0,{line:i(t),area:e,x1Values:t.x1Values,y1Values:t.y1Values,id:t.id,color:t.color,htmlclass:t.htmlclass}},r=function(t){},i=function(t){return valueline=d3.svg.line().interpolate("basis").x(function(e){return t.axes.x1(e[t.x1Values])}).y(function(e){return t.axes.y1(e[t.y1Values])}),valueline},o=function(t){return e=d3.svg.area().interpolate("basis").x(function(e){return t.axes.x1(e[t.x1Values])}).y0(t.chart.height).y1(function(e){return t.axes.y1(e[t.y1Values])})};return{initialise_path:n}},chartDatapoints=function(){var t=null,e=function(t){return{datapoints:r(t),id:t.id,color:t.color,shape:t.shape,attrs:i(t),data:t.data}},n=function(t){},r=function(t){return datapoints={x:function(e){return t.axes.x1(e[t.x1Values])},y:function(e){return t.axes.y1(e[t.y1Values])}},datapoints},i=function(t){var e={};return"circle"==t.shape&&(e={radius:t.radius}),e};return{init:e,update_settings:n}},chartErrorBars=function(){var t=function(t){return{line:n(t),data:r(t)}},e=function(t){},n=function(t){var e=d3.svg.line().interpolate("linear").x(function(t){return t.x}).y(function(t){return t.y});return e={line:e,x1Values:"x",y1Values:"y",id:t.id,color:t.color,htmlclass:t.htmlclass}},r=function(t){var e=new Array,n=t.data;for(i=0;i<n.length;i++){var r=n[i],o=[{x:t.axes.x1(r[t.x1Values]),y:t.axes.y1(r[t.y1Values]-r[t.y1Errors])},{x:t.axes.x1(r[t.x1Values]),y:t.axes.y1(r[t.y1Values]+r[t.y1Errors])}];e.push(o),thisRange=t.x1Range[0]-t.x1Range[1];var a=[{x:t.axes.x1(r[t.x1Values]-thisRange/150),y:t.axes.y1(r[t.y1Values]-r[t.y1Errors])},{x:t.axes.x1(r[t.x1Values]+thisRange/150),y:t.axes.y1(r[t.y1Values]-r[t.y1Errors])}];e.push(a);var s=[{x:t.axes.x1(r[t.x1Values]-thisRange/150),y:t.axes.y1(r[t.y1Values]+r[t.y1Errors])},{x:t.axes.x1(r[t.x1Values]+thisRange/150),y:t.axes.y1(r[t.y1Values]+r[t.y1Errors])}];e.push(s)}return e};return{init:t,update_attributes:e}},chartDataTooltips=function(){var t=void 0,e=function(t){return{div:r(),tooltipContents:t.tooltipContents,datapoints:i(t),id:t.id,color:t.color,shape:t.shape,attrs:o(t),data:t.data}},n=function(t){},r=function(){var t=d3.select("body").append("div").attr("class","tooltip-data").style("opacity",0);return t},i=function(t){return hoverpoints={x:function(e){return t.axes.x1(e[t.x1Values])},y:function(e){return t.axes.y1(e[t.y1Values])},tooltip:function(t){return t.tooltip}},hoverpoints},o=function(t){var e={};return"circle"==t.shape&&(e={radius:t.radius}),e};return{init:e,update_attributes:n}},transientLightcurve=function(){var t=void 0,e=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=d3.time.format("%Y-%m-%dT%H:%M:%S").parse,s=function(r){return i=d3.select(r),t=$(r).attr("data-src"),n=new chartCanvas,n=n.set_canvas_element(r),e=new chartAxes,e=e.initialise_axes_for_chart(n),{}},l=function(){d3.json(t,function(t){data=t.chartData,data.forEach(function(t){t.observationDate=a(t.observationDate),t.mjd=+t.mjd,t.magnitude=+t.magnitude,t.observationMJD=+t.observationMJD}),o=u(t),h(data),c(t),f(data,o),d(data)})},u=function(t){var n=d3.max(data,function(t){return t.observationDate}),r=d3.min(data,function(t){return t.observationDate}),i=(+n-+r)/864e5;if(3>i){minX2range=2592e5;var o=(+n+ +r)/2;n=o+minX2range/2,r=o-minX2range/2,n=new Date(n),r=new Date(r)}x2Range=[r,n];var a=date_to_mjd(n),s=date_to_mjd(r),l=[s,a],u=d3.max(data,function(t){return t.magnitude}),c=d3.min(data,function(t){return t.magnitude});if(y1Range=3,u-c<y1Range){var h=(u+c)/2;c=h-y1Range/2,u=h+y1Range/2}return y1Range=[u,c],thisRange=Math.floor(a-s),thisRange<6?x1NumberOfTicks=thisRange:x1NumberOfTicks=6,e.update_settings({chartTitle:t.chartAttributes.title,axes:e,x1Range:l,y1Range:y1Range,x2Range:x2Range,y2Range:y1Range,x1Title:t.chartAttributes.x1title,y1Title:t.chartAttributes.y1title,x1LabelsRotate:void 0,y1LabelsRotate:void 0,x1TickFormat:d3.format("d"),y1TickFormat:void 0,x2TickFormat:d3.time.format("%Y-%m-%d"),x1TickSize:6,y1TickSize:6,x2TickSize:6,y2TickSize:6,x1NumberOfTicks:x1NumberOfTicks,x2NumberOfTicks:x1NumberOfTicks,y1NumberOfTicks:6,y2NumberOfTicks:6}),l},c=function(t){n.update_settings({chartTitle:t.chartAttributes.title,axes:e,dataline:{}})},h=function(t){dataline=new chartPath,dataline=dataline.initialise_path({axes:e,chart:n,x1Values:"observationMJD",y1Values:"magnitude",color:"lightgrey",id:Math.floor(1e4*Math.random()+1).toString()}),datapoints=new chartDatapoints,datapoints=datapoints.init({data:t,x1Values:"observationMJD",y1Values:"magnitude",y1Errors:"magnitudeError",color:"red",id:Math.floor(1e4*Math.random()+1).toString(),shape:"circle",radius:3.5,axes:e,chart:n}),n.update_settings({dataline:{dataline:dataline,data:t},datapoints:{datapoints:datapoints}})},f=function(t,r){errorBars=new chartErrorBars,errorBars=errorBars.init({data:t,axes:e,chart:n,x1Range:r,x1Values:"observationMJD",y1Values:"magnitude",y1Errors:"magnitudeError",color:"black",id:Math.floor(1e4*Math.random()+1).toString(),htmlclass:"errorbar"}),n.update_settings({errorBars:errorBars})},d=function(t){tooltips=new chartDataTooltips,tooltips=tooltips.init({data:t,x1Values:"observationMJD",y1Values:"magnitude",color:"red",id:Math.floor(1e4*Math.random()+1).toString(),shape:"circle",radius:3.5,axes:e,chart:n,htmlclass:"tooltip"}),n.update_settings({tooltips:tooltips})};return{init:s,plot:l}},plot_lightcurves=function(){var t=new Array;$("svg[chartType='lightcurve']").each(function(e,n){var r=new transientLightcurve;r.init(n),r.plot(),t.push(r)})}(),hljs=new function(){function t(t){return t.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function e(t){return t.nodeName.toLowerCase()}function n(t,e){var n=t&&t.exec(e);return n&&0==n.index}function r(t){return Array.prototype.map.call(t.childNodes,function(t){return 3==t.nodeType?y.useBR?t.nodeValue.replace(/\n/g,""):t.nodeValue:"br"==e(t)?"\n":r(t)}).join("")}function i(t){var e=(t.className+" "+(t.parentNode?t.parentNode.className:"")).split(/\s+/);return e=e.map(function(t){return t.replace(/^language-/,"")}),e.filter(function(t){return v(t)||"no-highlight"==t})[0]}function o(t,e){var n={};for(var r in t)n[r]=t[r];if(e)for(var r in e)n[r]=e[r];return n}function a(t){var n=[];return function r(t,i){for(var o=t.firstChild;o;o=o.nextSibling)3==o.nodeType?i+=o.nodeValue.length:"br"==e(o)?i+=1:1==o.nodeType&&(n.push({event:"start",offset:i,node:o}),i=r(o,i),n.push({event:"stop",offset:i,node:o}));return i}(t,0),n}function s(n,r,i){function o(){return n.length&&r.length?n[0].offset!=r[0].offset?n[0].offset<r[0].offset?n:r:"start"==r[0].event?n:r:n.length?n:r}function a(n){function r(e){return" "+e.nodeName+'="'+t(e.value)+'"'}c+="<"+e(n)+Array.prototype.map.call(n.attributes,r).join("")+">"}function s(t){c+="</"+e(t)+">"}function l(t){("start"==t.event?a:s)(t.node)}for(var u=0,c="",h=[];n.length||r.length;){var f=o();if(c+=t(i.substr(u,f[0].offset-u)),u=f[0].offset,f==n){h.reverse().forEach(s);do l(f.splice(0,1)[0]),f=o();while(f==n&&f.length&&f[0].offset==u);h.reverse().forEach(a)}else"start"==f[0].event?h.push(f[0].node):h.pop(),l(f.splice(0,1)[0])}return c+t(i.substr(u))}function l(t){function e(t){return t&&t.source||t}function n(n,r){return RegExp(e(n),"m"+(t.cI?"i":"")+(r?"g":""))}function r(i,a){function s(e,n){t.cI&&(n=n.toLowerCase()),n.split(" ").forEach(function(t){var n=t.split("|");l[n[0]]=[e,n[1]?Number(n[1]):1]})}if(!i.compiled){if(i.compiled=!0,i.k=i.k||i.bK,i.k){var l={};"string"==typeof i.k?s("keyword",i.k):Object.keys(i.k).forEach(function(t){s(t,i.k[t])}),i.k=l}i.lR=n(i.l||/\b[A-Za-z0-9_]+\b/,!0),a&&(i.bK&&(i.b=i.bK.split(" ").join("|")),i.b||(i.b=/\B|\b/),i.bR=n(i.b),i.e||i.eW||(i.e=/\B|\b/),i.e&&(i.eR=n(i.e)),i.tE=e(i.e)||"",i.eW&&a.tE&&(i.tE+=(i.e?"|":"")+a.tE)),i.i&&(i.iR=n(i.i)),void 0===i.r&&(i.r=1),i.c||(i.c=[]);var u=[];i.c.forEach(function(t){t.v?t.v.forEach(function(e){u.push(o(t,e))}):u.push("self"==t?i:t)}),i.c=u,i.c.forEach(function(t){r(t,i)}),i.starts&&r(i.starts,a);var c=i.c.map(function(t){return t.bK?"\\.?\\b("+t.b+")\\b\\.?":t.b}).concat([i.tE]).concat([i.i]).map(e).filter(Boolean);i.t=c.length?n(c.join("|"),!0):{exec:function(t){return null}},i.continuation={}}}r(t)}function u(e,r,i,o){function a(t,e){for(var r=0;r<e.c.length;r++)if(n(e.c[r].bR,t))return e.c[r]}function s(t,e){return n(t.eR,e)?t:t.eW?s(t.parent,e):void 0}function h(t,e){return!i&&n(e.iR,t)}function f(t,e){var n=C.cI?e[0].toLowerCase():e[0];return t.k.hasOwnProperty(n)&&t.k[n]}function d(t,e,n,r){var i=r?"":y.classPrefix,o='<span class="'+i,a=n?"":"</span>";return o+=t+'">',o+e+a}function p(){var e=t(k);if(!M.k)return e;var n="",r=0;M.lR.lastIndex=0;for(var i=M.lR.exec(e);i;){n+=e.substr(r,i.index-r);var o=f(M,i);o?(T+=o[1],n+=d(o[0],i[0])):n+=i[0],r=M.lR.lastIndex,i=M.lR.exec(e)}return n+e.substr(r)}function g(){if(M.sL&&!x[M.sL])return t(k);var e=M.sL?u(M.sL,k,!0,M.continuation.top):c(k);return M.r>0&&(T+=e.r),"continuous"==M.subLanguageMode&&(M.continuation.top=e.top),d(e.language,e.value,!1,!0)}function m(){return void 0!==M.sL?g():p()}function b(e,n){var r=e.cN?d(e.cN,"",!0):"";e.rB?(S+=r,k=""):e.eB?(S+=t(n)+r,
k=""):(S+=r,k=n),M=Object.create(e,{parent:{value:M}})}function w(e,n){if(k+=e,void 0===n)return S+=m(),0;var r=a(n,M);if(r)return S+=m(),b(r,n),r.rB?0:n.length;var i=s(M,n);if(i){var o=M;o.rE||o.eE||(k+=n),S+=m();do M.cN&&(S+="</span>"),T+=M.r,M=M.parent;while(M!=i.parent);return o.eE&&(S+=t(n)),k="",i.starts&&b(i.starts,""),o.rE?0:n.length}if(h(n,M))throw new Error('Illegal lexeme "'+n+'" for mode "'+(M.cN||"<unnamed>")+'"');return k+=n,n.length||1}var C=v(e);if(!C)throw new Error('Unknown language: "'+e+'"');l(C);for(var M=o||C,S="",_=M;_!=C;_=_.parent)_.cN&&(S=d(_.cN,S,!0));var k="",T=0;try{for(var N,A,E=0;;){if(M.t.lastIndex=E,N=M.t.exec(r),!N)break;A=w(r.substr(E,N.index-E),N[0]),E=N.index+A}w(r.substr(E));for(var _=M;_.parent;_=_.parent)_.cN&&(S+="</span>");return{r:T,value:S,language:e,top:M}}catch(R){if(-1!=R.message.indexOf("Illegal"))return{r:0,value:t(r)};throw R}}function c(e,n){n=n||y.languages||Object.keys(x);var r={r:0,value:t(e)},i=r;return n.forEach(function(t){if(v(t)){var n=u(t,e,!1);n.language=t,n.r>i.r&&(i=n),n.r>r.r&&(i=r,r=n)}}),i.language&&(r.second_best=i),r}function h(t){return y.tabReplace&&(t=t.replace(/^((<[^>]+>|\t)+)/gm,function(t,e,n,r){return e.replace(/\t/g,y.tabReplace)})),y.useBR&&(t=t.replace(/\n/g,"<br>")),t}function f(t){var e=r(t),n=i(t);if("no-highlight"!=n){var o=n?u(n,e,!0):c(e),l=a(t);if(l.length){var f=document.createElementNS("http://www.w3.org/1999/xhtml","pre");f.innerHTML=o.value,o.value=s(l,a(f),e)}o.value=h(o.value),t.innerHTML=o.value,t.className+=" hljs "+(!n&&o.language||""),t.result={language:o.language,re:o.r},o.second_best&&(t.second_best={language:o.second_best.language,re:o.second_best.r})}}function d(t){y=o(y,t)}function p(){if(!p.called){p.called=!0;var t=document.querySelectorAll("pre code");Array.prototype.forEach.call(t,f)}}function g(){addEventListener("DOMContentLoaded",p,!1),addEventListener("load",p,!1)}function m(t,e){var n=x[t]=e(this);n.aliases&&n.aliases.forEach(function(e){b[e]=t})}function v(t){return x[t]||x[b[t]]}var y={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},x={},b={};this.highlight=u,this.highlightAuto=c,this.fixMarkup=h,this.highlightBlock=f,this.configure=d,this.initHighlighting=p,this.initHighlightingOnLoad=g,this.registerLanguage=m,this.getLanguage=v,this.inherit=o,this.IR="[a-zA-Z][a-zA-Z0-9_]*",this.UIR="[a-zA-Z_][a-zA-Z0-9_]*",this.NR="\\b\\d+(\\.\\d+)?",this.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",this.BNR="\\b(0b[01]+)",this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",this.BE={b:"\\\\[\\s\\S]",r:0},this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE]},this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE]},this.CLCM={cN:"comment",b:"//",e:"$"},this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"},this.HCM={cN:"comment",b:"#",e:"$"},this.NM={cN:"number",b:this.NR,r:0},this.CNM={cN:"number",b:this.CNR,r:0},this.BNM={cN:"number",b:this.BNR,r:0},this.REGEXP_MODE={cN:"regexp",b:/\//,e:/\/[gim]*/,i:/\n/,c:[this.BE,{b:/\[/,e:/\]/,r:0,c:[this.BE]}]},this.TM={cN:"title",b:this.IR,r:0},this.UTM={cN:"title",b:this.UIR,r:0}};hljs.registerLanguage("bash",function(t){var e={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)\}/}]},n={cN:"string",b:/"/,e:/"/,c:[t.BE,e,{cN:"variable",b:/\$\(/,e:/\)/,c:[t.BE]}]},r={cN:"string",b:/'/,e:/'/};return{l:/-?[a-z\.]+/,k:{keyword:"if then else elif fi for break continue while in do done exit return set declare case esac export exec",literal:"true false",built_in:"printf echo read cd pwd pushd popd dirs let eval unset typeset readonly getopts source shopt caller type hash bind help sudo",operator:"-ne -eq -lt -gt -f -d -e -s -l -a"},c:[{cN:"shebang",b:/^#![^\n]+sh\s*$/,r:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[t.inherit(t.TM,{b:/\w[\w\d_]*/})],r:0},t.HCM,t.NM,n,r,e]}}),hljs.registerLanguage("cs",function(t){var e="abstract as base bool break byte case catch char checked const continue decimal default delegate do double else enum event explicit extern false finally fixed float for foreach goto if implicit in int interface internal is lock long new null object operator out override params private protected public readonly ref return sbyte sealed short sizeof stackalloc static string struct switch this throw true try typeof uint ulong unchecked unsafe ushort using virtual volatile void while async await ascending descending from get group into join let orderby partial select set value var where yield";return{k:e,c:[{cN:"comment",b:"///",e:"$",rB:!0,c:[{cN:"xmlDocTag",b:"///|<!--|-->"},{cN:"xmlDocTag",b:"</?",e:">"}]},t.CLCM,t.CBLCLM,{cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line region endregion pragma checksum"},{cN:"string",b:'@"',e:'"',c:[{b:'""'}]},t.ASM,t.QSM,t.CNM,{bK:"protected public private internal",e:/[{;=]/,k:e,c:[{bK:"class namespace interface",starts:{c:[t.TM]}},{b:t.IR+"\\s*\\(",rB:!0,c:[t.TM]}]}]}}),hljs.registerLanguage("ruby",function(t){var e="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",n="and false then defined module in return redo if BEGIN retry end for true self when next until do begin unless END rescue nil else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor",r={cN:"yardoctag",b:"@[A-Za-z]+"},i={cN:"comment",v:[{b:"#",e:"$",c:[r]},{b:"^\\=begin",e:"^\\=end",c:[r],r:10},{b:"^__END__",e:"\\n$"}]},o={cN:"subst",b:"#\\{",e:"}",k:n},a={cN:"string",c:[t.BE,o],v:[{b:/'/,e:/'/},{b:/"/,e:/"/},{b:"%[qw]?\\(",e:"\\)"},{b:"%[qw]?\\[",e:"\\]"},{b:"%[qw]?{",e:"}"},{b:"%[qw]?<",e:">",r:10},{b:"%[qw]?/",e:"/",r:10},{b:"%[qw]?%",e:"%",r:10},{b:"%[qw]?-",e:"-",r:10},{b:"%[qw]?\\|",e:"\\|",r:10},{b:/\B\?(\\\d{1,3}|\\x[A-Fa-f0-9]{1,2}|\\u[A-Fa-f0-9]{4}|\\?\S)\b/}]},s={cN:"params",b:"\\(",e:"\\)",k:n},l=[a,i,{cN:"class",bK:"class module",e:"$|;",i:/=/,c:[t.inherit(t.TM,{b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?"}),{cN:"inheritance",b:"<\\s*",c:[{cN:"parent",b:"("+t.IR+"::)?"+t.IR}]},i]},{cN:"function",bK:"def",e:" |$|;",r:0,c:[t.inherit(t.TM,{b:e}),s,i]},{cN:"constant",b:"(::)?(\\b[A-Z]\\w*(::)?)+",r:0},{cN:"symbol",b:":",c:[a,{b:e}],r:0},{cN:"symbol",b:t.UIR+"(\\!|\\?)?:",r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{cN:"variable",b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{b:"("+t.RSR+")\\s*",c:[i,{cN:"regexp",c:[t.BE,o],i:/\n/,v:[{b:"/",e:"/[a-z]*"},{b:"%r{",e:"}[a-z]*"},{b:"%r\\(",e:"\\)[a-z]*"},{b:"%r!",e:"![a-z]*"},{b:"%r\\[",e:"\\][a-z]*"}]}],r:0}];return o.c=l,s.c=l,{k:n,c:l}}),hljs.registerLanguage("diff",function(t){return{c:[{cN:"chunk",r:10,v:[{b:/^\@\@ +\-\d+,\d+ +\+\d+,\d+ +\@\@$/},{b:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{b:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{cN:"header",v:[{b:/Index: /,e:/$/},{b:/=====/,e:/=====$/},{b:/^\-\-\-/,e:/$/},{b:/^\*{3} /,e:/$/},{b:/^\+\+\+/,e:/$/},{b:/\*{5}/,e:/\*{5}$/}]},{cN:"addition",b:"^\\+",e:"$"},{cN:"deletion",b:"^\\-",e:"$"},{cN:"change",b:"^\\!",e:"$"}]}}),hljs.registerLanguage("javascript",function(t){return{aliases:["js"],k:{keyword:"in if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const class",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require"},c:[{cN:"pi",b:/^\s*('|")use strict('|")/,r:10},t.ASM,t.QSM,t.CLCM,t.CBLCLM,t.CNM,{b:"("+t.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[t.CLCM,t.CBLCLM,t.REGEXP_MODE,{b:/</,e:/>;/,r:0,sL:"xml"}],r:0},{cN:"function",bK:"function",e:/\{/,c:[t.inherit(t.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/}),{cN:"params",b:/\(/,e:/\)/,c:[t.CLCM,t.CBLCLM],i:/["'\(]/}],i:/\[|%/},{b:/\$[(.]/},{b:"\\."+t.IR,r:0}]}}),hljs.registerLanguage("xml",function(t){var e="[A-Za-z0-9\\._:-]+",n={b:/<\?(php)?(?!\w)/,e:/\?>/,sL:"php",subLanguageMode:"continuous"},r={eW:!0,i:/</,r:0,c:[n,{cN:"attribute",b:e,r:0},{b:"=",r:0,c:[{cN:"value",v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s\/>]+/}]}]}]};return{aliases:["html"],cI:!0,c:[{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},{cN:"comment",b:"<!--",e:"-->",r:10},{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{title:"style"},c:[r],starts:{e:"</style>",rE:!0,sL:"css"}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{title:"script"},c:[r],starts:{e:"</script>",rE:!0,sL:"javascript"}},{b:"<%",e:"%>",sL:"vbscript"},n,{cN:"pi",b:/<\?\w+/,e:/\?>/,r:10},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:"[^ /><]+",r:0},r]}]}}),hljs.registerLanguage("markdown",function(t){return{c:[{cN:"header",v:[{b:"^#{1,6}",e:"$"},{b:"^.+?\\n[=-]{2,}$"}]},{b:"<",e:">",sL:"xml",r:0},{cN:"bullet",b:"^([*+-]|(\\d+\\.))\\s+"},{cN:"strong",b:"[*_]{2}.+?[*_]{2}"},{cN:"emphasis",v:[{b:"\\*.+?\\*"},{b:"_.+?_",r:0}]},{cN:"blockquote",b:"^>\\s+",e:"$"},{cN:"code",v:[{b:"`.+?`"},{b:"^( {4}|	)",e:"$",r:0}]},{cN:"horizontal_rule",b:"^[-\\*]{3,}",e:"$"},{b:"\\[.+?\\][\\(\\[].+?[\\)\\]]",rB:!0,c:[{cN:"link_label",b:"\\[",e:"\\]",eB:!0,rE:!0,r:0},{cN:"link_url",b:"\\]\\(",e:"\\)",eB:!0,eE:!0},{cN:"link_reference",b:"\\]\\[",e:"\\]",eB:!0,eE:!0}],r:10},{b:"^\\[.+\\]:",e:"$",rB:!0,c:[{cN:"link_reference",b:"\\[",e:"\\]",eB:!0,eE:!0},{cN:"link_url",b:"\\s",e:"$"}]}]}}),hljs.registerLanguage("css",function(t){var e="[a-zA-Z-][a-zA-Z0-9_-]*",n={cN:"function",b:e+"\\(",e:"\\)",c:["self",t.NM,t.ASM,t.QSM]};return{cI:!0,i:"[=/|']",c:[t.CBLCLM,{cN:"id",b:"\\#[A-Za-z0-9_-]+"},{cN:"class",b:"\\.[A-Za-z0-9_-]+",r:0},{cN:"attr_selector",b:"\\[",e:"\\]",i:"$"},{cN:"pseudo",b:":(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\\\"\\']+"},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{cN:"at_rule",b:"@",e:"[{;]",c:[{cN:"keyword",b:/\S+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[n,t.ASM,t.QSM,t.NM]}]},{cN:"tag",b:e,r:0},{cN:"rules",b:"{",e:"}",i:"[^\\s]",r:0,c:[t.CBLCLM,{cN:"rule",b:"[^\\s]",rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:"[A-Z\\_\\.\\-]+",e:":",eE:!0,i:"[^\\s]",starts:{cN:"value",eW:!0,eE:!0,c:[n,t.NM,t.QSM,t.ASM,t.CBLCLM,{cN:"hexcolor",b:"#[0-9A-Fa-f]+"},{cN:"important",b:"!important"}]}}]}]}]}}),hljs.registerLanguage("profile",function(t){return{c:[t.CNM,{cN:"built_in",b:"{",e:"}$",eB:!0,eE:!0,c:[t.ASM,t.QSM],r:0},{cN:"filename",b:"[a-zA-Z_][\\da-zA-Z_]+\\.[\\da-zA-Z_]{1,3}",e:":",eE:!0},{cN:"header",b:"(ncalls|tottime|cumtime)",e:"$",k:"ncalls tottime|10 cumtime|10 filename",r:10},{cN:"summary",b:"function calls",e:"$",c:[t.CNM],r:10},t.ASM,t.QSM,{cN:"function",b:"\\(",e:"\\)$",c:[t.UTM],r:0}]}}),hljs.registerLanguage("http",function(t){return{i:"\\S",c:[{cN:"status",b:"^HTTP/[0-9\\.]+",e:"$",c:[{cN:"number",b:"\\b\\d{3}\\b"}]},{cN:"request",b:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",rB:!0,e:"$",c:[{cN:"string",b:" ",e:" ",eB:!0,eE:!0}]},{cN:"attribute",b:"^\\w",e:": ",eE:!0,i:"\\n|\\s|=",starts:{cN:"string",e:"$"}},{b:"\\n\\n",starts:{sL:"",eW:!0}}]}}),hljs.registerLanguage("java",function(t){var e="false synchronized int abstract float private char boolean static null if const for true while long throw strictfp finally protected import native final return void enum else break transient new catch instanceof byte super volatile case assert short package default double public try this switch continue throws";return{k:e,i:/<\//,c:[{cN:"javadoc",b:"/\\*\\*",e:"\\*/",c:[{cN:"javadoctag",b:"(^|\\s)@[A-Za-z]+"}],r:10},t.CLCM,t.CBLCLM,t.ASM,t.QSM,{bK:"protected public private",e:/[{;=]/,k:e,c:[{cN:"class",bK:"class interface",eW:!0,i:/[:"<>]/,c:[{bK:"extends implements",r:10},t.UTM]},{b:t.UIR+"\\s*\\(",rB:!0,c:[t.UTM]}]},t.CNM,{cN:"annotation",b:"@[A-Za-z]+"}]}}),hljs.registerLanguage("php",function(t){var e={cN:"variable",b:"\\$+[a-zA-Z_-ÿ][a-zA-Z0-9_-ÿ]*"},n={cN:"preprocessor",b:/<\?(php)?|\?>/},r={cN:"string",c:[t.BE,n],v:[{b:'b"',e:'"'},{b:"b'",e:"'"},t.inherit(t.ASM,{i:null}),t.inherit(t.QSM,{i:null})]},i={v:[t.BNM,t.CNM]};return{cI:!0,k:"and include_once list abstract global private echo interface as static endswitch array null if endwhile or const for endforeach self var while isset public protected exit foreach throw elseif include __FILE__ empty require_once do xor return parent clone use __CLASS__ __LINE__ else break print eval new catch __METHOD__ case exception default die require __FUNCTION__ enddeclare final try switch continue endfor endif declare unset true false trait goto instanceof insteadof __DIR__ __NAMESPACE__ yield finally",c:[t.CLCM,t.HCM,{cN:"comment",b:"/\\*",e:"\\*/",c:[{cN:"phpdoc",b:"\\s@[A-Za-z]+"},n]},{cN:"comment",b:"__halt_compiler.+?;",eW:!0,k:"__halt_compiler",l:t.UIR},{cN:"string",b:"<<<['\"]?\\w+['\"]?$",e:"^\\w+;",c:[t.BE]},n,e,{cN:"function",bK:"function",e:/[;{]/,i:"\\$|\\[|%",c:[t.UTM,{cN:"params",b:"\\(",e:"\\)",c:["self",e,t.CBLCLM,r,i]}]},{cN:"class",bK:"class interface",e:"{",i:/[:\(\$"]/,c:[{bK:"extends implements",r:10},t.UTM]},{bK:"namespace",e:";",i:/[\.']/,c:[t.UTM]},{bK:"use",e:";",c:[t.UTM]},{b:"=>"},r,i]}}),hljs.registerLanguage("python",function(t){var e={cN:"prompt",b:/^(>>>|\.\.\.) /},n={cN:"string",c:[t.BE],v:[{b:/(u|b)?r?'''/,e:/'''/,c:[e],r:10},{b:/(u|b)?r?"""/,e:/"""/,c:[e],r:10},{b:/(u|r|ur)'/,e:/'/,r:10},{b:/(u|r|ur)"/,e:/"/,r:10},{b:/(b|br)'/,e:/'/},{b:/(b|br)"/,e:/"/},t.ASM,t.QSM]},r={cN:"number",r:0,v:[{b:t.BNR+"[lLjJ]?"},{b:"\\b(0o[0-7]+)[lLjJ]?"},{b:t.CNR+"[lLjJ]?"}]},i={cN:"params",b:/\(/,e:/\)/,c:["self",e,r,n]},o={e:/:/,i:/[${=;\n]/,c:[t.UTM,i]};return{k:{keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda nonlocal|10 None True False",built_in:"Ellipsis NotImplemented"},i:/(<\/|->|\?)/,c:[e,r,n,t.HCM,t.inherit(o,{cN:"function",bK:"def",r:10}),t.inherit(o,{cN:"class",bK:"class"}),{cN:"decorator",b:/@/,e:/$/},{b:/\b(print|exec)\(/}]}}),hljs.registerLanguage("tex",function(t){var e={cN:"command",b:"\\\\[a-zA-Zа-яА-я]+[\\*]?"},n={cN:"command",b:"\\\\[^a-zA-Zа-яА-я0-9]"},r={cN:"special",b:"[{}\\[\\]\\&#~]",r:0};return{c:[{b:"\\\\[a-zA-Zа-яА-я]+[\\*]? *= *-?\\d*\\.?\\d+(pt|pc|mm|cm|in|dd|cc|ex|em)?",rB:!0,c:[e,n,{cN:"number",b:" *=",e:"-?\\d*\\.?\\d+(pt|pc|mm|cm|in|dd|cc|ex|em)?",eB:!0}],r:10},e,n,r,{cN:"formula",b:"\\$\\$",e:"\\$\\$",c:[e,n,r],r:0},{cN:"formula",b:"\\$",e:"\\$",c:[e,n,r],r:0},{cN:"comment",b:"%",e:"$",r:0}]}}),hljs.registerLanguage("sql",function(t){return{cI:!0,i:/[<>]/,c:[{cN:"operator",b:"\\b(begin|end|start|commit|rollback|savepoint|lock|alter|create|drop|rename|call|delete|do|handler|insert|load|replace|select|truncate|update|set|show|pragma|grant|merge)\\b(?!:)",e:";",eW:!0,k:{keyword:"all partial global month current_timestamp using go revoke smallint indicator end-exec disconnect zone with character assertion to add current_user usage input local alter match collate real then rollback get read timestamp session_user not integer bit unique day minute desc insert execute like ilike|2 level decimal drop continue isolation found where constraints domain right national some module transaction relative second connect escape close system_user for deferred section cast current sqlstate allocate intersect deallocate numeric public preserve full goto initially asc no key output collation group by union session both last language constraint column of space foreign deferrable prior connection unknown action commit view or first into float year primary cascaded except restrict set references names table outer open select size are rows from prepare distinct leading create only next inner authorization schema corresponding option declare precision immediate else timezone_minute external varying translation true case exception join hour default double scroll value cursor descriptor values dec fetch procedure delete and false int is describe char as at in varchar null trailing any absolute current_time end grant privileges when cross check write current_date pad begin temporary exec time update catalog user sql date on identity timezone_hour natural whenever interval work order cascade diagnostics nchar having left call do handler load replace truncate start lock show pragma exists number trigger if before after each row merge matched database",aggregate:"count sum min max avg"},c:[{cN:"string",b:"'",e:"'",c:[t.BE,{b:"''"}]},{cN:"string",b:'"',e:'"',c:[t.BE,{b:'""'}]},{cN:"string",b:"`",e:"`",c:[t.BE]},t.CNM]},t.CBLCLM,{cN:"comment",b:"--",e:"$"}]}}),hljs.registerLanguage("ini",function(t){return{cI:!0,i:/\S/,c:[{cN:"comment",b:";",e:"$"},{cN:"title",b:"^\\[",e:"\\]"},{cN:"setting",b:"^[a-z0-9\\[\\]_-]+[ \\t]*=[ \\t]*",e:"$",c:[{cN:"value",eW:!0,k:"on off true false yes no",c:[t.QSM,t.NM],r:0}]}]}}),hljs.registerLanguage("perl",function(t){var e="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",n={cN:"subst",b:"[$@]\\{",e:"\\}",k:e},r={b:"->{",e:"}"},i={cN:"variable",v:[{b:/\$\d/},{b:/[\$\%\@\*](\^\w\b|#\w+(\:\:\w+)*|{\w+}|\w+(\:\:\w*)*)/},{b:/[\$\%\@\*][^\s\w{]/,r:0}]},o={cN:"comment",b:"^(__END__|__DATA__)",e:"\\n$",r:5},a=[t.BE,n,i],s=[i,t.HCM,o,{cN:"comment",b:"^\\=\\w",e:"\\=cut",eW:!0},r,{cN:"string",c:a,v:[{b:"q[qwxr]?\\s*\\(",e:"\\)",r:5},{b:"q[qwxr]?\\s*\\[",e:"\\]",r:5},{b:"q[qwxr]?\\s*\\{",e:"\\}",r:5},{b:"q[qwxr]?\\s*\\|",e:"\\|",r:5},{b:"q[qwxr]?\\s*\\<",e:"\\>",r:5},{b:"qw\\s+q",e:"q",r:5},{b:"'",e:"'",c:[t.BE]},{b:'"',e:'"'},{b:"`",e:"`",c:[t.BE]},{b:"{\\w+}",c:[],r:0},{b:"-?\\w+\\s*\\=\\>",c:[],r:0}]},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{b:"(\\/\\/|"+t.RSR+"|\\b(split|return|print|reverse|grep)\\b)\\s*",k:"split return print reverse grep",r:0,c:[t.HCM,o,{cN:"regexp",b:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",r:10},{cN:"regexp",b:"(m|qr)?/",e:"/[a-z]*",c:[t.BE],r:0}]},{cN:"sub",bK:"sub",e:"(\\s*\\(.*?\\))?[;{]",r:5},{cN:"operator",b:"-\\w\\b",r:0}];return n.c=s,r.c=s,{k:e,c:s}}),hljs.registerLanguage("objectivec",function(t){var e={keyword:"int float while char export sizeof typedef const struct for union unsigned long volatile static bool mutable if do return goto void enum else break extern asm case short default double register explicit signed typename this switch continue wchar_t inline readonly assign self synchronized id nonatomic super unichar IBOutlet IBAction strong weak @private @protected @public @try @property @end @throw @catch @finally @synthesize @dynamic @selector @optional @required",literal:"false true FALSE TRUE nil YES NO NULL",built_in:"NSString NSDictionary CGRect CGPoint UIButton UILabel UITextView UIWebView MKMapView UISegmentedControl NSObject UITableViewDelegate UITableViewDataSource NSThread UIActivityIndicator UITabbar UIToolBar UIBarButtonItem UIImageView NSAutoreleasePool UITableView BOOL NSInteger CGFloat NSException NSLog NSMutableString NSMutableArray NSMutableDictionary NSURL NSIndexPath CGSize UITableViewCell UIView UIViewController UINavigationBar UINavigationController UITabBarController UIPopoverController UIPopoverControllerDelegate UIImage NSNumber UISearchBar NSFetchedResultsController NSFetchedResultsChangeType UIScrollView UIScrollViewDelegate UIEdgeInsets UIColor UIFont UIApplication NSNotFound NSNotificationCenter NSNotification UILocalNotification NSBundle NSFileManager NSTimeInterval NSDate NSCalendar NSUserDefaults UIWindow NSRange NSArray NSError NSURLRequest NSURLConnection UIInterfaceOrientation MPMoviePlayerController dispatch_once_t dispatch_queue_t dispatch_sync dispatch_async dispatch_once"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,r="@interface @class @protocol @implementation";return{k:e,l:n,i:"</",c:[t.CLCM,t.CBLCLM,t.CNM,t.QSM,{cN:"string",b:"'",e:"[^\\\\]'",i:"[^\\\\][^']"},{cN:"preprocessor",b:"#import",e:"$",c:[{cN:"title",b:'"',e:'"'},{cN:"title",b:"<",e:">"}]},{cN:"preprocessor",b:"#",e:"$"},{cN:"class",b:"("+r.split(" ").join("|")+")\\b",e:"({|$)",k:r,l:n,c:[t.UTM]},{cN:"variable",b:"\\."+t.UIR,r:0}]}}),hljs.registerLanguage("coffeescript",function(t){var e={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off",reserved:"case default function var void with const let enum export import native __hasProp __extends __slice __bind __indexOf",built_in:"npm require console print module exports global window document"},n="[A-Za-z$_][0-9A-Za-z$_]*",r=t.inherit(t.TM,{b:n}),i={cN:"subst",b:/#\{/,e:/}/,k:e},o=[t.BNM,t.inherit(t.CNM,{starts:{e:"(\\s*/)?",r:0}}),{cN:"string",v:[{b:/'''/,e:/'''/,c:[t.BE]},{b:/'/,e:/'/,c:[t.BE]},{b:/"""/,e:/"""/,c:[t.BE,i]},{b:/"/,e:/"/,c:[t.BE,i]}]},{cN:"regexp",v:[{b:"///",e:"///",c:[i,t.HCM]},{b:"//[gim]*",r:0},{b:"/\\S(\\\\.|[^\\n])*?/[gim]*(?=\\s|\\W|$)"}]},{cN:"property",b:"@"+n},{b:"`",e:"`",eB:!0,eE:!0,sL:"javascript"}];return i.c=o,{k:e,c:o.concat([{cN:"comment",b:"###",e:"###"},t.HCM,{cN:"function",b:"("+n+"\\s*=\\s*)?(\\(.*\\))?\\s*\\B[-=]>",e:"[-=]>",rB:!0,c:[r,{cN:"params",b:"\\(",rB:!0,c:[{b:/\(/,e:/\)/,k:e,c:["self"].concat(o)}]}]},{cN:"class",bK:"class",e:"$",i:/[:="\[\]]/,c:[{bK:"extends",eW:!0,i:/[:="\[\]]/,c:[r]},r]},{cN:"attribute",b:n+":",e:":",rB:!0,eE:!0,r:0}])}}),hljs.registerLanguage("nginx",function(t){var e={cN:"variable",v:[{b:/\$\d+/},{b:/\$\{/,e:/}/},{b:"[\\$\\@]"+t.UIR}]},n={eW:!0,l:"[a-z/_]+",k:{built_in:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},r:0,i:"=>",c:[t.HCM,{cN:"string",c:[t.BE,e],v:[{b:/"/,e:/"/},{b:/'/,e:/'/}]},{cN:"url",b:"([a-z]+):/",e:"\\s",eW:!0,eE:!0},{cN:"regexp",c:[t.BE,e],v:[{b:"\\s\\^",e:"\\s|{|;",rE:!0},{b:"~\\*?\\s+",e:"\\s|{|;",rE:!0},{b:"\\*(\\.[a-z\\-]+)+"},{b:"([a-z\\-]+\\.)+\\*"}]},{cN:"number",b:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{cN:"number",b:"\\b\\d+[kKmMgGdshdwy]*\\b",r:0},e]};return{c:[t.HCM,{b:t.UIR+"\\s",e:";|{",rB:!0,c:[t.inherit(t.UTM,{starts:n})],r:0}],i:"[^\\s\\}]"}}),hljs.registerLanguage("json",function(t){var e={literal:"true false null"},n=[t.QSM,t.CNM],r={cN:"value",e:",",eW:!0,eE:!0,c:n,k:e},i={b:"{",e:"}",c:[{cN:"attribute",b:'\\s*"',e:'"\\s*:\\s*',eB:!0,eE:!0,c:[t.BE],i:"\\n",starts:r}],i:"\\S"},o={b:"\\[",e:"\\]",c:[t.inherit(r,{cN:null})],i:"\\S"};return n.splice(n.length,0,i,o),{c:n,k:e,i:"\\S"}}),hljs.registerLanguage("apache",function(t){var e={cN:"number",b:"[\\$%]\\d+"};return{cI:!0,c:[t.HCM,{cN:"tag",b:"</?",e:">"},{cN:"keyword",b:/\w+/,r:0,k:{common:"order deny allow setenv rewriterule rewriteengine rewritecond documentroot sethandler errordocument loadmodule options header listen serverroot servername"},starts:{e:/$/,r:0,k:{literal:"on off all"},c:[{cN:"sqbracket",b:"\\s\\[",e:"\\]$"},{cN:"cbracket",b:"[\\$%]\\{",e:"\\}",c:["self",e]},e,t.QSM]}}],i:/\S/}}),hljs.registerLanguage("scss",function(t){var e="[a-zA-Z-][a-zA-Z0-9_-]*",n={cN:"function",b:e+"\\(",e:"\\)",c:["self",t.NM,t.ASM,t.QSM]},r={cN:"hexcolor",b:"#[0-9A-Fa-f]+"},i={cN:"attribute",b:"[A-Z\\_\\.\\-]+",e:":",eE:!0,i:"[^\\s]",starts:{cN:"value",eW:!0,eE:!0,c:[n,r,t.NM,t.QSM,t.ASM,t.CBLCLM,{cN:"important",b:"!important"}]}};return{cI:!0,i:"[=/|']",c:[t.CLCM,t.CBLCLM,{cN:"function",b:e+"\\(",e:"\\)",c:["self",t.NM,t.ASM,t.QSM]},{cN:"id",b:"\\#[A-Za-z0-9_-]+",r:0},{cN:"class",b:"\\.[A-Za-z0-9_-]+",r:0},{cN:"attr_selector",b:"\\[",e:"\\]",i:"$"},{cN:"tag",b:"\\b(a|abbr|acronym|address|area|article|aside|audio|b|base|big|blockquote|body|br|button|canvas|caption|cite|code|col|colgroup|command|datalist|dd|del|details|dfn|div|dl|dt|em|embed|fieldset|figcaption|figure|footer|form|frame|frameset|(h[1-6])|head|header|hgroup|hr|html|i|iframe|img|input|ins|kbd|keygen|label|legend|li|link|map|mark|meta|meter|nav|noframes|noscript|object|ol|optgroup|option|output|p|param|pre|progress|q|rp|rt|ruby|samp|script|section|select|small|span|strike|strong|style|sub|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|tt|ul|var|video)\\b",r:0},{cN:"pseudo",b:":(visited|valid|root|right|required|read-write|read-only|out-range|optional|only-of-type|only-child|nth-of-type|nth-last-of-type|nth-last-child|nth-child|not|link|left|last-of-type|last-child|lang|invalid|indeterminate|in-range|hover|focus|first-of-type|first-line|first-letter|first-child|first|enabled|empty|disabled|default|checked|before|after|active)"},{cN:"pseudo",b:"::(after|before|choices|first-letter|first-line|repeat-index|repeat-item|selection|value)"},{cN:"attribute",b:"\\b(z-index|word-wrap|word-spacing|word-break|width|widows|white-space|visibility|vertical-align|unicode-bidi|transition-timing-function|transition-property|transition-duration|transition-delay|transition|transform-style|transform-origin|transform|top|text-underline-position|text-transform|text-shadow|text-rendering|text-overflow|text-indent|text-decoration-style|text-decoration-line|text-decoration-color|text-decoration|text-align-last|text-align|tab-size|table-layout|right|resize|quotes|position|pointer-events|perspective-origin|perspective|page-break-inside|page-break-before|page-break-after|padding-top|padding-right|padding-left|padding-bottom|padding|overflow-y|overflow-x|overflow-wrap|overflow|outline-width|outline-style|outline-offset|outline-color|outline|orphans|order|opacity|object-position|object-fit|normal|none|nav-up|nav-right|nav-left|nav-index|nav-down|min-width|min-height|max-width|max-height|mask|marks|margin-top|margin-right|margin-left|margin-bottom|margin|list-style-type|list-style-position|list-style-image|list-style|line-height|letter-spacing|left|justify-content|initial|inherit|ime-mode|image-orientation|image-resolution|image-rendering|icon|hyphens|height|font-weight|font-variant-ligatures|font-variant|font-style|font-stretch|font-size-adjust|font-size|font-language-override|font-kerning|font-feature-settings|font-family|font|float|flex-wrap|flex-shrink|flex-grow|flex-flow|flex-direction|flex-basis|flex|filter|empty-cells|display|direction|cursor|counter-reset|counter-increment|content|column-width|column-span|column-rule-width|column-rule-style|column-rule-color|column-rule|column-gap|column-fill|column-count|columns|color|clip-path|clip|clear|caption-side|break-inside|break-before|break-after|box-sizing|box-shadow|box-decoration-break|bottom|border-width|border-top-width|border-top-style|border-top-right-radius|border-top-left-radius|border-top-color|border-top|border-style|border-spacing|border-right-width|border-right-style|border-right-color|border-right|border-radius|border-left-width|border-left-style|border-left-color|border-left|border-image-width|border-image-source|border-image-slice|border-image-repeat|border-image-outset|border-image|border-color|border-collapse|border-bottom-width|border-bottom-style|border-bottom-right-radius|border-bottom-left-radius|border-bottom-color|border-bottom|border|background-size|background-repeat|background-position|background-origin|background-image|background-color|background-clip|background-attachment|background|backface-visibility|auto|animation-timing-function|animation-play-state|animation-name|animation-iteration-count|animation-fill-mode|animation-duration|animation-direction|animation-delay|animation|align-self|align-items|align-content)\\b",i:"[^\\s]"},{cN:"value",b:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{cN:"value",b:":",e:";",c:[r,t.NM,t.QSM,t.ASM,{cN:"important",b:"!important"}]},{cN:"at_rule",b:"@",e:"[{;]",k:"mixin include extend for if else each while charset import debug media page content font-face namespace warn",c:[n,t.QSM,t.ASM,r,t.NM,{cN:"preprocessor",b:"\\s[A-Za-z0-9_.-]+",r:0}]}]}}),hljs.registerLanguage("applescript",function(t){var e=t.inherit(t.QSM,{i:""}),n={cN:"params",b:"\\(",e:"\\)",c:["self",t.CNM,e]},r=[{cN:"comment",b:"--",e:"$"},{cN:"comment",b:"\\(\\*",e:"\\*\\)",c:["self",{b:"--",e:"$"}]},t.HCM];return{k:{keyword:"about above after against and around as at back before beginning behind below beneath beside between but by considering contain contains continue copy div does eighth else end equal equals error every exit fifth first for fourth from front get given global if ignoring in into is it its last local me middle mod my ninth not of on onto or over prop property put ref reference repeat returning script second set seventh since sixth some tell tenth that the then third through thru timeout times to transaction try until where while whose with without",constant:"AppleScript false linefeed return pi quote result space tab true",type:"alias application boolean class constant date file integer list number real record string text",command:"activate beep count delay launch log offset read round run say summarize write",property:"character characters contents day frontmost id item length month name paragraph paragraphs rest reverse running time version weekday word words year"},c:[e,t.CNM,{cN:"type",b:"\\bPOSIX file\\b"},{cN:"command",b:"\\b(clipboard info|the clipboard|info for|list (disks|folder)|mount volume|path to|(close|open for) access|(get|set) eof|current date|do shell script|get volume settings|random number|set volume|system attribute|system info|time to GMT|(load|run|store) script|scripting components|ASCII (character|number)|localized string|choose (application|color|file|file name|folder|from list|remote application|URL)|display (alert|dialog))\\b|^\\s*return\\b"
},{cN:"constant",b:"\\b(text item delimiters|current application|missing value)\\b"},{cN:"keyword",b:"\\b(apart from|aside from|instead of|out of|greater than|isn't|(doesn't|does not) (equal|come before|come after|contain)|(greater|less) than( or equal)?|(starts?|ends|begins?) with|contained by|comes (before|after)|a (ref|reference))\\b"},{cN:"property",b:"\\b(POSIX path|(date|time) string|quoted form)\\b"},{cN:"function_start",bK:"on",i:"[${=;\\n]",c:[t.UTM,n]}].concat(r),i:"//"}}),hljs.registerLanguage("cpp",function(t){var e={keyword:"false int float while private char catch export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const struct for static_cast|10 union namespace unsigned long throw volatile static protected bool template mutable if public friend do return goto auto void enum else break new extern using true class asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue wchar_t inline delete alignof char16_t char32_t constexpr decltype noexcept nullptr static_assert thread_local restrict _Bool complex _Complex _Imaginary",built_in:"std string cin cout cerr clog stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr abort abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf"};return{aliases:["c"],k:e,i:"</",c:[t.CLCM,t.CBLCLM,t.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},t.CNM,{cN:"preprocessor",b:"#",e:"$",c:[{b:"include\\s*<",e:">",i:"\\n"},t.CLCM]},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:e,r:10,c:["self"]}]}}),hljs.registerLanguage("makefile",function(t){var e={cN:"variable",b:/\$\(/,e:/\)/,c:[t.BE]};return{c:[t.HCM,{b:/^\w+\s*\W*=/,rB:!0,r:0,starts:{cN:"constant",e:/\s*\W*=/,eE:!0,starts:{e:/$/,r:0,c:[e]}}},{cN:"title",b:/^[\w]+:\s*$/},{cN:"phony",b:/^\.PHONY:/,e:/$/,k:".PHONY",l:/[\.\w]+/},{b:/^\t+/,e:/$/,c:[t.QSM,e]}]}}),hljs.initHighlightingOnLoad(),$(function(){$("select#sortBy").change(function(t){var e=$("#ticketTableSortingForm");$("input#sortDesc").attr("value","False"),e.submit()}),$("button#sortDescendingButton").bind("click",function(t){var e=$("#ticketTableSortingForm");$("input#sortDesc").attr("value","True"),e.submit()}),$("button#sortAscendingButton").bind("click",function(t){var e=$("#ticketTableSortingForm");$("input#sortDesc").attr("value","False"),e.submit()})}),$(function(){$(document.body).on("click","a.changePriorityLink",function(){var t=$(this).closest("div.singleTicket"),e=t.attr("class"),n=$(this).text(),r=$(this).closest(".dropdown-menu");r.find("li.hidden").toggleClass("hidden"),$(this).closest("li").toggleClass("hidden"),e.indexOf("border-red")>=0?(t.toggleClass("border-red"),t.find(".priorityLabel").toggleClass("red")):e.indexOf("border-yellow")>=0?(t.toggleClass("border-yellow"),t.find(".priorityLabel").toggleClass("yellow")):e.indexOf("border-green")>=0?(t.toggleClass("border-green"),t.find(".priorityLabel").toggleClass("green")):e.indexOf("border-blue")>=0&&(t.toggleClass("border-blue"),t.find(".priorityLabel").toggleClass("blue")),n.indexOf("critical")>=0?(t.toggleClass("border-green"),t.find(".priorityLabel").toggleClass("green"),t.find(".priorityLabel").html("<strong>CRITICAL</strong>")):n.indexOf("important")>=0?(t.toggleClass("border-yellow"),t.find(".priorityLabel").toggleClass("yellow"),t.find(".priorityLabel").html("<strong>IMPORTANT</strong>")):n.indexOf("useful")>=0?(t.toggleClass("border-red"),t.find(".priorityLabel").toggleClass("red"),t.find(".priorityLabel").html("<strong>USEFUL</strong>")):n.indexOf("high")>=0?(t.toggleClass("border-green"),t.find(".priorityLabel").toggleClass("green"),t.find(".priorityLabel").html("<strong>HIGH</strong>")):n.indexOf("medium")>=0?(t.toggleClass("border-yellow"),t.find(".priorityLabel").toggleClass("yellow"),t.find(".priorityLabel").html("<strong>MEDIUM</strong>")):n.indexOf("low")>=0?(t.toggleClass("border-red"),t.find(".priorityLabel").toggleClass("red"),t.find(".priorityLabel").html("<strong>LOW</strong>")):n.indexOf("none")>=0&&(t.toggleClass("border-blue"),t.find(".priorityLabel").toggleClass("blue"),t.find(".priorityLabel").html("NONE"))})}),$(function(){$(document.body).on("focusout","input[name='currentMag']",function(){var t=$(this).val();return t>20.5?(alert("current magnitude must brighter than 20.5 mag"),$(this).val(20.5),!1):void 0}),$(document.body).on("click","button.generateOBSubmitButton",function(){var t=$(this).attr("id");setTimeout(function(){t="#"+t,$(t).modal("hide"),$(this).off()},500)})}),$(function(){$(".classificationForm").on("change","select#clsClassificationWRTMax",function(){var t=$(this).val(),e=$(this).closest("form").find("#clsClassificationPhase"),n=e.closest("div.input-prepend").find("span.add-on");if("post-max"==t||"pre-max"==t)e.removeAttr("disabled"),"post-max"==t?n.html("+"):n.html("-");else{var e=$(this).closest("form").find("#clsClassificationPhase");e.attr("disabled",!0),n.html("?")}})}),$(function(){$(".classificationForm").on("change","select[name='clsClassificationWRTMax']",function(){var t=$(this).val(),e=$(this).closest("form").find("input[name='clsClassificationPhase']"),n=e.closest("div.input-prepend").find("span.add-on");"post-max"==t||"pre-max"==t?(e.removeAttr("disabled"),"post-max"==t?n.html("+"):n.html("-")):(e.attr("disabled",!0),"at-max"==t?n.html(""):n.html("?"))})}),$(function(){$(".classificationForm").on("change","select[name='clsType']",function(){var t=$(this).val(),e=$(this).closest("form").find("select[name='clsSnClassification']"),n=$(this).closest("form").find("input[name='clsPeculiar']");"supernova"==t?(e.removeAttr("disabled"),n.removeAttr("disabled")):(e.attr("disabled",!0),n.attr("disabled",!0))})});var _pessto_create_new_ticket_form=function(){var t=$("input[name='objectRa']");t.blur(function(){var e=t.val();e.indexOf(":")>=0&&(e=ra_sex2degrees(e)),$.isNumeric(e)&&t.val(e)});var e=$("input[name='objectDec']");e.blur(function(){var t=e.val();t.indexOf(":")>=0&&(t=dec_sex2degrees(t)),$.isNumeric(t)&&e.val(t)})}();$(function(){document.URL.indexOf("/transients")>-1&&$.post("/marshall/actions/refresh_sidebar_list_counts?method=put")}),$(function(){$("a.ticketMoveToLink").bind("click",function(t){var e=$(this).attr("notification"),e=decodeURIComponent(e),n=$("span#dynamicNotification");n.html(e);var r=$(this).closest("div.singleTicket");fade_and_hide(r),$.post("/marshall/actions/refresh_sidebar_list_counts?method=put")}),$(document.body).on("click","a.ticketMoveToLinkUndo",function(t){var e=$(this).attr("id"),n=$("div#"+e);show_and_unfade(n);var r=$("span#dynamicNotification");setTimeout(function(){r.show().html("")},200),$.post("/marshall/actions/refresh_sidebar_list_counts?method=put")})}),$(function(){$("a[data-toggle='tab']").bind("click",function(t){if($(this).text().indexOf("context")>=0){var e=reset_all_tickets;e();var n=$(this).attr("href"),r=$("div"+n).find("div.aladin-hide");r.attr("class","aladin"),dryxAladin(r)}})});
//# sourceMappingURL=./main-ck.js.map